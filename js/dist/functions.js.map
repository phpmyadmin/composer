{"version":3,"file":"functions.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/functions.js"],"sourcesContent":["\n/* global isStorageSupported */ // js/config.js\n/* global ChartType, ColumnType, DataTable, JQPlotChartFactory */ // js/chart.js\n/* global DatabaseStructure */ // js/database/structure.js\n/* global mysqlDocBuiltin, mysqlDocKeyword */ // js/doclinks.js\n/* global Indexes */ // js/indexes.js\n/* global firstDayOfCalendar, maxInputVars, mysqlDocTemplate, themeImagePath */ // templates/javascript/variables.twig\n/* global sprintf */ // js/vendor/sprintf.js\n/* global zxcvbnts */ // js/vendor/zxcvbn-ts.js\n\n/**\n * general function, usually for data manipulation pages\n *\n */\nvar Functions = {};\n\n/**\n * @var sqlBoxLocked lock for the sqlbox textarea in the querybox\n */\n// eslint-disable-next-line no-unused-vars\nvar sqlBoxLocked = false;\n\n/**\n * @var {array}, holds elements which content should only selected once\n */\nvar onlyOnceElements = [];\n\n/**\n * @var {number} ajaxMessageCount Number of AJAX messages shown since page load\n */\nvar ajaxMessageCount = 0;\n\n/**\n * @var codeMirrorEditor object containing CodeMirror editor of the query editor in SQL tab\n */\nvar codeMirrorEditor = false;\n\n/**\n * @var codeMirrorInlineEditor object containing CodeMirror editor of the inline query editor\n */\nvar codeMirrorInlineEditor = false;\n\n/**\n * @var {boolean} sqlAutoCompleteInProgress shows if Table/Column name autocomplete AJAX is in progress\n */\nvar sqlAutoCompleteInProgress = false;\n\n/**\n * @var sqlAutoComplete object containing list of columns in each table\n */\nvar sqlAutoComplete = false;\n\n/**\n * @var {string} sqlAutoCompleteDefaultTable string containing default table to autocomplete columns\n */\nvar sqlAutoCompleteDefaultTable = '';\n\n/**\n * @var {array} centralColumnList array to hold the columns in central list per db.\n */\nvar centralColumnList = [];\n\n/**\n * @var {array} primaryIndexes array to hold 'Primary' index columns.\n */\n// eslint-disable-next-line no-unused-vars\nvar primaryIndexes = [];\n\n/**\n * @var {array} uniqueIndexes array to hold 'Unique' index columns.\n */\n// eslint-disable-next-line no-unused-vars\nvar uniqueIndexes = [];\n\n/**\n * @var {array} indexes array to hold 'Index' columns.\n */\n// eslint-disable-next-line no-unused-vars\nvar indexes = [];\n\n/**\n * @var {array} fulltextIndexes array to hold 'Fulltext' columns.\n */\n// eslint-disable-next-line no-unused-vars\nvar fulltextIndexes = [];\n\n/**\n * @var {array} spatialIndexes array to hold 'Spatial' columns.\n */\n// eslint-disable-next-line no-unused-vars\nvar spatialIndexes = [];\n\n/**\n * Make sure that ajax requests will not be cached\n * by appending a random variable to their parameters\n */\n$.ajaxPrefilter(function (options, originalOptions) {\n    var nocache = new Date().getTime() + '' + Math.floor(Math.random() * 1000000);\n    if (typeof options.data === 'string') {\n        options.data += '&_nocache=' + nocache + '&token=' + encodeURIComponent(CommonParams.get('token'));\n    } else if (typeof options.data === 'object') {\n        options.data = $.extend(originalOptions.data, { '_nocache' : nocache, 'token': CommonParams.get('token') });\n    }\n});\n\n/**\n * Adds a date/time picker to an element\n *\n * @param {object} $thisElement a jQuery object pointing to the element\n * @param {string} type\n * @param {object} options\n */\nFunctions.addDatepicker = function ($thisElement, type, options) {\n    if (type !== 'date' && type !== 'time' && type !== 'datetime' && type !== 'timestamp') {\n        return;\n    }\n\n    var showTimepicker = true;\n    if (type === 'date') {\n        showTimepicker = false;\n    }\n\n    // Getting the current Date and time\n    var currentDateTime = new Date();\n\n    var defaultOptions = {\n        timeInput : true,\n        hour: currentDateTime.getHours(),\n        minute: currentDateTime.getMinutes(),\n        second: currentDateTime.getSeconds(),\n        showOn: 'button',\n        buttonImage: themeImagePath + 'b_calendar.png',\n        buttonImageOnly: true,\n        stepMinutes: 1,\n        stepHours: 1,\n        showSecond: true,\n        showMillisec: true,\n        showMicrosec: true,\n        showTimepicker: showTimepicker,\n        showButtonPanel: false,\n        changeYear: true,\n        dateFormat: 'yy-mm-dd', // yy means year with four digits\n        timeFormat: 'HH:mm:ss.lc',\n        constrainInput: false,\n        altFieldTimeOnly: false,\n        showAnim: '',\n        beforeShow: function (input, inst) {\n            // Remember that we came from the datepicker; this is used\n            // in table/change.js by verificationsAfterFieldChange()\n            $thisElement.data('comes_from', 'datepicker');\n            if ($(input).closest('.cEdit').length > 0) {\n                setTimeout(function () {\n                    inst.dpDiv.css({\n                        top: 0,\n                        left: 0,\n                        position: 'relative'\n                    });\n                }, 0);\n            }\n            setTimeout(function () {\n                // Fix wrong timepicker z-index, doesn't work without timeout\n                $('#ui-timepicker-div').css('z-index', $('#ui-datepicker-div').css('z-index'));\n                // Integrate tooltip text into dialog\n                var tooltip = $thisElement.uiTooltip('instance');\n                if (typeof tooltip !== 'undefined') {\n                    tooltip.disable();\n                    var $note = $('<p class=\"note\"></div>');\n                    $note.text(tooltip.option('content'));\n                    $('div.ui-datepicker').append($note);\n                }\n            }, 0);\n        },\n        onSelect: function () {\n            $thisElement.data('datepicker').inline = true;\n        },\n        onClose: function () {\n            // The value is no more from the date picker\n            $thisElement.data('comes_from', '');\n            if (typeof $thisElement.data('datepicker') !== 'undefined') {\n                $thisElement.data('datepicker').inline = false;\n            }\n            var tooltip = $thisElement.uiTooltip('instance');\n            if (typeof tooltip !== 'undefined') {\n                tooltip.enable();\n            }\n        }\n    };\n    if (type === 'time') {\n        $thisElement.timepicker($.extend(defaultOptions, options));\n        // Add a tip regarding entering MySQL allowed-values for TIME data-type\n        Functions.tooltip($thisElement, 'input', Messages.strMysqlAllowedValuesTipTime);\n    } else {\n        $thisElement.datetimepicker($.extend(defaultOptions, options));\n    }\n};\n\n/**\n * Add a date/time picker to each element that needs it\n * (only when jquery-ui-timepicker-addon.js is loaded)\n */\nFunctions.addDateTimePicker = function () {\n    if ($.timepicker !== undefined) {\n        $('input.timefield, input.datefield, input.datetimefield').each(function () {\n            var decimals = $(this).parent().attr('data-decimals');\n            var type = $(this).parent().attr('data-type');\n\n            var showMillisec = false;\n            var showMicrosec = false;\n            var timeFormat = 'HH:mm:ss';\n            var hourMax = 23;\n            // check for decimal places of seconds\n            if (decimals > 0 && type.indexOf('time') !== -1) {\n                if (decimals > 3) {\n                    showMillisec = true;\n                    showMicrosec = true;\n                    timeFormat = 'HH:mm:ss.lc';\n                } else {\n                    showMillisec = true;\n                    timeFormat = 'HH:mm:ss.l';\n                }\n            }\n            if (type === 'time') {\n                hourMax = 99;\n            }\n            Functions.addDatepicker($(this), type, {\n                showMillisec: showMillisec,\n                showMicrosec: showMicrosec,\n                timeFormat: timeFormat,\n                hourMax: hourMax,\n                firstDay: firstDayOfCalendar\n            });\n            // Add a tip regarding entering MySQL allowed-values\n            // for TIME and DATE data-type\n            if ($(this).hasClass('timefield')) {\n                Functions.tooltip($(this), 'input', Messages.strMysqlAllowedValuesTipTime);\n            } else if ($(this).hasClass('datefield')) {\n                Functions.tooltip($(this), 'input', Messages.strMysqlAllowedValuesTipDate);\n            }\n        });\n    }\n};\n\n/**\n * Handle redirect and reload flags sent as part of AJAX requests\n *\n * @param data ajax response data\n */\nFunctions.handleRedirectAndReload = function (data) {\n    if (parseInt(data.redirect_flag) === 1) {\n        // add one more GET param to display session expiry msg\n        if (window.location.href.indexOf('?') === -1) {\n            window.location.href += '?session_expired=1';\n        } else {\n            window.location.href += CommonParams.get('arg_separator') + 'session_expired=1';\n        }\n        window.location.reload();\n    } else if (parseInt(data.reload_flag) === 1) {\n        window.location.reload();\n    }\n};\n\n/**\n * Creates an SQL editor which supports auto completing etc.\n *\n * @param $textarea   jQuery object wrapping the textarea to be made the editor\n * @param options     optional options for CodeMirror\n * @param {'vertical'|'horizontal'|'both'} resize optional resizing ('vertical', 'horizontal', 'both')\n * @param lintOptions additional options for lint\n *\n * @return {object|null}\n */\nFunctions.getSqlEditor = function ($textarea, options, resize, lintOptions) {\n    var resizeType = resize;\n    if ($textarea.length > 0 && typeof CodeMirror !== 'undefined') {\n        // merge options for CodeMirror\n        var defaults = {\n            lineNumbers: true,\n            matchBrackets: true,\n            extraKeys: { 'Ctrl-Space': 'autocomplete' },\n            hintOptions: { 'completeSingle': false, 'completeOnSingleClick': true },\n            indentUnit: 4,\n            mode: 'text/x-mysql',\n            lineWrapping: true\n        };\n\n        if (CodeMirror.sqlLint) {\n            $.extend(defaults, {\n                gutters: ['CodeMirror-lint-markers'],\n                lint: {\n                    'getAnnotations': CodeMirror.sqlLint,\n                    'async': true,\n                    'lintOptions': lintOptions\n                }\n            });\n        }\n\n        $.extend(true, defaults, options);\n\n        // create CodeMirror editor\n        var codemirrorEditor = CodeMirror.fromTextArea($textarea[0], defaults);\n        // allow resizing\n        if (! resizeType) {\n            resizeType = 'vertical';\n        }\n        var handles = '';\n        if (resizeType === 'vertical') {\n            handles = 's';\n        }\n        if (resizeType === 'both') {\n            handles = 'all';\n        }\n        if (resizeType === 'horizontal') {\n            handles = 'e, w';\n        }\n        $(codemirrorEditor.getWrapperElement())\n            .css('resize', resizeType)\n            .resizable({\n                handles: handles,\n                resize: function () {\n                    codemirrorEditor.setSize($(this).width(), $(this).height());\n                }\n            });\n        // enable autocomplete\n        codemirrorEditor.on('inputRead', Functions.codeMirrorAutoCompleteOnInputRead);\n\n        // page locking\n        codemirrorEditor.on('change', function (e) {\n            e.data = {\n                value: 3,\n                content: codemirrorEditor.isClean(),\n            };\n            AJAX.lockPageHandler(e);\n        });\n\n        return codemirrorEditor;\n    }\n    return null;\n};\n\n/**\n * Clear text selection\n */\nFunctions.clearSelection = function () {\n    if (document.selection && document.selection.empty) {\n        document.selection.empty();\n    } else if (window.getSelection) {\n        var sel = window.getSelection();\n        if (sel.empty) {\n            sel.empty();\n        }\n        if (sel.removeAllRanges) {\n            sel.removeAllRanges();\n        }\n    }\n};\n\n/**\n * Create a jQuery UI tooltip\n *\n * @param $elements     jQuery object representing the elements\n * @param item          the item\n *                      (see https://api.jqueryui.com/tooltip/#option-items)\n * @param myContent     content of the tooltip\n * @param additionalOptions to override the default options\n *\n */\nFunctions.tooltip = function ($elements, item, myContent, additionalOptions) {\n    if ($('#no_hint').length > 0) {\n        return;\n    }\n\n    var defaultOptions = {\n        content: myContent,\n        items:  item,\n        tooltipClass: 'tooltip',\n        track: true,\n        show: false,\n        hide: false\n    };\n\n    $elements.uiTooltip($.extend(true, defaultOptions, additionalOptions));\n};\n\n/**\n * HTML escaping\n *\n * @param {any} unsafe\n * @return {string | false}\n */\nFunctions.escapeHtml = function (unsafe) {\n    if (typeof(unsafe) !== 'undefined') {\n        return unsafe\n            .toString()\n            .replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#039;');\n    } else {\n        return false;\n    }\n};\n\n/**\n * JavaScript escaping\n *\n * @param {any} unsafe\n * @return {string | false}\n */\nFunctions.escapeJsString = function (unsafe) {\n    if (typeof(unsafe) !== 'undefined') {\n        return unsafe\n            .toString()\n            .replace('\\x00', '')\n            .replace('\\\\', '\\\\\\\\')\n            .replace('\\'', '\\\\\\'')\n            .replace('&#039;', '\\\\&#039;')\n            .replace('\"', '\\\\\"')\n            .replace('&quot;', '\\\\&quot;')\n            .replace('\\n', '\\n')\n            .replace('\\r', '\\r')\n            .replace(/<\\/script/gi, '</\\' + \\'script');\n    } else {\n        return false;\n    }\n};\n\n/**\n * @param {string} s\n * @return {string}\n */\nFunctions.escapeBacktick = function (s) {\n    return s.replace('`', '``');\n};\n\n/**\n * @param {string} s\n * @return {string}\n */\nFunctions.escapeSingleQuote = function (s) {\n    return s.replace('\\\\', '\\\\\\\\').replace('\\'', '\\\\\\'');\n};\n\nFunctions.sprintf = function () {\n    return sprintf.apply(this, arguments);\n};\n\n/**\n * Hides/shows the default value input field, depending on the default type\n * Ticks the NULL checkbox if NULL is chosen as default value.\n *\n * @param {JQuery<HTMLElement>} $defaultType\n */\nFunctions.hideShowDefaultValue = function ($defaultType) {\n    if ($defaultType.val() === 'USER_DEFINED') {\n        $defaultType.siblings('.default_value').show().trigger('focus');\n    } else {\n        $defaultType.siblings('.default_value').hide();\n        if ($defaultType.val() === 'NULL') {\n            var $nullCheckbox = $defaultType.closest('tr').find('.allow_null');\n            $nullCheckbox.prop('checked', true);\n        }\n    }\n};\n\n/**\n * Hides/shows the input field for column expression based on whether\n * VIRTUAL/PERSISTENT is selected\n *\n * @param $virtuality virtuality dropdown\n */\nFunctions.hideShowExpression = function ($virtuality) {\n    if ($virtuality.val() === '') {\n        $virtuality.siblings('.expression').hide();\n    } else {\n        $virtuality.siblings('.expression').show();\n    }\n};\n\n/**\n * Show notices for ENUM columns; add/hide the default value\n *\n */\nFunctions.verifyColumnsProperties = function () {\n    $('select.column_type').each(function () {\n        Functions.showNoticeForEnum($(this));\n        Functions.showWarningForIntTypes();\n    });\n    $('select.default_type').each(function () {\n        Functions.hideShowDefaultValue($(this));\n    });\n    $('select.virtuality').each(function () {\n        Functions.hideShowExpression($(this));\n    });\n};\n\n/**\n * Add a hidden field to the form to indicate that this will be an\n * Ajax request (only if this hidden field does not exist)\n *\n * @param {object} $form the form\n */\nFunctions.prepareForAjaxRequest = function ($form) {\n    if (! $form.find('input:hidden').is('#ajax_request_hidden')) {\n        $form.append('<input type=\"hidden\" id=\"ajax_request_hidden\" name=\"ajax_request\" value=\"true\">');\n    }\n};\n\nFunctions.checkPasswordStrength = function (value, meterObject, meterObjectLabel, username) {\n    // List of words we don't want to appear in the password\n    var customDict = [\n        'phpmyadmin',\n        'mariadb',\n        'mysql',\n        'php',\n        'my',\n        'admin',\n    ];\n    if (username !== null) {\n        customDict.push(username);\n    }\n\n    zxcvbnts.core.ZxcvbnOptions.setOptions({ dictionary: { userInputs: customDict } });\n    var zxcvbnObject = zxcvbnts.core.zxcvbn(value);\n    var strength = zxcvbnObject.score;\n    strength = parseInt(strength);\n    meterObject.val(strength);\n    switch (strength) {\n    case 0: meterObjectLabel.html(Messages.strExtrWeak);\n        break;\n    case 1: meterObjectLabel.html(Messages.strVeryWeak);\n        break;\n    case 2: meterObjectLabel.html(Messages.strWeak);\n        break;\n    case 3: meterObjectLabel.html(Messages.strGood);\n        break;\n    case 4: meterObjectLabel.html(Messages.strStrong);\n    }\n};\n\n/**\n * Generate a new password and copy it to the password input areas\n *\n * @param {object} passwordForm the form that holds the password fields\n *\n * @return {boolean} always true\n */\nFunctions.suggestPassword = function (passwordForm) {\n    // restrict the password to just letters and numbers to avoid problems:\n    // \"editors and viewers regard the password as multiple words and\n    // things like double click no longer work\"\n    var pwchars = 'abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWYXZ@!_.*/()[]-';\n    var passwordlength = 16;    // do we want that to be dynamic?  no, keep it simple :)\n    var passwd = passwordForm.generated_pw;\n    // eslint-disable-next-line compat/compat\n    var randomWords = new Int32Array(passwordlength);\n\n    passwd.value = '';\n\n    var i;\n\n    // First we're going to try to use a built-in CSPRNG\n    // eslint-disable-next-line compat/compat\n    if (window.crypto && window.crypto.getRandomValues) {\n        // eslint-disable-next-line compat/compat\n        window.crypto.getRandomValues(randomWords);\n    } else if (window.msCrypto && window.msCrypto.getRandomValues) {\n        // Because of course IE calls it msCrypto instead of being standard\n        window.msCrypto.getRandomValues(randomWords);\n    } else {\n        // Fallback to Math.random\n        for (i = 0; i < passwordlength; i++) {\n            randomWords[i] = Math.floor(Math.random() * pwchars.length);\n        }\n    }\n\n    for (i = 0; i < passwordlength; i++) {\n        passwd.value += pwchars.charAt(Math.abs(randomWords[i]) % pwchars.length);\n    }\n\n    var $jQueryPasswordForm = $(passwordForm);\n\n    passwordForm.elements.pma_pw.value = passwd.value;\n    passwordForm.elements.pma_pw2.value = passwd.value;\n    var meterObj = $jQueryPasswordForm.find('meter[name=\"pw_meter\"]').first();\n    var meterObjLabel = $jQueryPasswordForm.find('span[name=\"pw_strength\"]').first();\n    Functions.checkPasswordStrength(passwd.value, meterObj, meterObjLabel);\n    return true;\n};\n\n/**\n * for PhpMyAdmin\\Display\\ChangePassword and /user-password\n */\nFunctions.displayPasswordGenerateButton = function () {\n    var generatePwdRow = $('<tr></tr>').addClass('align-middle');\n    $('<td></td>').html(Messages.strGeneratePassword).appendTo(generatePwdRow);\n    var pwdCell = $('<td></td>').appendTo(generatePwdRow);\n    var pwdButton = $('<input>')\n        .attr({ type: 'button', id: 'button_generate_password', value: Messages.strGenerate })\n        .addClass('btn btn-secondary button')\n        .on('click', function () {\n            Functions.suggestPassword(this.form);\n        });\n    var pwdTextbox = $('<input>')\n        .attr({ type: 'text', name: 'generated_pw', id: 'generated_pw' });\n    pwdCell.append(pwdButton).append(pwdTextbox);\n\n    if (document.getElementById('button_generate_password') === null) {\n        $('#tr_element_before_generate_password').parent().append(generatePwdRow);\n    }\n\n    var generatePwdDiv = $('<div></div>').addClass('item');\n    $('<label></label>').attr({ for: 'button_generate_password' })\n        .html(Messages.strGeneratePassword + ':')\n        .appendTo(generatePwdDiv);\n    var optionsSpan = $('<span></span>').addClass('options')\n        .appendTo(generatePwdDiv);\n    pwdButton.clone(true).appendTo(optionsSpan);\n    pwdTextbox.clone(true).appendTo(generatePwdDiv);\n\n    if (document.getElementById('button_generate_password') === null) {\n        $('#div_element_before_generate_password').parent().append(generatePwdDiv);\n    }\n};\n\n/**\n * selects the content of a given object, f.e. a textarea\n *\n * @param {object} element   element of which the content will be selected\n * @param {any | true} lock  variable which holds the lock for this element or true, if no lock exists\n * @param {boolean} onlyOnce boolean if true this is only done once f.e. only on first focus\n */\nFunctions.selectContent = function (element, lock, onlyOnce) {\n    if (onlyOnce && onlyOnceElements[element.name]) {\n        return;\n    }\n\n    onlyOnceElements[element.name] = true;\n\n    if (lock) {\n        return;\n    }\n\n    element.select();\n};\n\n/**\n * Displays a confirmation box before submitting a \"DROP/DELETE/ALTER\" query.\n * This function is called while clicking links\n *\n * @param {object} theLink     the link\n * @param {object} theSqlQuery the sql query to submit\n *\n * @return {boolean} whether to run the query or not\n */\nFunctions.confirmLink = function (theLink, theSqlQuery) {\n    // Confirmation is not required in the configuration file\n    // or browser is Opera (crappy js implementation)\n    if (Messages.strDoYouReally === '' || typeof(window.opera) !== 'undefined') {\n        return true;\n    }\n\n    var isConfirmed = confirm(Functions.sprintf(Messages.strDoYouReally, theSqlQuery));\n    if (isConfirmed) {\n        if (typeof(theLink.href) !== 'undefined') {\n            theLink.href += CommonParams.get('arg_separator') + 'is_js_confirmed=1';\n        } else if (typeof(theLink.form) !== 'undefined') {\n            theLink.form.action += '?is_js_confirmed=1';\n        }\n    }\n\n    return isConfirmed;\n};\n\n/**\n * Confirms a \"DROP/DELETE/ALTER\" query before\n * submitting it if required.\n * This function is called by the 'Functions.checkSqlQuery()' js function.\n *\n * @param {object} theForm1  the form\n * @param {string} sqlQuery1 the sql query string\n *\n * @return {boolean} whether to run the query or not\n *\n * @see Functions.checkSqlQuery()\n */\nFunctions.confirmQuery = function (theForm1, sqlQuery1) {\n    // Confirmation is not required in the configuration file\n    if (Messages.strDoYouReally === '') {\n        return true;\n    }\n\n    // Confirms a \"DROP/DELETE/ALTER/TRUNCATE\" statement\n    //\n    // TODO: find a way (if possible) to use the parser-analyser\n    // for this kind of verification\n    // For now, I just added a ^ to check for the statement at\n    // beginning of expression\n\n    var doConfirmRegExp0 = new RegExp('^\\\\s*DROP\\\\s+(IF EXISTS\\\\s+)?(TABLE|PROCEDURE)\\\\s', 'i');\n    var doConfirmRegExp1 = new RegExp('^\\\\s*ALTER\\\\s+TABLE\\\\s+((`[^`]+`)|([A-Za-z0-9_$]+))\\\\s+DROP\\\\s', 'i');\n    var doConfirmRegExp2 = new RegExp('^\\\\s*DELETE\\\\s+FROM\\\\s', 'i');\n    var doConfirmRegExp3 = new RegExp('^\\\\s*TRUNCATE\\\\s', 'i');\n    var doConfirmRegExp4 = new RegExp('^(?=.*UPDATE\\\\b)^((?!WHERE).)*$', 'i');\n\n    if (doConfirmRegExp0.test(sqlQuery1) ||\n        doConfirmRegExp1.test(sqlQuery1) ||\n        doConfirmRegExp2.test(sqlQuery1) ||\n        doConfirmRegExp3.test(sqlQuery1) ||\n        doConfirmRegExp4.test(sqlQuery1)) {\n        var message;\n        if (sqlQuery1.length > 100) {\n            message = sqlQuery1.substring(0, 100) + '\\n    ...';\n        } else {\n            message = sqlQuery1;\n        }\n        var isConfirmed = confirm(Functions.sprintf(Messages.strDoYouReally, message));\n        // statement is confirmed -> update the\n        // \"is_js_confirmed\" form field so the confirm test won't be\n        // run on the server side and allows to submit the form\n        if (isConfirmed) {\n            theForm1.elements.is_js_confirmed.value = 1;\n            return true;\n        } else {\n            // statement is rejected -> do not submit the form\n            window.focus();\n            return false;\n        } // end if (handle confirm box result)\n    } // end if (display confirm box)\n\n    return true;\n};\n\n/**\n * Displays an error message if the user submitted the sql query form with no\n * sql query, else checks for \"DROP/DELETE/ALTER\" statements\n *\n * @param {object} theForm the form\n *\n * @return {boolean} always false\n *\n * @see Functions.confirmQuery()\n */\nFunctions.checkSqlQuery = function (theForm) {\n    // get the textarea element containing the query\n    var sqlQuery;\n    if (codeMirrorEditor) {\n        codeMirrorEditor.save();\n        sqlQuery = codeMirrorEditor.getValue();\n    } else {\n        sqlQuery = theForm.elements.sql_query.value;\n    }\n    var spaceRegExp = new RegExp('\\\\s+');\n    if (typeof(theForm.elements.sql_file) !== 'undefined' &&\n            theForm.elements.sql_file.value.replace(spaceRegExp, '') !== '') {\n        return true;\n    }\n    if (typeof(theForm.elements.id_bookmark) !== 'undefined' &&\n            (theForm.elements.id_bookmark.value !== null || theForm.elements.id_bookmark.value !== '') &&\n            theForm.elements.id_bookmark.selectedIndex !== 0) {\n        return true;\n    }\n    var result = false;\n    // Checks for \"DROP/DELETE/ALTER\" statements\n    if (sqlQuery.replace(spaceRegExp, '') !== '') {\n        result = Functions.confirmQuery(theForm, sqlQuery);\n    } else {\n        alert(Messages.strFormEmpty);\n    }\n\n    if (codeMirrorEditor) {\n        codeMirrorEditor.focus();\n    } else if (codeMirrorInlineEditor) {\n        codeMirrorInlineEditor.focus();\n    }\n    return result;\n};\n\n/**\n * Check if a form's element is empty.\n * An element containing only spaces is also considered empty\n *\n * @param {object} theForm      the form\n * @param {string} theFieldName the name of the form field to put the focus on\n *\n * @return {boolean} whether the form field is empty or not\n */\nFunctions.emptyCheckTheField = function (theForm, theFieldName) {\n    var theField = theForm.elements[theFieldName];\n    var spaceRegExp = new RegExp('\\\\s+');\n    return theField.value.replace(spaceRegExp, '') === '';\n};\n\n/**\n * Ensures a value submitted in a form is numeric and is in a range\n *\n * @param {object} theForm the form\n * @param {string} theFieldName the name of the form field to check\n * @param {any} message\n * @param {number} minimum the minimum authorized value\n * @param {number} maximum the maximum authorized value\n *\n * @return {boolean}  whether a valid number has been submitted or not\n */\nFunctions.checkFormElementInRange = function (theForm, theFieldName, message, minimum, maximum) {\n    var theField         = theForm.elements[theFieldName];\n    var val              = parseInt(theField.value, 10);\n    var min = 0;\n    var max = Number.MAX_VALUE;\n\n    if (typeof(minimum) !== 'undefined') {\n        min = minimum;\n    }\n    if (typeof(maximum) !== 'undefined' && maximum !== null) {\n        max = maximum;\n    }\n\n    if (isNaN(val)) {\n        theField.select();\n        alert(Messages.strEnterValidNumber);\n        theField.focus();\n        return false;\n    } else if (val < min || val > max) {\n        theField.select();\n        alert(Functions.sprintf(message, val));\n        theField.focus();\n        return false;\n    } else {\n        theField.value = val;\n    }\n    return true;\n};\n\nFunctions.checkTableEditForm = function (theForm, fieldsCnt) {\n    // TODO: avoid sending a message if user just wants to add a line\n    // on the form but has not completed at least one field name\n\n    var atLeastOneField = 0;\n    var i;\n    var elm;\n    var elm2;\n    var elm3;\n    var val;\n    var id;\n\n    for (i = 0; i < fieldsCnt; i++) {\n        id = '#field_' + i + '_2';\n        elm = $(id);\n        val = elm.val();\n        if (val === 'VARCHAR' || val === 'CHAR' || val === 'BIT' || val === 'VARBINARY' || val === 'BINARY') {\n            elm2 = $('#field_' + i + '_3');\n            val = parseInt(elm2.val(), 10);\n            elm3 = $('#field_' + i + '_1');\n            if (isNaN(val) && elm3.val() !== '') {\n                elm2.select();\n                alert(Messages.strEnterValidLength);\n                elm2.focus();\n                return false;\n            }\n        }\n\n        if (atLeastOneField === 0) {\n            id = 'field_' + i + '_1';\n            if (!Functions.emptyCheckTheField(theForm, id)) {\n                atLeastOneField = 1;\n            }\n        }\n    }\n    if (atLeastOneField === 0) {\n        var theField = theForm.elements.field_0_1;\n        alert(Messages.strFormEmpty);\n        theField.focus();\n        return false;\n    }\n\n    // at least this section is under jQuery\n    var $input = $('input.textfield[name=\\'table\\']');\n    if ($input.val() === '') {\n        alert(Messages.strFormEmpty);\n        $input.trigger('focus');\n        return false;\n    }\n\n    return true;\n};\n\n/**\n * True if last click is to check a row.\n */\nvar lastClickChecked = false;\n\n/**\n * Zero-based index of last clicked row.\n * Used to handle the shift + click event in the code above.\n */\nvar lastClickedRow = -1;\n\n/**\n * Zero-based index of last shift clicked row.\n */\nvar lastShiftClickedRow = -1;\n\nvar idleSecondsCounter = 0;\nvar incInterval;\nvar updateTimeout;\nAJAX.registerTeardown('functions.js', function () {\n    clearTimeout(updateTimeout);\n    clearInterval(incInterval);\n    $(document).off('mousemove');\n});\n\nAJAX.registerOnload('functions.js', function () {\n    document.onclick = function () {\n        idleSecondsCounter = 0;\n    };\n    $(document).on('mousemove',function () {\n        idleSecondsCounter = 0;\n    });\n    document.onkeypress = function () {\n        idleSecondsCounter = 0;\n    };\n    function guid () {\n        function s4 () {\n            return Math.floor((1 + Math.random()) * 0x10000)\n                .toString(16)\n                .substring(1);\n        }\n        return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n            s4() + '-' + s4() + s4() + s4();\n    }\n\n    function SetIdleTime () {\n        idleSecondsCounter++;\n    }\n    function UpdateIdleTime () {\n        var href = 'index.php?route=/';\n        var guid = 'default';\n        if (isStorageSupported('sessionStorage')) {\n            guid = window.sessionStorage.guid;\n        }\n        var params = {\n            'ajax_request' : true,\n            'server' : CommonParams.get('server'),\n            'db' : CommonParams.get('db'),\n            'guid': guid,\n            'access_time': idleSecondsCounter,\n            'check_timeout': 1\n        };\n        $.ajax({\n            type: 'POST',\n            url: href,\n            data: params,\n            success: function (data) {\n                if (data.success) {\n                    if (CommonParams.get('LoginCookieValidity') - idleSecondsCounter < 0) {\n                        /* There is other active window, let's reset counter */\n                        idleSecondsCounter = 0;\n                    }\n                    var remaining = Math.min(\n                        /* Remaining login validity */\n                        CommonParams.get('LoginCookieValidity') - idleSecondsCounter,\n                        /* Remaining time till session GC */\n                        CommonParams.get('session_gc_maxlifetime')\n                    );\n                    var interval = 1000;\n                    if (remaining > 5) {\n                        // max value for setInterval() function\n                        interval = Math.min((remaining - 1) * 1000, Math.pow(2, 31) - 1);\n                    }\n                    updateTimeout = window.setTimeout(UpdateIdleTime, interval);\n                } else { // timeout occurred\n                    clearInterval(incInterval);\n                    if (isStorageSupported('sessionStorage')) {\n                        window.sessionStorage.clear();\n                    }\n                    // append the login form on the page, disable all the forms which were not disabled already, close all the open jqueryui modal boxes\n                    if (!$('#modalOverlay').length) {\n                        $('fieldset').not(':disabled').attr('disabled', 'disabled').addClass('disabled_for_expiration');\n                        $('body').append(data.error);\n                        $('.ui-dialog').each(function () {\n                            $('#' + $(this).attr('aria-describedby')).dialog('close');\n                        });\n                        $('#input_username').trigger('focus');\n                    } else {\n                        CommonParams.set('token', data.new_token);\n                        $('input[name=token]').val(data.new_token);\n                    }\n                    idleSecondsCounter = 0;\n                    Functions.handleRedirectAndReload(data);\n                }\n            }\n        });\n    }\n    if (CommonParams.get('logged_in')) {\n        incInterval = window.setInterval(SetIdleTime, 1000);\n        var sessionTimeout = Math.min(\n            CommonParams.get('LoginCookieValidity'),\n            CommonParams.get('session_gc_maxlifetime')\n        );\n        if (isStorageSupported('sessionStorage')) {\n            window.sessionStorage.setItem('guid', guid());\n        }\n        var interval = (sessionTimeout - 5) * 1000;\n        if (interval > Math.pow(2, 31) - 1) { // max value for setInterval() function\n            interval = Math.pow(2, 31) - 1;\n        }\n        updateTimeout = window.setTimeout(UpdateIdleTime, interval);\n    }\n});\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('functions.js', function () {\n    $(document).off('click', 'input:checkbox.checkall');\n});\n\nAJAX.registerOnload('functions.js', function () {\n    /**\n     * Row marking in horizontal mode (use \"on\" so that it works also for\n     * next pages reached via AJAX); a tr may have the class noclick to remove\n     * this behavior.\n     */\n\n    $(document).on('click', 'input:checkbox.checkall', function (e) {\n        var $this = $(this);\n        var $tr = $this.closest('tr');\n        var $table = $this.closest('table');\n\n        if (!e.shiftKey || lastClickedRow === -1) {\n            // usual click\n\n            var $checkbox = $tr.find(':checkbox.checkall');\n            var checked = $this.prop('checked');\n            $checkbox.prop('checked', checked).trigger('change');\n            if (checked) {\n                $tr.addClass('marked table-active');\n            } else {\n                $tr.removeClass('marked table-active');\n            }\n            lastClickChecked = checked;\n\n            // remember the last clicked row\n            lastClickedRow = lastClickChecked ? $table.find('tbody tr:not(.noclick)').index($tr) : -1;\n            lastShiftClickedRow = -1;\n        } else {\n            // handle the shift click\n            Functions.clearSelection();\n            var start;\n            var end;\n\n            // clear last shift click result\n            if (lastShiftClickedRow >= 0) {\n                if (lastShiftClickedRow >= lastClickedRow) {\n                    start = lastClickedRow;\n                    end = lastShiftClickedRow;\n                } else {\n                    start = lastShiftClickedRow;\n                    end = lastClickedRow;\n                }\n                $tr.parent().find('tr:not(.noclick)')\n                    .slice(start, end + 1)\n                    .removeClass('marked table-active')\n                    .find(':checkbox')\n                    .prop('checked', false)\n                    .trigger('change');\n            }\n\n            // handle new shift click\n            var currRow = $table.find('tbody tr:not(.noclick)').index($tr);\n            if (currRow >= lastClickedRow) {\n                start = lastClickedRow;\n                end = currRow;\n            } else {\n                start = currRow;\n                end = lastClickedRow;\n            }\n            $tr.parent().find('tr:not(.noclick)')\n                .slice(start, end + 1)\n                .addClass('marked table-active')\n                .find(':checkbox')\n                .prop('checked', true)\n                .trigger('change');\n\n            // remember the last shift clicked row\n            lastShiftClickedRow = currRow;\n        }\n    });\n\n    Functions.addDateTimePicker();\n\n    /**\n     * Add attribute to text boxes for iOS devices (based on bugID: 3508912)\n     */\n    if (navigator.userAgent.match(/(iphone|ipod|ipad)/i)) {\n        $('input[type=text]').attr('autocapitalize', 'off').attr('autocorrect', 'off');\n    }\n});\n\n/**\n  * Checks/unchecks all options of a <select> element\n  *\n  * @param {string} theForm   the form name\n  * @param {string} theSelect the element name\n  * @param {boolean} doCheck  whether to check or to uncheck options\n  *\n  * @return {boolean} always true\n  */\nFunctions.setSelectOptions = function (theForm, theSelect, doCheck) {\n    $('form[name=\\'' + theForm + '\\'] select[name=\\'' + theSelect + '\\']').find('option').prop('selected', doCheck);\n    return true;\n};\n\n/**\n * Sets current value for query box.\n * @param {string} query\n * @return {void}\n */\nFunctions.setQuery = function (query) {\n    if (codeMirrorEditor) {\n        codeMirrorEditor.setValue(query);\n        codeMirrorEditor.focus();\n    } else if (document.sqlform) {\n        document.sqlform.sql_query.value = query;\n        document.sqlform.sql_query.focus();\n    }\n};\n\n/**\n * Handles 'Simulate query' button on SQL query box.\n *\n * @return {void}\n */\nFunctions.handleSimulateQueryButton = function () {\n    var updateRegExp = new RegExp('^\\\\s*UPDATE\\\\s+((`[^`]+`)|([A-Za-z0-9_$]+))\\\\s+SET\\\\s', 'i');\n    var deleteRegExp = new RegExp('^\\\\s*DELETE\\\\s+FROM\\\\s', 'i');\n    var query = '';\n\n    if (codeMirrorEditor) {\n        query = codeMirrorEditor.getValue();\n    } else {\n        query = $('#sqlquery').val();\n    }\n\n    var $simulateDml = $('#simulate_dml');\n    if (updateRegExp.test(query) || deleteRegExp.test(query)) {\n        if (! $simulateDml.length) {\n            $('#button_submit_query')\n                .before('<input type=\"button\" id=\"simulate_dml\"' +\n                'tabindex=\"199\" class=\"btn btn-primary\" value=\"' +\n                Messages.strSimulateDML +\n                '\">');\n        }\n    } else {\n        if ($simulateDml.length) {\n            $simulateDml.remove();\n        }\n    }\n};\n\n/**\n  * Create quick sql statements.\n  *\n  * @param {'clear'|'format'|'saved'|'selectall'|'select'|'insert'|'update'|'delete'} queryType\n  *\n  */\nFunctions.insertQuery = function (queryType) {\n    var table;\n    if (queryType === 'clear') {\n        Functions.setQuery('');\n        return;\n    } else if (queryType === 'format') {\n        if (codeMirrorEditor) {\n            $('#querymessage').html(Messages.strFormatting +\n                '&nbsp;<img class=\"ajaxIcon\" src=\"' +\n                themeImagePath + 'ajax_clock_small.gif\" alt=\"\">');\n            var params = {\n                'ajax_request': true,\n                'sql': codeMirrorEditor.getValue(),\n                'server': CommonParams.get('server')\n            };\n            $.ajax({\n                type: 'POST',\n                url: 'index.php?route=/database/sql/format',\n                data: params,\n                success: function (data) {\n                    if (data.success) {\n                        codeMirrorEditor.setValue(data.sql);\n                    }\n                    $('#querymessage').html('');\n                },\n                error: function () {\n                    $('#querymessage').html('');\n                }\n            });\n        }\n        return;\n    } else if (queryType === 'saved') {\n        var db = $('input[name=\"db\"]').val();\n        table = $('input[name=\"table\"]').val();\n        var key = db;\n        if (table !== undefined) {\n            key += '.' + table;\n        }\n        key = 'autoSavedSql_' + key;\n        if (isStorageSupported('localStorage') &&\n            typeof window.localStorage.getItem(key) === 'string') {\n            Functions.setQuery(window.localStorage.getItem(key));\n        } else if (Cookies.get(key)) {\n            Functions.setQuery(Cookies.get(key));\n        } else {\n            Functions.ajaxShowMessage(Messages.strNoAutoSavedQuery);\n        }\n        return;\n    }\n\n    var query = '';\n    var myListBox = document.sqlform.dummy;\n    table = document.sqlform.table.value;\n\n    if (myListBox.options.length > 0) {\n        sqlBoxLocked = true;\n        var columnsList = '';\n        var valDis = '';\n        var editDis = '';\n        var NbSelect = 0;\n        for (var i = 0; i < myListBox.options.length; i++) {\n            NbSelect++;\n            if (NbSelect > 1) {\n                columnsList += ', ';\n                valDis += ',';\n                editDis += ',';\n            }\n            columnsList += myListBox.options[i].value;\n            valDis += '\\'[value-' + NbSelect + ']\\'';\n            editDis += myListBox.options[i].value + '=\\'[value-' + NbSelect + ']\\'';\n        }\n        if (queryType === 'selectall') {\n            query = 'SELECT * FROM `' + table + '` WHERE 1';\n        } else if (queryType === 'select') {\n            query = 'SELECT ' + columnsList + ' FROM `' + table + '` WHERE 1';\n        } else if (queryType === 'insert') {\n            query = 'INSERT INTO `' + table + '`(' + columnsList + ') VALUES (' + valDis + ')';\n        } else if (queryType === 'update') {\n            query = 'UPDATE `' + table + '` SET ' + editDis + ' WHERE 1';\n        } else if (queryType === 'delete') {\n            query = 'DELETE FROM `' + table + '` WHERE 0';\n        }\n        Functions.setQuery(query);\n        sqlBoxLocked = false;\n    }\n};\n\n/**\n  * Inserts multiple fields.\n  *\n  */\nFunctions.insertValueQuery = function () {\n    var myQuery = document.sqlform.sql_query;\n    var myListBox = document.sqlform.dummy;\n\n    if (myListBox.options.length > 0) {\n        sqlBoxLocked = true;\n        var columnsList = '';\n        var NbSelect = 0;\n        for (var i = 0; i < myListBox.options.length; i++) {\n            if (myListBox.options[i].selected) {\n                NbSelect++;\n                if (NbSelect > 1) {\n                    columnsList += ', ';\n                }\n                columnsList += myListBox.options[i].value;\n            }\n        }\n\n        /* CodeMirror support */\n        if (codeMirrorEditor) {\n            codeMirrorEditor.replaceSelection(columnsList);\n            codeMirrorEditor.focus();\n        // IE support\n        } else if (document.selection) {\n            myQuery.focus();\n            var sel = document.selection.createRange();\n            sel.text = columnsList;\n        // MOZILLA/NETSCAPE support\n        } else if (document.sqlform.sql_query.selectionStart || document.sqlform.sql_query.selectionStart === '0') {\n            var startPos = document.sqlform.sql_query.selectionStart;\n            var endPos = document.sqlform.sql_query.selectionEnd;\n            var SqlString = document.sqlform.sql_query.value;\n\n            myQuery.value = SqlString.substring(0, startPos) + columnsList + SqlString.substring(endPos, SqlString.length);\n            myQuery.focus();\n        } else {\n            myQuery.value += columnsList;\n        }\n\n        // eslint-disable-next-line no-unused-vars\n        sqlBoxLocked = false;\n    }\n};\n\n/**\n * Updates the input fields for the parameters based on the query\n */\nFunctions.updateQueryParameters = function () {\n    if ($('#parameterized').is(':checked')) {\n        var query = codeMirrorEditor ? codeMirrorEditor.getValue() : $('#sqlquery').val();\n\n        var allParameters = query.match(/:[a-zA-Z0-9_]+/g);\n        var parameters = [];\n        // get unique parameters\n        if (allParameters) {\n            $.each(allParameters, function (i, parameter) {\n                if ($.inArray(parameter, parameters) === -1) {\n                    parameters.push(parameter);\n                }\n            });\n        } else {\n            $('#parametersDiv').text(Messages.strNoParam);\n            return;\n        }\n\n        var $temp = $('<div></div>');\n        $temp.append($('#parametersDiv').children());\n        $('#parametersDiv').empty();\n\n        $.each(parameters, function (i, parameter) {\n            var paramName = parameter.substring(1);\n            var $param = $temp.find('#paramSpan_' + paramName);\n            if (! $param.length) {\n                $param = $('<span class=\"parameter\" id=\"paramSpan_' + paramName + '\"></span>');\n                $('<label for=\"param_' + paramName + '\"></label>').text(parameter).appendTo($param);\n                $('<input type=\"text\" name=\"parameters[' + parameter + ']\" id=\"param_' + paramName + '\">').appendTo($param);\n            }\n            $('#parametersDiv').append($param);\n        });\n    } else {\n        $('#parametersDiv').empty();\n    }\n};\n\n/**\n * Get checkbox for foreign key checks\n *\n * @return {string}\n */\nFunctions.getForeignKeyCheckboxLoader = function () {\n    var html = '';\n    html    += '<div>';\n    html    += '<div class=\"load-default-fk-check-value\">';\n    html    += Functions.getImage('ajax_clock_small');\n    html    += '</div>';\n    html    += '</div>';\n    return html;\n};\n\nFunctions.loadForeignKeyCheckbox = function () {\n    // Load default foreign key check value\n    var params = {\n        'ajax_request': true,\n        'server': CommonParams.get('server'),\n    };\n    $.get('index.php?route=/sql/get-default-fk-check-value', params, function (data) {\n        var html = '<input type=\"hidden\" name=\"fk_checks\" value=\"0\">' +\n            '<input type=\"checkbox\" name=\"fk_checks\" id=\"fk_checks\"' +\n            (data.default_fk_check_value ? ' checked=\"checked\"' : '') + '>' +\n            '<label for=\"fk_checks\">' + Messages.strForeignKeyCheck + '</label>';\n        $('.load-default-fk-check-value').replaceWith(html);\n    });\n};\n\nFunctions.getJsConfirmCommonParam = function (elem, parameters) {\n    var $elem = $(elem);\n    var params = parameters;\n    var sep = CommonParams.get('arg_separator');\n    if (params) {\n        // Strip possible leading ?\n        if (params.startsWith('?')) {\n            params = params.substring(1);\n        }\n        params += sep;\n    } else {\n        params = '';\n    }\n    params += 'is_js_confirmed=1' + sep + 'ajax_request=true' + sep + 'fk_checks=' + ($elem.find('#fk_checks').is(':checked') ? 1 : 0);\n    return params;\n};\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('functions.js', function () {\n    $(document).off('click', 'a.inline_edit_sql');\n    $(document).off('click', 'input#sql_query_edit_save');\n    $(document).off('click', 'input#sql_query_edit_discard');\n    $('input.sqlbutton').off('click');\n    if (codeMirrorEditor) {\n        codeMirrorEditor.off('blur');\n    } else {\n        $(document).off('blur', '#sqlquery');\n    }\n    $(document).off('change', '#parameterized');\n    $(document).off('click', 'input.sqlbutton');\n    $('#sqlquery').off('keydown');\n    $('#sql_query_edit').off('keydown');\n\n    if (codeMirrorInlineEditor) {\n        // Copy the sql query to the text area to preserve it.\n        $('#sql_query_edit').text(codeMirrorInlineEditor.getValue());\n        $(codeMirrorInlineEditor.getWrapperElement()).off('keydown');\n        codeMirrorInlineEditor.toTextArea();\n        codeMirrorInlineEditor = false;\n    }\n    if (codeMirrorEditor) {\n        $(codeMirrorEditor.getWrapperElement()).off('keydown');\n    }\n});\n\n/**\n * Jquery Coding for inline editing SQL_QUERY\n */\nAJAX.registerOnload('functions.js', function () {\n    // If we are coming back to the page by clicking forward button\n    // of the browser, bind the code mirror to inline query editor.\n    Functions.bindCodeMirrorToInlineEditor();\n    $(document).on('click', 'a.inline_edit_sql', function () {\n        if ($('#sql_query_edit').length) {\n            // An inline query editor is already open,\n            // we don't want another copy of it\n            return false;\n        }\n\n        var $form = $(this).prev('form');\n        var sqlQuery  = $form.find('input[name=\\'sql_query\\']').val().trim();\n        var $innerSql = $(this).parent().prev().find('code.sql');\n\n        var newContent = '<textarea name=\"sql_query_edit\" id=\"sql_query_edit\">' + Functions.escapeHtml(sqlQuery) + '</textarea>\\n';\n        newContent    += Functions.getForeignKeyCheckboxLoader();\n        newContent    += '<input type=\"submit\" id=\"sql_query_edit_save\" class=\"btn btn-secondary button btnSave\" value=\"' + Messages.strGo + '\">\\n';\n        newContent    += '<input type=\"button\" id=\"sql_query_edit_discard\" class=\"btn btn-secondary button btnDiscard\" value=\"' + Messages.strCancel + '\">\\n';\n        var $editorArea = $('div#inline_editor');\n        if ($editorArea.length === 0) {\n            $editorArea = $('<div id=\"inline_editor_outer\"></div>');\n            $editorArea.insertBefore($innerSql);\n        }\n        $editorArea.html(newContent);\n        Functions.loadForeignKeyCheckbox();\n        $innerSql.hide();\n\n        Functions.bindCodeMirrorToInlineEditor();\n        return false;\n    });\n\n    $(document).on('click', 'input#sql_query_edit_save', function () {\n        // hide already existing success message\n        var sqlQuery;\n        if (codeMirrorInlineEditor) {\n            codeMirrorInlineEditor.save();\n            sqlQuery = codeMirrorInlineEditor.getValue();\n        } else {\n            sqlQuery = $(this).parent().find('#sql_query_edit').val();\n        }\n        var fkCheck = $(this).parent().find('#fk_checks').is(':checked');\n\n        var $form = $('a.inline_edit_sql').prev('form');\n        var $fakeForm = $('<form>', { action: 'index.php?route=/import', method: 'post' })\n            .append($form.find('input[name=server], input[name=db], input[name=table], input[name=token]').clone())\n            .append($('<input>', { type: 'hidden', name: 'show_query', value: 1 }))\n            .append($('<input>', { type: 'hidden', name: 'is_js_confirmed', value: 0 }))\n            .append($('<input>', { type: 'hidden', name: 'sql_query', value: sqlQuery }))\n            .append($('<input>', { type: 'hidden', name: 'fk_checks', value: fkCheck ? 1 : 0 }));\n        if (! Functions.checkSqlQuery($fakeForm[0])) {\n            return false;\n        }\n        $('.alert-success').hide();\n        $fakeForm.appendTo($('body')).trigger('submit');\n    });\n\n    $(document).on('click', 'input#sql_query_edit_discard', function () {\n        var $divEditor = $('div#inline_editor_outer');\n        $divEditor.siblings('code.sql').show();\n        $divEditor.remove();\n    });\n\n    $(document).on('click', 'input.sqlbutton', function (evt) {\n        Functions.insertQuery(evt.target.id);\n        Functions.handleSimulateQueryButton();\n        return false;\n    });\n\n    $(document).on('change', '#parameterized', Functions.updateQueryParameters);\n\n    var $inputUsername = $('#input_username');\n    if ($inputUsername) {\n        if ($inputUsername.val() === '') {\n            $inputUsername.trigger('focus');\n        } else {\n            $('#input_password').trigger('focus');\n        }\n    }\n});\n\n/**\n * \"inputRead\" event handler for CodeMirror SQL query editors for autocompletion\n * @param instance\n */\nFunctions.codeMirrorAutoCompleteOnInputRead = function (instance) {\n    if (!sqlAutoCompleteInProgress\n        && (!instance.options.hintOptions.tables || !sqlAutoComplete)) {\n        if (!sqlAutoComplete) {\n            // Reset after teardown\n            instance.options.hintOptions.tables = false;\n            instance.options.hintOptions.defaultTable = '';\n\n            sqlAutoCompleteInProgress = true;\n\n            var params = {\n                'ajax_request': true,\n                'server': CommonParams.get('server'),\n                'db': CommonParams.get('db'),\n                'no_debug': true\n            };\n\n            var columnHintRender = function (elem, self, data) {\n                $('<div class=\"autocomplete-column-name\">')\n                    .text(data.columnName)\n                    .appendTo(elem);\n                $('<div class=\"autocomplete-column-hint\">')\n                    .text(data.columnHint)\n                    .appendTo(elem);\n            };\n\n            $.ajax({\n                type: 'POST',\n                url: 'index.php?route=/database/sql/autocomplete',\n                data: params,\n                success: function (data) {\n                    if (data.success) {\n                        var tables = JSON.parse(data.tables);\n                        sqlAutoCompleteDefaultTable = CommonParams.get('table');\n                        sqlAutoComplete = [];\n                        for (var table in tables) {\n                            if (tables.hasOwnProperty(table)) {\n                                var columns = tables[table];\n                                table = {\n                                    text: table,\n                                    columns: []\n                                };\n                                for (var column in columns) {\n                                    if (columns.hasOwnProperty(column)) {\n                                        var displayText = columns[column].Type;\n                                        if (columns[column].Key === 'PRI') {\n                                            displayText += ' | Primary';\n                                        } else if (columns[column].Key === 'UNI') {\n                                            displayText += ' | Unique';\n                                        }\n                                        table.columns.push({\n                                            text: column,\n                                            displayText: column + ' | ' +  displayText,\n                                            columnName: column,\n                                            columnHint: displayText,\n                                            render: columnHintRender\n                                        });\n                                    }\n                                }\n                            }\n                            sqlAutoComplete.push(table);\n                        }\n                        instance.options.hintOptions.tables = sqlAutoComplete;\n                        instance.options.hintOptions.defaultTable = sqlAutoCompleteDefaultTable;\n                    }\n                },\n                complete: function () {\n                    sqlAutoCompleteInProgress = false;\n                }\n            });\n        } else {\n            instance.options.hintOptions.tables = sqlAutoComplete;\n            instance.options.hintOptions.defaultTable = sqlAutoCompleteDefaultTable;\n        }\n    }\n    if (instance.state.completionActive) {\n        return;\n    }\n    var cur = instance.getCursor();\n    var token = instance.getTokenAt(cur);\n    var string = '';\n    if (token.string.match(/^[.`\\w@]\\w*$/)) {\n        string = token.string;\n    }\n    if (string.length > 0) {\n        CodeMirror.commands.autocomplete(instance);\n    }\n};\n\n/**\n * Remove autocomplete information before tearing down a page\n */\nAJAX.registerTeardown('functions.js', function () {\n    sqlAutoComplete = false;\n    sqlAutoCompleteDefaultTable = '';\n});\n\n/**\n * Binds the CodeMirror to the text area used to inline edit a query.\n */\nFunctions.bindCodeMirrorToInlineEditor = function () {\n    var $inlineEditor = $('#sql_query_edit');\n    if ($inlineEditor.length > 0) {\n        if (typeof CodeMirror !== 'undefined') {\n            var height = $inlineEditor.css('height');\n            codeMirrorInlineEditor = Functions.getSqlEditor($inlineEditor);\n            codeMirrorInlineEditor.getWrapperElement().style.height = height;\n            codeMirrorInlineEditor.refresh();\n            codeMirrorInlineEditor.focus();\n            $(codeMirrorInlineEditor.getWrapperElement())\n                .on('keydown', Functions.catchKeypressesFromSqlInlineEdit);\n        } else {\n            $inlineEditor\n                .trigger('focus')\n                .on('keydown', Functions.catchKeypressesFromSqlInlineEdit);\n        }\n    }\n};\n\nFunctions.catchKeypressesFromSqlInlineEdit = function (event) {\n    // ctrl-enter is 10 in chrome and ie, but 13 in ff\n    if ((event.ctrlKey || event.metaKey) && (event.keyCode === 13 || event.keyCode === 10)) {\n        $('#sql_query_edit_save').trigger('click');\n    }\n};\n\n/**\n * Adds doc link to single highlighted SQL element\n *\n * @param $elm\n * @param params\n */\nFunctions.documentationAdd = function ($elm, params) {\n    if (typeof mysqlDocTemplate === 'undefined') {\n        return;\n    }\n\n    var url = Functions.sprintf(\n        decodeURIComponent(mysqlDocTemplate),\n        params[0]\n    );\n    if (params.length > 1) {\n        // The # needs to be escaped to be part of the destination URL\n        url += encodeURIComponent('#') + params[1];\n    }\n    var content = $elm.text();\n    $elm.text('');\n    $elm.append('<a target=\"mysql_doc\" class=\"cm-sql-doc\" href=\"' + url + '\">' + content + '</a>');\n};\n\n/**\n * Generates doc links for keywords inside highlighted SQL\n *\n * @param idx\n * @param elm\n */\nFunctions.documentationKeyword = function (idx, elm) {\n    var $elm = $(elm);\n    /* Skip already processed ones */\n    if ($elm.find('a').length > 0) {\n        return;\n    }\n    var keyword = $elm.text().toUpperCase();\n    var $next = $elm.next('.cm-keyword');\n    if ($next) {\n        var nextKeyword = $next.text().toUpperCase();\n        var full = keyword + ' ' + nextKeyword;\n\n        var $next2 = $next.next('.cm-keyword');\n        if ($next2) {\n            var next2Keyword = $next2.text().toUpperCase();\n            var full2 = full + ' ' + next2Keyword;\n            if (full2 in mysqlDocKeyword) {\n                Functions.documentationAdd($elm, mysqlDocKeyword[full2]);\n                Functions.documentationAdd($next, mysqlDocKeyword[full2]);\n                Functions.documentationAdd($next2, mysqlDocKeyword[full2]);\n                return;\n            }\n        }\n        if (full in mysqlDocKeyword) {\n            Functions.documentationAdd($elm, mysqlDocKeyword[full]);\n            Functions.documentationAdd($next, mysqlDocKeyword[full]);\n            return;\n        }\n    }\n    if (keyword in mysqlDocKeyword) {\n        Functions.documentationAdd($elm, mysqlDocKeyword[keyword]);\n    }\n};\n\n/**\n * Generates doc links for builtins inside highlighted SQL\n *\n * @param idx\n * @param elm\n */\nFunctions.documentationBuiltin = function (idx, elm) {\n    var $elm = $(elm);\n    var builtin = $elm.text().toUpperCase();\n    if (builtin in mysqlDocBuiltin) {\n        Functions.documentationAdd($elm, mysqlDocBuiltin[builtin]);\n    }\n};\n\n/**\n * Higlights SQL using CodeMirror.\n *\n * @param $base\n */\nFunctions.highlightSql = function ($base) {\n    var $elm = $base.find('code.sql');\n    $elm.each(function () {\n        var $sql = $(this);\n        var $pre = $sql.find('pre');\n        /* We only care about visible elements to avoid double processing */\n        if ($pre.is(':visible')) {\n            var $highlight = $('<div class=\"sql-highlight cm-s-default\"></div>');\n            $sql.append($highlight);\n            if (typeof CodeMirror !== 'undefined') {\n                CodeMirror.runMode($sql.text(), 'text/x-mysql', $highlight[0]);\n                $pre.hide();\n                $highlight.find('.cm-keyword').each(Functions.documentationKeyword);\n                $highlight.find('.cm-builtin').each(Functions.documentationBuiltin);\n            }\n        }\n    });\n};\n\n/**\n * Updates an element containing code.\n *\n * @param {JQuery} $base     base element which contains the raw and the\n *                           highlighted code.\n *\n * @param {string} htmlValue code in HTML format, displayed if code cannot be\n *                           highlighted\n *\n * @param {string} rawValue  raw code, used as a parameter for highlighter\n *\n * @return {boolean}        whether content was updated or not\n */\nFunctions.updateCode = function ($base, htmlValue, rawValue) {\n    var $code = $base.find('code');\n    if ($code.length === 0) {\n        return false;\n    }\n\n    // Determines the type of the content and appropriate CodeMirror mode.\n    var type = '';\n    var mode = '';\n    if  ($code.hasClass('json')) {\n        type = 'json';\n        mode = 'application/json';\n    } else if ($code.hasClass('sql')) {\n        type = 'sql';\n        mode = 'text/x-mysql';\n    } else if ($code.hasClass('xml')) {\n        type = 'xml';\n        mode = 'application/xml';\n    } else {\n        return false;\n    }\n\n    // Element used to display unhighlighted code.\n    var $notHighlighted = $('<pre>' + htmlValue + '</pre>');\n\n    // Tries to highlight code using CodeMirror.\n    if (typeof CodeMirror !== 'undefined') {\n        var $highlighted = $('<div class=\"' + type + '-highlight cm-s-default\"></div>');\n        CodeMirror.runMode(rawValue, mode, $highlighted[0]);\n        $notHighlighted.hide();\n        $code.html('').append($notHighlighted, $highlighted[0]);\n    } else {\n        $code.html('').append($notHighlighted);\n    }\n\n    return true;\n};\n\n/**\n * Show a message on the top of the page for an Ajax request\n *\n * Sample usage:\n *\n * 1) var $msg = Functions.ajaxShowMessage();\n * This will show a message that reads \"Loading...\". Such a message will not\n * disappear automatically and cannot be dismissed by the user. To remove this\n * message either the Functions.ajaxRemoveMessage($msg) function must be called or\n * another message must be show with Functions.ajaxShowMessage() function.\n *\n * 2) var $msg = Functions.ajaxShowMessage(Messages.strProcessingRequest);\n * This is a special case. The behaviour is same as above,\n * just with a different message\n *\n * 3) var $msg = Functions.ajaxShowMessage('The operation was successful');\n * This will show a message that will disappear automatically and it can also\n * be dismissed by the user.\n *\n * 4) var $msg = Functions.ajaxShowMessage('Some error', false);\n * This will show a message that will not disappear automatically, but it\n * can be dismissed by the user after they have finished reading it.\n *\n * @param {string} message      string containing the message to be shown.\n *                              optional, defaults to 'Loading...'\n * @param {any} timeout         number of milliseconds for the message to be visible\n *                              optional, defaults to 5000. If set to 'false', the\n *                              notification will never disappear\n * @param {string} type         string to dictate the type of message shown.\n *                              optional, defaults to normal notification.\n *                              If set to 'error', the notification will show message\n *                              with red background.\n *                              If set to 'success', the notification will show with\n *                              a green background.\n * @return {JQuery<Element>}   jQuery Element that holds the message div\n *                              this object can be passed to Functions.ajaxRemoveMessage()\n *                              to remove the notification\n */\nFunctions.ajaxShowMessage = function (message, timeout, type) {\n    var msg = message;\n    var newTimeOut = timeout;\n    /**\n     * @var self_closing Whether the notification will automatically disappear\n     */\n    var selfClosing = true;\n    /**\n     * @var dismissable Whether the user will be able to remove\n     *                  the notification by clicking on it\n     */\n    var dismissable = true;\n    // Handle the case when a empty data.message is passed.\n    // We don't want the empty message\n    if (msg === '') {\n        return true;\n    } else if (! msg) {\n        // If the message is undefined, show the default\n        msg = Messages.strLoading;\n        dismissable = false;\n        selfClosing = false;\n    } else if (msg === Messages.strProcessingRequest) {\n        // This is another case where the message should not disappear\n        dismissable = false;\n        selfClosing = false;\n    }\n    // Figure out whether (or after how long) to remove the notification\n    if (newTimeOut === undefined) {\n        newTimeOut = 5000;\n    } else if (newTimeOut === false) {\n        selfClosing = false;\n    }\n    // Determine type of message, add styling as required\n    if (type === 'error') {\n        msg = '<div class=\"alert alert-danger\" role=\"alert\">' + msg + '</div>';\n    } else if (type === 'success') {\n        msg = '<div class=\"alert alert-success\" role=\"alert\">' + msg + '</div>';\n    }\n    // Create a parent element for the AJAX messages, if necessary\n    if ($('#loading_parent').length === 0) {\n        $('<div id=\"loading_parent\"></div>')\n            .prependTo('#page_content');\n    }\n    // Update message count to create distinct message elements every time\n    ajaxMessageCount++;\n    // Remove all old messages, if any\n    $('span.ajax_notification[id^=ajax_message_num]').remove();\n    /**\n     * @var $retval    a jQuery object containing the reference\n     *                 to the created AJAX message\n     */\n    var $retval = $(\n        '<span class=\"ajax_notification\" id=\"ajax_message_num_' +\n            ajaxMessageCount +\n            '\"></span>'\n    )\n        .hide()\n        .appendTo('#loading_parent')\n        .html(msg)\n        .show();\n    // If the notification is self-closing we should create a callback to remove it\n    if (selfClosing) {\n        $retval\n            .delay(newTimeOut)\n            .fadeOut('medium', function () {\n                if ($(this).is(':data(tooltip)')) {\n                    $(this).uiTooltip('destroy');\n                }\n                // Remove the notification\n                $(this).remove();\n            });\n    }\n    // If the notification is dismissable we need to add the relevant class to it\n    // and add a tooltip so that the users know that it can be removed\n    if (dismissable) {\n        $retval.addClass('dismissable').css('cursor', 'pointer');\n        /**\n         * Add a tooltip to the notification to let the user know that they\n         * can dismiss the ajax notification by clicking on it.\n         */\n        Functions.tooltip(\n            $retval,\n            'span',\n            Messages.strDismiss\n        );\n    }\n    // Hide spinner if this is not a loading message\n    if (msg !== Messages.strLoading) {\n        $retval.css('background-image', 'none');\n    }\n    Functions.highlightSql($retval);\n\n    return $retval;\n};\n\n/**\n * Removes the message shown for an Ajax operation when it's completed\n *\n * @param {JQuery} $thisMessageBox Element that holds the notification\n *\n * @return {void}\n */\nFunctions.ajaxRemoveMessage = function ($thisMessageBox) {\n    if ($thisMessageBox !== undefined && $thisMessageBox instanceof jQuery) {\n        $thisMessageBox\n            .stop(true, true)\n            .fadeOut('medium');\n        if ($thisMessageBox.is(':data(tooltip)')) {\n            $thisMessageBox.uiTooltip('destroy');\n        } else {\n            $thisMessageBox.remove();\n        }\n    }\n};\n\n/**\n * Requests SQL for previewing before executing.\n *\n * @param {JQuery<HTMLElement>} $form Form containing query data\n *\n * @return {void}\n */\nFunctions.previewSql = function ($form) {\n    var formUrl = $form.attr('action');\n    var sep = CommonParams.get('arg_separator');\n    var formData = $form.serialize() +\n        sep + 'do_save_data=1' +\n        sep + 'preview_sql=1' +\n        sep + 'ajax_request=1';\n    var $messageBox = Functions.ajaxShowMessage();\n    $.ajax({\n        type: 'POST',\n        url: formUrl,\n        data: formData,\n        success: function (response) {\n            Functions.ajaxRemoveMessage($messageBox);\n            if (response.success) {\n                $('#previewSqlModal').modal('show');\n                $('#previewSqlModal').find('.modal-body').first().html(response.sql_data);\n                $('#previewSqlModalLabel').first().html(Messages.strPreviewSQL);\n                $('#previewSqlModal').on('shown.bs.modal', function () {\n                    Functions.highlightSql($('#previewSqlModal'));\n                });\n            } else {\n                Functions.ajaxShowMessage(response.message);\n            }\n        },\n        error: function () {\n            Functions.ajaxShowMessage(Messages.strErrorProcessingRequest);\n        }\n    });\n};\n\n/**\n * Callback called when submit/\"OK\" is clicked on sql preview/confirm modal\n *\n * @callback onSubmitCallback\n * @param {string} url The url\n */\n\n/**\n *\n * @param {string}           sqlData  Sql query to preview\n * @param {string}           url      Url to be sent to callback\n * @param {onSubmitCallback} callback On submit callback function\n *\n * @return {void}\n */\nFunctions.confirmPreviewSql = function (sqlData, url, callback) {\n    $('#previewSqlConfirmModal').modal('show');\n    $('#previewSqlConfirmModalLabel').first().html(Messages.strPreviewSQL);\n    $('#previewSqlConfirmCode').first().text(sqlData);\n    $('#previewSqlConfirmModal').on('shown.bs.modal', function () {\n        Functions.highlightSql($('#previewSqlConfirmModal'));\n    });\n    $('#previewSQLConfirmOkButton').on('click', function () {\n        callback(url);\n        $('#previewSqlConfirmModal').modal('hide');\n    });\n};\n\n/**\n * check for reserved keyword column name\n *\n * @param {JQuery} $form Form\n *\n * @return {boolean}\n */\nFunctions.checkReservedWordColumns = function ($form) {\n    var isConfirmed = true;\n    $.ajax({\n        type: 'POST',\n        url: 'index.php?route=/table/structure/reserved-word-check',\n        data: $form.serialize(),\n        success: function (data) {\n            if (typeof data.success !== 'undefined' && data.success === true) {\n                isConfirmed = confirm(data.message);\n            }\n        },\n        async:false\n    });\n    return isConfirmed;\n};\n\n// This event only need to be fired once after the initial page load\n$(function () {\n    /**\n     * Allows the user to dismiss a notification\n     * created with Functions.ajaxShowMessage()\n     */\n    var holdStarter = null;\n    $(document).on('mousedown', 'span.ajax_notification.dismissable', function () {\n        holdStarter = setTimeout(function () {\n            holdStarter = null;\n        }, 250);\n    });\n\n    $(document).on('mouseup', 'span.ajax_notification.dismissable', function (event) {\n        if (holdStarter && event.which === 1) {\n            clearTimeout(holdStarter);\n            Functions.ajaxRemoveMessage($(this));\n        }\n    });\n    /**\n     * The below two functions hide the \"Dismiss notification\" tooltip when a user\n     * is hovering a link or button that is inside an ajax message\n     */\n    $(document).on('mouseover', 'span.ajax_notification a, span.ajax_notification button, span.ajax_notification input', function () {\n        if ($(this).parents('span.ajax_notification').is(':data(tooltip)')) {\n            $(this).parents('span.ajax_notification').uiTooltip('disable');\n        }\n    });\n    $(document).on('mouseout', 'span.ajax_notification a, span.ajax_notification button, span.ajax_notification input', function () {\n        if ($(this).parents('span.ajax_notification').is(':data(tooltip)')) {\n            $(this).parents('span.ajax_notification').uiTooltip('enable');\n        }\n    });\n\n    /**\n     * Copy text to clipboard\n     *\n     * @param {string | number | string[]} text to copy to clipboard\n     *\n     * @return {boolean}\n     */\n    Functions.copyToClipboard = function (text) {\n        var $temp = $('<input>');\n        $temp.css({ 'position': 'fixed', 'width': '2em', 'border': 0, 'top': 0, 'left': 0, 'padding': 0, 'background': 'transparent' });\n        $('body').append($temp);\n        $temp.val(text).trigger('select');\n        try {\n            var res = document.execCommand('copy');\n            $temp.remove();\n            return res;\n        } catch (e) {\n            $temp.remove();\n            return false;\n        }\n    };\n\n    $(document).on('click', 'a.copyQueryBtn', function (event) {\n        event.preventDefault();\n        var res = Functions.copyToClipboard($(this).attr('data-text'));\n        if (res) {\n            $(this).after('<span id=\\'copyStatus\\'> (' + Messages.strCopyQueryButtonSuccess + ')</span>');\n        } else {\n            $(this).after('<span id=\\'copyStatus\\'> (' + Messages.strCopyQueryButtonFailure + ')</span>');\n        }\n        setTimeout(function () {\n            $('#copyStatus').remove();\n        }, 2000);\n    });\n});\n\n/**\n * Hides/shows the \"Open in ENUM/SET editor\" message, depending on the data type of the column currently selected\n *\n * @param selectElement\n */\nFunctions.showNoticeForEnum = function (selectElement) {\n    var enumNoticeId = selectElement.attr('id').split('_')[1];\n    enumNoticeId += '_' + (parseInt(selectElement.attr('id').split('_')[2], 10) + 1);\n    var selectedType = selectElement.val();\n    if (selectedType === 'ENUM' || selectedType === 'SET') {\n        $('p#enum_notice_' + enumNoticeId).show();\n    } else {\n        $('p#enum_notice_' + enumNoticeId).hide();\n    }\n};\n\n/**\n * Hides/shows a warning message when LENGTH is used with inappropriate integer type\n */\nFunctions.showWarningForIntTypes = function () {\n    if ($('div#length_not_allowed').length) {\n        var lengthRestrictions = $('select.column_type option').map(function () {\n            return $(this).filter(':selected').attr('data-length-restricted');\n        }).get();\n\n        var restricationFound = lengthRestrictions.some(restriction => Number(restriction) === 1);\n\n        if (restricationFound) {\n            $('div#length_not_allowed').show();\n        } else {\n            $('div#length_not_allowed').hide();\n        }\n    }\n};\n\n/**\n * Creates a Profiling Chart. Used in sql.js\n * and in server/status/monitor.js\n *\n * @param target\n * @param data\n *\n * @return {object}\n */\nFunctions.createProfilingChart = function (target, data) {\n    // create the chart\n    var factory = new JQPlotChartFactory();\n    var chart = factory.createChart(ChartType.PIE, target);\n\n    // create the data table and add columns\n    var dataTable = new DataTable();\n    dataTable.addColumn(ColumnType.STRING, '');\n    dataTable.addColumn(ColumnType.NUMBER, '');\n    dataTable.setData(data);\n\n    var windowWidth = $(window).width();\n    var location = 's';\n    if (windowWidth > 768) {\n        location = 'se';\n    }\n\n    // draw the chart and return the chart object\n    chart.draw(dataTable, {\n        seriesDefaults: {\n            rendererOptions: {\n                showDataLabels:  true\n            }\n        },\n        highlighter: {\n            tooltipLocation: 'se',\n            sizeAdjust: 0,\n            tooltipAxes: 'pieref',\n            formatString: '%s, %.9Ps'\n        },\n        legend: {\n            show: true,\n            location: location,\n            rendererOptions: {\n                numberColumns: 2\n            }\n        },\n        // from https://web.archive.org/web/20190321233412/http://tango.freedesktop.org/Tango_Icon_Theme_Guidelines\n        seriesColors: [\n            '#fce94f',\n            '#fcaf3e',\n            '#e9b96e',\n            '#8ae234',\n            '#729fcf',\n            '#ad7fa8',\n            '#ef2929',\n            '#888a85',\n            '#c4a000',\n            '#ce5c00',\n            '#8f5902',\n            '#4e9a06',\n            '#204a87',\n            '#5c3566',\n            '#a40000',\n            '#babdb6',\n            '#2e3436'\n        ]\n    });\n    return chart;\n};\n\n/**\n * Formats a profiling duration nicely (in us and ms time).\n * Used in server/status/monitor.js\n *\n * @param {number} number   Number to be formatted, should be in the range of microsecond to second\n * @param {number} accuracy Accuracy, how many numbers right to the comma should be\n * @return {string}        The formatted number\n */\nFunctions.prettyProfilingNum = function (number, accuracy) {\n    var num = number;\n    var acc = accuracy;\n    if (!acc) {\n        acc = 2;\n    }\n    acc = Math.pow(10, acc);\n    if (num * 1000 < 0.1) {\n        num = Math.round(acc * (num * 1000 * 1000)) / acc + '';\n    } else if (num < 0.1) {\n        num = Math.round(acc * (num * 1000)) / acc + 'm';\n    } else {\n        num = Math.round(acc * num) / acc;\n    }\n\n    return num + 's';\n};\n\n/**\n * Formats a SQL Query nicely with newlines and indentation. Depends on Codemirror and MySQL Mode!\n *\n * @param {string} string Query to be formatted\n * @return {string}      The formatted query\n */\nFunctions.sqlPrettyPrint = function (string) {\n    if (typeof CodeMirror === 'undefined') {\n        return string;\n    }\n\n    var mode = CodeMirror.getMode({}, 'text/x-mysql');\n    var stream = new CodeMirror.StringStream(string);\n    var state = mode.startState();\n    var token;\n    var tokens = [];\n    var output = '';\n    var tabs = function (cnt) {\n        var ret = '';\n        for (var i = 0; i < 4 * cnt; i++) {\n            ret += ' ';\n        }\n        return ret;\n    };\n\n    // \"root-level\" statements\n    var statements = {\n        'select': ['select', 'from', 'on', 'where', 'having', 'limit', 'order by', 'group by'],\n        'update': ['update', 'set', 'where'],\n        'insert into': ['insert into', 'values']\n    };\n    // don't put spaces before these tokens\n    var spaceExceptionsBefore = { ';': true, ',': true, '.': true, '(': true };\n    // don't put spaces after these tokens\n    var spaceExceptionsAfter = { '.': true };\n\n    // Populate tokens array\n    while (! stream.eol()) {\n        stream.start = stream.pos;\n        token = mode.token(stream, state);\n        if (token !== null) {\n            tokens.push([token, stream.current().toLowerCase()]);\n        }\n    }\n\n    var currentStatement = tokens[0][1];\n\n    if (! statements[currentStatement]) {\n        return string;\n    }\n    // Holds all currently opened code blocks (statement, function or generic)\n    var blockStack = [];\n    // If a new code block is found, newBlock contains its type for one iteration and vice versa for endBlock\n    var newBlock;\n    var endBlock;\n    // How much to indent in the current line\n    var indentLevel = 0;\n    // Holds the \"root-level\" statements\n    var statementPart;\n    var lastStatementPart = statements[currentStatement][0];\n\n    blockStack.unshift('statement');\n\n    // Iterate through every token and format accordingly\n    for (var i = 0; i < tokens.length; i++) {\n        // New block => push to stack\n        if (tokens[i][1] === '(') {\n            if (i < tokens.length - 1 && tokens[i + 1][0] === 'statement-verb') {\n                blockStack.unshift(newBlock = 'statement');\n            } else if (i > 0 && tokens[i - 1][0] === 'builtin') {\n                blockStack.unshift(newBlock = 'function');\n            } else {\n                blockStack.unshift(newBlock = 'generic');\n            }\n        } else {\n            newBlock = null;\n        }\n\n        // Block end => pop from stack\n        if (tokens[i][1] === ')') {\n            endBlock = blockStack[0];\n            blockStack.shift();\n        } else {\n            endBlock = null;\n        }\n\n        // A subquery is starting\n        if (i > 0 && newBlock === 'statement') {\n            indentLevel++;\n            output += '\\n' + tabs(indentLevel) + tokens[i][1] + ' ' + tokens[i + 1][1].toUpperCase() + '\\n' + tabs(indentLevel + 1);\n            currentStatement = tokens[i + 1][1];\n            i++;\n            continue;\n        }\n\n        // A subquery is ending\n        if (endBlock === 'statement' && indentLevel > 0) {\n            output += '\\n' + tabs(indentLevel);\n            indentLevel--;\n        }\n\n        // One less indentation for statement parts (from, where, order by, etc.) and a newline\n        statementPart = statements[currentStatement].indexOf(tokens[i][1]);\n        if (statementPart !== -1) {\n            if (i > 0) {\n                output += '\\n';\n            }\n            output += tabs(indentLevel) + tokens[i][1].toUpperCase();\n            output += '\\n' + tabs(indentLevel + 1);\n            lastStatementPart = tokens[i][1];\n        // Normal indentation and spaces for everything else\n        } else {\n            if (! spaceExceptionsBefore[tokens[i][1]] &&\n               ! (i > 0 && spaceExceptionsAfter[tokens[i - 1][1]]) &&\n               output.charAt(output.length - 1) !== ' ') {\n                output += ' ';\n            }\n            if (tokens[i][0] === 'keyword') {\n                output += tokens[i][1].toUpperCase();\n            } else {\n                output += tokens[i][1];\n            }\n        }\n\n        // split columns in select and 'update set' clauses, but only inside statements blocks\n        if ((lastStatementPart === 'select' || lastStatementPart === 'where'  || lastStatementPart === 'set') &&\n            tokens[i][1] === ',' && blockStack[0] === 'statement') {\n            output += '\\n' + tabs(indentLevel + 1);\n        }\n\n        // split conditions in where clauses, but only inside statements blocks\n        if (lastStatementPart === 'where' &&\n            (tokens[i][1] === 'and' || tokens[i][1] === 'or' || tokens[i][1] === 'xor')) {\n            if (blockStack[0] === 'statement') {\n                output += '\\n' + tabs(indentLevel + 1);\n            }\n            // Todo: Also split and or blocks in newlines & indentation++\n            // if (blockStack[0] === 'generic')\n            //   output += ...\n        }\n    }\n    return output;\n};\n\n/**\n * jQuery function that uses jQueryUI's dialogs to confirm with user. Does not\n * return a jQuery object yet and hence cannot be chained\n *\n * @param {string}   question\n * @param {string}   url          URL to be passed to the callbackFn to make\n *                                an Ajax call to\n * @param {Function} callbackFn   callback to execute after user clicks on OK\n * @param {Function} openCallback optional callback to run when dialog is shown\n *\n * @return {bool}\n */\nFunctions.confirm = function (question, url, callbackFn, openCallback) {\n    var confirmState = CommonParams.get('confirm');\n    if (! confirmState) {\n        // user does not want to confirm\n        if (typeof callbackFn === 'function') {\n            callbackFn.call(this, url);\n            return true;\n        }\n    }\n    if (Messages.strDoYouReally === '') {\n        return true;\n    }\n\n    $('#functionConfirmModal').modal('show');\n    $('#functionConfirmModal').find('.modal-body').first().html(question);\n    $('#functionConfirmOkButton').on('click', function () {\n        if (typeof callbackFn === 'function') {\n            callbackFn.call(this, url);\n        }\n    });\n    if (typeof openCallback === 'function') {\n        openCallback();\n    }\n};\njQuery.fn.confirm = Functions.confirm;\n\n/**\n * jQuery function to sort a table's body after a new row has been appended to it.\n *\n * @param {string} textSelector string to select the sortKey's text\n *\n * @return {JQuery<HTMLElement>} for chaining purposes\n */\nFunctions.sortTable = function (textSelector) {\n    return this.each(function () {\n        /**\n         * @var table_body  Object referring to the table's <tbody> element\n         */\n        var tableBody = $(this);\n        /**\n         * @var rows    Object referring to the collection of rows in {@link tableBody}\n         */\n        var rows = $(this).find('tr').get();\n\n        // get the text of the field that we will sort by\n        $.each(rows, function (index, row) {\n            row.sortKey = $(row).find(textSelector).text().toLowerCase().trim();\n        });\n\n        // get the sorted order\n        rows.sort(function (a, b) {\n            if (a.sortKey < b.sortKey) {\n                return -1;\n            }\n            if (a.sortKey > b.sortKey) {\n                return 1;\n            }\n            return 0;\n        });\n\n        // pull out each row from the table and then append it according to it's order\n        $.each(rows, function (index, row) {\n            $(tableBody).append(row);\n            row.sortKey = null;\n        });\n    });\n};\njQuery.fn.sortTable = Functions.sortTable;\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('functions.js', function () {\n    $(document).off('submit', 'form.create_table_form.ajax');\n    $(document).off('click', 'form.create_table_form.ajax input[name=submit_num_fields]');\n    $(document).off('keyup', 'form.create_table_form.ajax input');\n    $(document).off('change', 'input[name=partition_count],input[name=subpartition_count],select[name=partition_by]');\n});\n\n/**\n * jQuery coding for 'Create Table'. Used on /database/operations,\n * /database/structure and /database/tracking (i.e., wherever\n * PhpMyAdmin\\Display\\CreateTable is used)\n *\n * Attach Ajax Event handlers for Create Table\n */\nAJAX.registerOnload('functions.js', function () {\n    /**\n     * Attach event handler for submission of create table form (save)\n     */\n    $(document).on('submit', 'form.create_table_form.ajax', function (event) {\n        event.preventDefault();\n\n        /**\n         * @var    the_form    object referring to the create table form\n         */\n        var $form = $(this);\n\n        /*\n         * First validate the form; if there is a problem, avoid submitting it\n         *\n         * Functions.checkTableEditForm() needs a pure element and not a jQuery object,\n         * this is why we pass $form[0] as a parameter (the jQuery object\n         * is actually an array of DOM elements)\n         */\n\n        if (Functions.checkTableEditForm($form[0], $form.find('input[name=orig_num_fields]').val())) {\n            Functions.prepareForAjaxRequest($form);\n            if (Functions.checkReservedWordColumns($form)) {\n                Functions.ajaxShowMessage(Messages.strProcessingRequest);\n                // User wants to submit the form\n                $.post($form.attr('action'), $form.serialize() + CommonParams.get('arg_separator') + 'do_save_data=1', function (data) {\n                    if (typeof data !== 'undefined' && data.success === true) {\n                        $('#properties_message')\n                            .removeClass('alert-danger')\n                            .html('');\n                        Functions.ajaxShowMessage(data.message);\n                        // Only if the create table dialog (distinct panel) exists\n                        var $createTableDialog = $('#create_table_dialog');\n                        if ($createTableDialog.length > 0) {\n                            $createTableDialog.dialog('close').remove();\n                        }\n                        $('#tableslistcontainer').before(data.formatted_sql);\n\n                        /**\n                         * @var tables_table    Object referring to the <tbody> element that holds the list of tables\n                         */\n                        var tablesTable = $('#tablesForm').find('tbody').not('#tbl_summary_row');\n                        // this is the first table created in this db\n                        if (tablesTable.length === 0) {\n                            CommonActions.refreshMain(\n                                CommonParams.get('opendb_url')\n                            );\n                        } else {\n                            /**\n                             * @var curr_last_row   Object referring to the last <tr> element in {@link tablesTable}\n                             */\n                            var currLastRow = $(tablesTable).find('tr').last();\n                            /**\n                             * @var curr_last_row_index_string   String containing the index of {@link currLastRow}\n                             */\n                            var currLastRowIndexString = $(currLastRow).find('input:checkbox').attr('id').match(/\\d+/)[0];\n                            /**\n                             * @var curr_last_row_index Index of {@link currLastRow}\n                             */\n                            var currLastRowIndex = parseFloat(currLastRowIndexString);\n                            /**\n                             * @var new_last_row_index   Index of the new row to be appended to {@link tablesTable}\n                             */\n                            var newLastRowIndex = currLastRowIndex + 1;\n                            /**\n                             * @var new_last_row_id String containing the id of the row to be appended to {@link tablesTable}\n                             */\n                            var newLastRowId = 'checkbox_tbl_' + newLastRowIndex;\n\n                            data.newTableString = data.newTableString.replace(/checkbox_tbl_/, newLastRowId);\n                            // append to table\n                            $(data.newTableString)\n                                .appendTo(tablesTable);\n\n                            // Sort the table\n                            $(tablesTable).sortTable('th');\n\n                            // Adjust summary row\n                            DatabaseStructure.adjustTotals();\n                        }\n\n                        // Refresh navigation as a new table has been added\n                        Navigation.reload();\n                        // Redirect to table structure page on creation of new table\n                        var argsep = CommonParams.get('arg_separator');\n                        var params12 = 'ajax_request=true' + argsep + 'ajax_page_request=true';\n                        var tableStructureUrl = 'index.php?route=/table/structure' + argsep + 'server=' + data.params.server +\n                            argsep + 'db=' + data.params.db + argsep + 'token=' + data.params.token +\n                            argsep + 'goto=' + encodeURIComponent('index.php?route=/database/structure') + argsep + 'table=' + data.params.table + '';\n                        $.get(tableStructureUrl, params12, AJAX.responseHandler);\n                    } else {\n                        Functions.ajaxShowMessage(\n                            '<div class=\"alert alert-danger\" role=\"alert\">' + data.error + '</div>',\n                            false\n                        );\n                    }\n                }); // end $.post()\n            }\n        }\n    }); // end create table form (save)\n\n    /**\n     * Submits the intermediate changes in the table creation form\n     * to refresh the UI accordingly\n     *\n     * @param actionParam\n     */\n    function submitChangesInCreateTableForm (actionParam) {\n        /**\n         * @var    the_form    object referring to the create table form\n         */\n        var $form = $('form.create_table_form.ajax');\n\n        var $msgbox = Functions.ajaxShowMessage(Messages.strProcessingRequest);\n        Functions.prepareForAjaxRequest($form);\n\n        // User wants to add more fields to the table\n        $.post($form.attr('action'), $form.serialize() + '&' + actionParam, function (data) {\n            if (typeof data !== 'undefined' && data.success) {\n                var $pageContent = $('#page_content');\n                $pageContent.html(data.message);\n                Functions.highlightSql($pageContent);\n                Functions.verifyColumnsProperties();\n                Functions.hideShowConnection($('.create_table_form select[name=tbl_storage_engine]'));\n                Functions.ajaxRemoveMessage($msgbox);\n            } else {\n                Functions.ajaxShowMessage(data.error);\n            }\n        }); // end $.post()\n    }\n\n    /**\n     * Attach event handler for create table form (add fields)\n     */\n    $(document).on('click', 'form.create_table_form.ajax input[name=submit_num_fields]', function (event) {\n        event.preventDefault();\n        submitChangesInCreateTableForm('submit_num_fields=1');\n    }); // end create table form (add fields)\n\n    $(document).on('keydown', 'form.create_table_form.ajax input[name=added_fields]', function (event) {\n        if (event.keyCode === 13) {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            $(this)\n                .closest('form')\n                .find('input[name=submit_num_fields]')\n                .trigger('click');\n        }\n    });\n\n    /**\n     * Attach event handler to manage changes in number of partitions and subpartitions\n     */\n    $(document).on('change', 'input[name=partition_count],input[name=subpartition_count],select[name=partition_by]', function () {\n        var $this = $(this);\n        var $form = $this.parents('form');\n        if ($form.is('.create_table_form.ajax')) {\n            submitChangesInCreateTableForm('submit_partition_change=1');\n        } else {\n            $form.trigger('submit');\n        }\n    });\n\n    $(document).on('change', 'input[value=AUTO_INCREMENT]', function () {\n        if (this.checked) {\n            var col = /\\d/.exec($(this).attr('name'));\n            col = col[0];\n            var $selectFieldKey = $('select[name=\"field_key[' + col + ']\"]');\n            if ($selectFieldKey.val() === 'none_' + col) {\n                $selectFieldKey.val('primary_' + col).trigger('change', [false]);\n            }\n        }\n    });\n    $('body')\n        .off('click', 'input.preview_sql')\n        .on('click', 'input.preview_sql', function () {\n            var $form = $(this).closest('form');\n            Functions.previewSql($form);\n        });\n});\n\n\n/**\n * Validates the password field in a form\n *\n * @see    Messages.strPasswordEmpty\n * @see    Messages.strPasswordNotSame\n * @param {object} $theForm The form to be validated\n * @return {boolean}\n */\nFunctions.checkPassword = function ($theForm) {\n    // Did the user select 'no password'?\n    if ($theForm.find('#nopass_1').is(':checked')) {\n        return true;\n    } else {\n        var $pred = $theForm.find('#select_pred_password');\n        if ($pred.length && ($pred.val() === 'none' || $pred.val() === 'keep')) {\n            return true;\n        }\n    }\n\n    var $password = $theForm.find('input[name=pma_pw]');\n    var $passwordRepeat = $theForm.find('input[name=pma_pw2]');\n    var alertMessage = false;\n\n    if ($password.val() === '') {\n        alertMessage = Messages.strPasswordEmpty;\n    } else if ($password.val() !== $passwordRepeat.val()) {\n        alertMessage = Messages.strPasswordNotSame;\n    }\n\n    if (alertMessage) {\n        alert(alertMessage);\n        $password.val('');\n        $passwordRepeat.val('');\n        $password.trigger('focus');\n        return false;\n    }\n    return true;\n};\n\n/**\n * Attach Ajax event handlers for 'Change Password' on index.php\n */\nAJAX.registerOnload('functions.js', function () {\n    /* Handler for hostname type */\n    $(document).on('change', '#select_pred_hostname', function () {\n        var hostname = $('#pma_hostname');\n        if (this.value === 'any') {\n            hostname.val('%');\n        } else if (this.value === 'localhost') {\n            hostname.val('localhost');\n        } else if (this.value === 'thishost' && $(this).data('thishost')) {\n            hostname.val($(this).data('thishost'));\n        } else if (this.value === 'hosttable') {\n            hostname.val('').prop('required', false);\n        } else if (this.value === 'userdefined') {\n            hostname.trigger('focus').select().prop('required', true);\n        }\n    });\n\n    /* Handler for editing hostname */\n    $(document).on('change', '#pma_hostname', function () {\n        $('#select_pred_hostname').val('userdefined');\n        $('#pma_hostname').prop('required', true);\n    });\n\n    /* Handler for username type */\n    $(document).on('change', '#select_pred_username', function () {\n        if (this.value === 'any') {\n            $('#pma_username').val('').prop('required', false);\n            $('#user_exists_warning').css('display', 'none');\n        } else if (this.value === 'userdefined') {\n            $('#pma_username').trigger('focus').trigger('select').prop('required', true);\n        }\n    });\n\n    /* Handler for editing username */\n    $(document).on('change', '#pma_username', function () {\n        $('#select_pred_username').val('userdefined');\n        $('#pma_username').prop('required', true);\n    });\n\n    /* Handler for password type */\n    $(document).on('change', '#select_pred_password', function () {\n        if (this.value === 'none') {\n            $('#text_pma_pw2').prop('required', false).val('');\n            $('#text_pma_pw').prop('required', false).val('');\n        } else if (this.value === 'userdefined') {\n            $('#text_pma_pw2').prop('required', true);\n            $('#text_pma_pw').prop('required', true).trigger('focus').trigger('select');\n        } else {\n            $('#text_pma_pw2').prop('required', false);\n            $('#text_pma_pw').prop('required', false);\n        }\n    });\n\n    /* Handler for editing password */\n    $(document).on('change', '#text_pma_pw,#text_pma_pw2', function () {\n        $('#select_pred_password').val('userdefined');\n        $('#text_pma_pw2').prop('required', true);\n        $('#text_pma_pw').prop('required', true);\n    });\n\n    /**\n     * Unbind all event handlers before tearing down a page\n     */\n    $(document).off('click', '#change_password_anchor.ajax');\n\n    /**\n     * Attach Ajax event handler on the change password anchor\n     */\n\n    $(document).on('click', '#change_password_anchor.ajax', function (event) {\n        event.preventDefault();\n\n        var $msgbox = Functions.ajaxShowMessage();\n\n        $('#changePasswordGoButton').on('click', function () {\n            event.preventDefault();\n\n            /**\n             * @var $the_form    Object referring to the change password form\n             */\n            var $theForm = $('#change_password_form');\n\n            if (! Functions.checkPassword($theForm)) {\n                return false;\n            }\n\n            /**\n             * @var {string} thisValue String containing the value of the submit button.\n             * Need to append this for the change password form on Server Privileges\n             * page to work\n             */\n            var thisValue = $(this).val();\n\n            var $msgbox = Functions.ajaxShowMessage(Messages.strProcessingRequest);\n            $theForm.append('<input type=\"hidden\" name=\"ajax_request\" value=\"true\">');\n\n            $.post($theForm.attr('action'), $theForm.serialize() + CommonParams.get('arg_separator') + 'change_pw=' + thisValue, function (data) {\n                if (typeof data === 'undefined' || data.success !== true) {\n                    Functions.ajaxShowMessage(data.error, false);\n                    return;\n                }\n\n                var $pageContent = $('#page_content');\n                $pageContent.prepend(data.message);\n                Functions.highlightSql($pageContent);\n                $('#change_password_dialog').hide().remove();\n                $('#edit_user_dialog').dialog('close').remove();\n                Functions.ajaxRemoveMessage($msgbox);\n            }); // end $.post()\n            $('#changePasswordModal').modal('hide');\n        });\n\n        $.get($(this).attr('href'), { 'ajax_request': true }, function (data) {\n            if (typeof data === 'undefined' || !data.success) {\n                Functions.ajaxShowMessage(data.error, false);\n                return;\n            }\n\n            if (data.scripts) {\n                AJAX.scriptHandler.load(data.scripts);\n            }\n\n            // for this dialog, we remove the fieldset wrapping due to double headings\n            $('#changePasswordModal').modal('show');\n            $('#changePasswordModal').find('.modal-body').first().html(data.message);\n            $('fieldset#fieldset_change_password')\n                .find('legend').remove().end()\n                .find('table.table').unwrap().addClass('m-3')\n                .find('input#text_pma_pw').trigger('focus');\n            $('#fieldset_change_password_footer').hide();\n            Functions.ajaxRemoveMessage($msgbox);\n            Functions.displayPasswordGenerateButton();\n            $('#change_password_form').on('submit', function (e) {\n                e.preventDefault();\n                $(this)\n                    .closest('.ui-dialog')\n                    .find('.ui-dialog-buttonpane .ui-button')\n                    .first()\n                    .trigger('click');\n            });\n        }); // end $.get()\n    }); // end handler for change password anchor\n}); // end $() for Change Password\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('functions.js', function () {\n    $(document).off('change', 'select.column_type');\n    $(document).off('change', 'select.default_type');\n    $(document).off('change', 'select.virtuality');\n    $(document).off('change', 'input.allow_null');\n    $(document).off('change', '.create_table_form select[name=tbl_storage_engine]');\n});\n/**\n * Toggle the hiding/showing of the \"Open in ENUM/SET editor\" message when\n * the page loads and when the selected data type changes\n */\nAJAX.registerOnload('functions.js', function () {\n    // is called here for normal page loads and also when opening\n    // the Create table dialog\n    Functions.verifyColumnsProperties();\n    //\n    // needs on() to work also in the Create Table dialog\n    $(document).on('change', 'select.column_type', function () {\n        Functions.showNoticeForEnum($(this));\n        Functions.showWarningForIntTypes();\n    });\n    $(document).on('change', 'select.default_type', function () {\n        Functions.hideShowDefaultValue($(this));\n    });\n    $(document).on('change', 'select.virtuality', function () {\n        Functions.hideShowExpression($(this));\n    });\n    $(document).on('change', 'input.allow_null', function () {\n        Functions.validateDefaultValue($(this));\n    });\n    $(document).on('change', '.create_table_form select[name=tbl_storage_engine]', function () {\n        Functions.hideShowConnection($(this));\n    });\n});\n\n/**\n * If the chosen storage engine is FEDERATED show connection field. Hide otherwise\n *\n * @param $engineSelector storage engine selector\n */\nFunctions.hideShowConnection = function ($engineSelector) {\n    var $connection = $('.create_table_form input[name=connection]');\n    var $labelTh = $('.create_table_form #storage-engine-connection');\n    if ($engineSelector.val() !== 'FEDERATED') {\n        $connection\n            .prop('disabled', true)\n            .parent('td').hide();\n        $labelTh.hide();\n    } else {\n        $connection\n            .prop('disabled', false)\n            .parent('td').show();\n        $labelTh.show();\n    }\n};\n\n/**\n * If the column does not allow NULL values, makes sure that default is not NULL\n *\n * @param $nullCheckbox\n */\nFunctions.validateDefaultValue = function ($nullCheckbox) {\n    if (! $nullCheckbox.prop('checked')) {\n        var $default = $nullCheckbox.closest('tr').find('.default_type');\n        if ($default.val() === 'NULL') {\n            $default.val('NONE');\n        }\n    }\n};\n\n/**\n * function to populate the input fields on picking a column from central list\n *\n * @param {string} inputId input id of the name field for the column to be populated\n * @param {number} offset of the selected column in central list of columns\n */\nFunctions.autoPopulate = function (inputId, offset) {\n    var db = CommonParams.get('db');\n    var table = CommonParams.get('table');\n    var newInputId = inputId.substring(0, inputId.length - 1);\n    $('#' + newInputId + '1').val(centralColumnList[db + '_' + table][offset].col_name);\n    var colType = centralColumnList[db + '_' + table][offset].col_type.toUpperCase();\n    $('#' + newInputId + '2').val(colType);\n    var $input3 = $('#' + newInputId + '3');\n    $input3.val(centralColumnList[db + '_' + table][offset].col_length);\n    if (colType === 'ENUM' || colType === 'SET') {\n        $input3.next().show();\n    } else {\n        $input3.next().hide();\n    }\n    var colDefault = centralColumnList[db + '_' + table][offset].col_default.toUpperCase();\n    var $input4 = $('#' + newInputId + '4');\n    if (colDefault !== '' && colDefault !== 'NULL' && colDefault !== 'CURRENT_TIMESTAMP' && colDefault !== 'CURRENT_TIMESTAMP()') {\n        $input4.val('USER_DEFINED');\n        $input4.next().next().show();\n        $input4.next().next().val(centralColumnList[db + '_' + table][offset].col_default);\n    } else {\n        $input4.val(centralColumnList[db + '_' + table][offset].col_default);\n        $input4.next().next().hide();\n    }\n    $('#' + newInputId + '5').val(centralColumnList[db + '_' + table][offset].col_collation);\n    var $input6 = $('#' + newInputId + '6');\n    $input6.val(centralColumnList[db + '_' + table][offset].col_attribute);\n    if (centralColumnList[db + '_' + table][offset].col_extra === 'on update CURRENT_TIMESTAMP') {\n        $input6.val(centralColumnList[db + '_' + table][offset].col_extra);\n    }\n    if (centralColumnList[db + '_' + table][offset].col_extra.toUpperCase() === 'AUTO_INCREMENT') {\n        $('#' + newInputId + '9').prop('checked',true).trigger('change');\n    } else {\n        $('#' + newInputId + '9').prop('checked',false);\n    }\n    if (centralColumnList[db + '_' + table][offset].col_isNull !== '0') {\n        $('#' + newInputId + '7').prop('checked',true);\n    } else {\n        $('#' + newInputId + '7').prop('checked',false);\n    }\n};\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('functions.js', function () {\n    $(document).off('click', 'a.open_enum_editor');\n    $(document).off('click', 'input.add_value');\n    $(document).off('click', '#enum_editor td.drop');\n    $(document).off('click', 'a.central_columns_dialog');\n});\n\n/**\n * Opens the ENUM/SET editor and controls its functions\n */\nAJAX.registerOnload('functions.js', function () {\n    $(document).on('click', 'a.open_enum_editor', function () {\n        // Get the name of the column that is being edited\n        var colname = $(this).closest('tr').find('input').first().val();\n        var title;\n        var i;\n        // And use it to make up a title for the page\n        if (colname.length < 1) {\n            title = Messages.enum_newColumnVals;\n        } else {\n            title = Messages.enum_columnVals.replace(\n                /%s/,\n                '\"' + Functions.escapeHtml(decodeURIComponent(colname)) + '\"'\n            );\n        }\n        // Get the values as a string\n        var inputstring = $(this)\n            .closest('td')\n            .find('input')\n            .val();\n        // Escape html entities\n        inputstring = $('<div></div>')\n            .text(inputstring)\n            .html();\n        // Parse the values, escaping quotes and\n        // slashes on the fly, into an array\n        var values = [];\n        var inString = false;\n        var curr;\n        var next;\n        var buffer = '';\n        for (i = 0; i < inputstring.length; i++) {\n            curr = inputstring.charAt(i);\n            next = i === inputstring.length ? '' : inputstring.charAt(i + 1);\n            if (! inString && curr === '\\'') {\n                inString = true;\n            } else if (inString && curr === '\\\\' && next === '\\\\') {\n                buffer += '&#92;';\n                i++;\n            } else if (inString && next === '\\'' && (curr === '\\'' || curr === '\\\\')) {\n                buffer += '&#39;';\n                i++;\n            } else if (inString && curr === '\\'') {\n                inString = false;\n                values.push(buffer);\n                buffer = '';\n            } else if (inString) {\n                buffer += curr;\n            }\n        }\n        if (buffer.length > 0) {\n            // The leftovers in the buffer are the last value (if any)\n            values.push(buffer);\n        }\n        var fields = '';\n        // If there are no values, maybe the user is about to make a\n        // new list so we add a few for them to get started with.\n        if (values.length === 0) {\n            values.push('', '', '', '');\n        }\n        // Add the parsed values to the editor\n        var dropIcon = Functions.getImage('b_drop');\n        for (i = 0; i < values.length; i++) {\n            fields += '<tr><td>' +\n                   '<input type=\\'text\\' value=\\'' + values[i] + '\\'>' +\n                   '</td><td class=\\'drop\\'>' +\n                   dropIcon +\n                   '</td></tr>';\n        }\n        /**\n         * @var dialog HTML code for the ENUM/SET dialog\n         */\n        var dialog = '<div id=\\'enum_editor\\'>' +\n                   '<fieldset class=\"pma-fieldset\">' +\n                    '<legend>' + title + '</legend>' +\n                    '<p>' + Functions.getImage('s_notice') +\n                    Messages.enum_hint + '</p>' +\n                    '<table class=\"table table-borderless values\">' + fields + '</table>' +\n                    '</fieldset><fieldset class=\"pma-fieldset tblFooters\">' +\n                    '<table class=\"table table-borderless add\"><tr><td>' +\n                    '<div class=\\'slider\\'></div>' +\n                    '</td><td>' +\n                    '<form><div><input type=\\'submit\\' class=\\'add_value btn btn-primary\\' value=\\'' +\n                    Functions.sprintf(Messages.enum_addValue, 1) +\n                    '\\'></div></form>' +\n                    '</td></tr></table>' +\n                    '<input type=\\'hidden\\' value=\\'' + // So we know which column's data is being edited\n                    $(this).closest('td').find('input').attr('id') +\n                    '\\'>' +\n                    '</fieldset>' +\n                    '</div>';\n        $('#enumEditorGoButton').on('click', function () {\n            // When the submit button is clicked,\n            // put the data back into the original form\n            var valueArray = [];\n            $('#enumEditorModal').find('.values input').each(function (index, elm) {\n                var val = elm.value.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, '\\'\\'');\n                valueArray.push('\\'' + val + '\\'');\n            });\n            // get the Length/Values text field where this value belongs\n            var valuesId = $('#enumEditorModal').find('input[type=\\'hidden\\']').val();\n            $('input#' + valuesId).val(valueArray.join(','));\n        });\n        // Show the dialog\n        var width = parseInt(\n            (parseInt($('html').css('font-size'), 10) / 13) * 340,\n            10\n        );\n        if (! width) {\n            width = 340;\n        }\n        $('#enumEditorModal').modal('show');\n        $('#enumEditorModal').find('.modal-body').first().html(dialog);\n        // slider for choosing how many fields to add\n        $('#enumEditorModal').find('.slider').slider({\n            animate: true,\n            range: 'min',\n            value: 1,\n            min: 1,\n            max: 9,\n            slide: function (event, ui) {\n                $(this).closest('table').find('input[type=submit]').val(\n                    Functions.sprintf(Messages.enum_addValue, ui.value)\n                );\n            }\n        });\n        // Focus the slider, otherwise it looks nearly transparent\n        $('a.ui-slider-handle').addClass('ui-state-focus');\n        return false;\n    });\n\n    $(document).on('click', 'a.central_columns_dialog', function () {\n        var href = 'index.php?route=/database/central-columns';\n        var db = CommonParams.get('db');\n        var table = CommonParams.get('table');\n        var maxRows = $(this).data('maxrows');\n        var pick = $(this).data('pick');\n        if (pick !== false) {\n            pick = true;\n        }\n        var params = {\n            'ajax_request' : true,\n            'server' : CommonParams.get('server'),\n            'db' : CommonParams.get('db'),\n            'cur_table' : CommonParams.get('table'),\n            'getColumnList':true\n        };\n        var colid = $(this).closest('td').find('input').attr('id');\n        var fields = '';\n        if (! (db + '_' + table in centralColumnList)) {\n            centralColumnList.push(db + '_' + table);\n            $.ajax({\n                type: 'POST',\n                url: href,\n                data: params,\n                success: function (data) {\n                    centralColumnList[db + '_' + table] = data.message;\n                },\n                async:false\n            });\n        }\n        var i = 0;\n        var listSize = centralColumnList[db + '_' + table].length;\n        var min = (listSize <= maxRows) ? listSize : maxRows;\n        for (i = 0; i < min; i++) {\n            fields += '<tr><td><div><span class=\"fw-bold\">' +\n                Functions.escapeHtml(centralColumnList[db + '_' + table][i].col_name) +\n                '</span><br><span class=\"color_gray\">' + centralColumnList[db + '_' + table][i].col_type;\n\n            if (centralColumnList[db + '_' + table][i].col_attribute !== '') {\n                fields += '(' + Functions.escapeHtml(centralColumnList[db + '_' + table][i].col_attribute) + ') ';\n            }\n            if (centralColumnList[db + '_' + table][i].col_length !== '') {\n                fields += '(' + Functions.escapeHtml(centralColumnList[db + '_' + table][i].col_length) + ') ';\n            }\n            fields += Functions.escapeHtml(centralColumnList[db + '_' + table][i].col_extra) + '</span>' +\n                '</div></td>';\n            if (pick) {\n                fields += '<td><input class=\"btn btn-secondary pick w-100\" type=\"submit\" value=\"' +\n                    Messages.pickColumn + '\" onclick=\"Functions.autoPopulate(\\'' + colid + '\\',' + i + ')\"></td>';\n            }\n            fields += '</tr>';\n        }\n        var resultPointer = i;\n        var searchIn = '<input type=\"text\" class=\"filter_rows\" placeholder=\"' + Messages.searchList + '\">';\n        if (fields === '') {\n            fields = Functions.sprintf(Messages.strEmptyCentralList, '\\'' + Functions.escapeHtml(db) + '\\'');\n            searchIn = '';\n        }\n        var seeMore = '';\n        if (listSize > maxRows) {\n            seeMore = '<fieldset class=\"pma-fieldset tblFooters text-center fw-bold\">' +\n                '<a href=\\'#\\' id=\\'seeMore\\'>' + Messages.seeMore + '</a></fieldset>';\n        }\n        var centralColumnsDialog = '<div class=\\'max_height_400\\'>' +\n            '<fieldset class=\"pma-fieldset\">' +\n            searchIn +\n            '<table id=\"col_list\" class=\"table table-borderless values\">' + fields + '</table>' +\n            '</fieldset>' +\n            seeMore +\n            '</div>';\n\n        var width = parseInt(\n            (parseInt($('html').css('font-size'), 10) / 13) * 500,\n            10\n        );\n        if (! width) {\n            width = 500;\n        }\n        var buttonOptions = {};\n        var $centralColumnsDialog = $(centralColumnsDialog).dialog({\n            minWidth: width,\n            maxHeight: 450,\n            modal: true,\n            title: Messages.pickColumnTitle,\n            buttons: buttonOptions,\n            open: function () {\n                $('#col_list').on('click', '.pick', function () {\n                    $centralColumnsDialog.remove();\n                });\n                $('.filter_rows').on('keyup', function () {\n                    $.uiTableFilter($('#col_list'), $(this).val());\n                });\n                $('#seeMore').on('click', function () {\n                    fields = '';\n                    min = (listSize <= maxRows + resultPointer) ? listSize : maxRows + resultPointer;\n                    for (i = resultPointer; i < min; i++) {\n                        fields += '<tr><td><div><span class=\"fw-bold\">' +\n                            centralColumnList[db + '_' + table][i].col_name +\n                            '</span><br><span class=\"color_gray\">' +\n                            centralColumnList[db + '_' + table][i].col_type;\n\n                        if (centralColumnList[db + '_' + table][i].col_attribute !== '') {\n                            fields += '(' + centralColumnList[db + '_' + table][i].col_attribute + ') ';\n                        }\n                        if (centralColumnList[db + '_' + table][i].col_length !== '') {\n                            fields += '(' + centralColumnList[db + '_' + table][i].col_length + ') ';\n                        }\n                        fields += centralColumnList[db + '_' + table][i].col_extra + '</span>' +\n                            '</div></td>';\n                        if (pick) {\n                            fields += '<td><input class=\"btn btn-secondary pick w-100\" type=\"submit\" value=\"' +\n                                Messages.pickColumn + '\" onclick=\"Functions.autoPopulate(\\'' + colid + '\\',' + i + ')\"></td>';\n                        }\n                        fields += '</tr>';\n                    }\n                    $('#col_list').append(fields);\n                    resultPointer = i;\n                    if (resultPointer === listSize) {\n                        $('#seeMore').hide();\n                    }\n                    return false;\n                });\n                $(this).closest('.ui-dialog').find('.ui-dialog-buttonpane button').first().trigger('focus');\n            },\n            close: function () {\n                $('#col_list').off('click', '.pick');\n                $('.filter_rows').off('keyup');\n                $(this).remove();\n            }\n        });\n        return false;\n    });\n\n    // $(document).on('click', 'a.show_central_list',function(e) {\n\n    // });\n    // When \"add a new value\" is clicked, append an empty text field\n    $(document).on('click', 'input.add_value', function (e) {\n        e.preventDefault();\n        var numNewRows = $('#enumEditorModal').find('div.slider').slider('value');\n        while (numNewRows--) {\n            $('#enumEditorModal').find('.values')\n                .append(\n                    '<tr class=\\'hide\\'><td>' +\n                    '<input type=\\'text\\'>' +\n                    '</td><td class=\\'drop\\'>' +\n                    Functions.getImage('b_drop') +\n                    '</td></tr>'\n                )\n                .find('tr').last()\n                .show('fast');\n        }\n    });\n\n    // Removes the specified row from the enum editor\n    $(document).on('click', '#enum_editor td.drop', function () {\n        $(this).closest('tr').hide('fast', function () {\n            $(this).remove();\n        });\n    });\n});\n\n/**\n * Ensures indexes names are valid according to their type and, for a primary\n * key, lock index name to 'PRIMARY'\n * @param {string} formId Variable which parses the form name as\n *                        the input\n * @return {boolean} false if there is no index form, true else\n */\nFunctions.checkIndexName = function (formId) {\n    if ($('#' + formId).length === 0) {\n        return false;\n    }\n\n    // Gets the elements pointers\n    var $theIdxName = $('#input_index_name');\n    var $theIdxChoice = $('#select_index_choice');\n\n    // Index is a primary key\n    if ($theIdxChoice.find('option:selected').val() === 'PRIMARY') {\n        $theIdxName.val('PRIMARY');\n        $theIdxName.prop('disabled', true);\n    } else {\n        if ($theIdxName.val() === 'PRIMARY') {\n            $theIdxName.val('');\n        }\n        $theIdxName.prop('disabled', false);\n    }\n\n    return true;\n};\n\nAJAX.registerTeardown('functions.js', function () {\n    $(document).off('click', '#index_frm input[type=submit]');\n});\nAJAX.registerOnload('functions.js', function () {\n    /**\n     * Handler for adding more columns to an index in the editor\n     */\n    $(document).on('click', '#index_frm input[type=submit]', function (event) {\n        event.preventDefault();\n        var hadAddButtonHidden = $(this).closest('fieldset').find('.add_fields').hasClass('hide');\n        if (hadAddButtonHidden === false) {\n            var rowsToAdd = $(this)\n                .closest('fieldset')\n                .find('.slider')\n                .slider('value');\n\n            var tempEmptyVal = function () {\n                $(this).val('');\n            };\n\n            var tempSetFocus = function () {\n                if ($(this).find('option:selected').val() === '') {\n                    return true;\n                }\n                $(this).closest('tr').find('input').trigger('focus');\n            };\n\n            while (rowsToAdd--) {\n                var $indexColumns = $('#index_columns');\n                var $newrow = $indexColumns\n                    .find('tbody > tr').first()\n                    .clone()\n                    .appendTo(\n                        $indexColumns.find('tbody')\n                    );\n                $newrow.find(':input').each(tempEmptyVal);\n                // focus index size input on column picked\n                $newrow.find('select').on('change', tempSetFocus);\n            }\n        }\n    });\n});\nFunctions.indexDialogModal = function (routeUrl, url, title, callbackSuccess, callbackFailure) {\n    /* Remove the hidden dialogs if there are*/\n    var modal = $('#indexDialogModal');\n    /**\n     * @var button_options Object that stores the options\n     *                     passed to jQueryUI dialog\n     */\n    $('#indexDialogModalGoButton').on('click', function () {\n        /**\n         * @var the_form object referring to the export form\n         */\n        var $form = $('#index_frm');\n        Functions.ajaxShowMessage(Messages.strProcessingRequest);\n        Functions.prepareForAjaxRequest($form);\n        // User wants to submit the form\n        $.post($form.attr('action'), $form.serialize() + CommonParams.get('arg_separator') + 'do_save_data=1', function (data) {\n            var $sqlqueryresults = $('.sqlqueryresults');\n            if ($sqlqueryresults.length !== 0) {\n                $sqlqueryresults.remove();\n            }\n            if (typeof data !== 'undefined' && data.success === true) {\n                Functions.ajaxShowMessage(data.message);\n                Functions.highlightSql($('.result_query'));\n                $('.result_query .alert').remove();\n                /* Reload the field form*/\n                $('#table_index').remove();\n                $('<div id=\\'temp_div\\'><div>')\n                    .append(data.index_table)\n                    .find('#table_index')\n                    .insertAfter('#index_header');\n                var $editIndexDialog = $('#indexDialogModal');\n                if ($editIndexDialog.length > 0) {\n                    $editIndexDialog.dialog('close');\n                }\n                $('div.no_indexes_defined').hide();\n                if (callbackSuccess) {\n                    callbackSuccess(data);\n                }\n                Navigation.reload();\n            } else {\n                var $tempDiv = $('<div id=\\'temp_div\\'><div>').append(data.error);\n                var $error;\n                if ($tempDiv.find('.error code').length !== 0) {\n                    $error = $tempDiv.find('.error code').addClass('error');\n                } else {\n                    $error = $tempDiv;\n                }\n                if (callbackFailure) {\n                    callbackFailure();\n                }\n                Functions.ajaxShowMessage($error, false);\n            }\n        }); // end $.post()\n    });\n    $('#indexDialogModalPreviewButton').on('click', function () {\n        // Function for Previewing SQL\n        var $form = $('#index_frm');\n        Functions.previewSql($form);\n    });\n    var $msgbox = Functions.ajaxShowMessage();\n    $.post(routeUrl, url, function (data) {\n        if (typeof data !== 'undefined' && data.success === false) {\n            // in the case of an error, show the error message returned.\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n            // Show dialog if the request was successful\n            modal.modal('show');\n            modal.find('.modal-body').first().html(data.message);\n            $('#indexDialogModalLabel').first().text(title);\n            Functions.verifyColumnsProperties();\n            modal.find('.tblFooters').remove();\n            Functions.showIndexEditDialog(modal);\n        }\n    }); // end $.get()\n};\n\nFunctions.indexEditorDialog = function (url, title, callbackSuccess, callbackFailure) {\n    Functions.indexDialogModal('index.php?route=/table/indexes', url, title, callbackSuccess, callbackFailure);\n};\n\nFunctions.indexRenameDialog = function (url, title, callbackSuccess, callbackFailure) {\n    Functions.indexDialogModal('index.php?route=/table/indexes/rename', url, title, callbackSuccess, callbackFailure);\n};\n\nFunctions.showIndexEditDialog = function ($outer) {\n    Indexes.checkIndexType();\n    Functions.checkIndexName('index_frm');\n    var $indexColumns = $('#index_columns');\n    $indexColumns.find('td').each(function () {\n        $(this).css('width', $(this).width() + 'px');\n    });\n    $indexColumns.find('tbody').sortable({\n        axis: 'y',\n        containment: $indexColumns.find('tbody'),\n        tolerance: 'pointer'\n    });\n    Functions.showHints($outer);\n    // Add a slider for selecting how many columns to add to the index\n    $outer.find('.slider').slider({\n        animate: true,\n        value: 1,\n        min: 1,\n        max: 16,\n        slide: function (event, ui) {\n            $(this).closest('fieldset').find('input[type=submit]').val(\n                Functions.sprintf(Messages.strAddToIndex, ui.value)\n            );\n        }\n    });\n    $('div.add_fields').removeClass('hide');\n    // focus index size input on column picked\n    $outer.find('table#index_columns select').on('change', function () {\n        if ($(this).find('option:selected').val() === '') {\n            return true;\n        }\n        $(this).closest('tr').find('input').trigger('focus');\n    });\n    // Focus the slider, otherwise it looks nearly transparent\n    $('a.ui-slider-handle').addClass('ui-state-focus');\n    // set focus on index name input, if empty\n    var input = $outer.find('input#input_index_name');\n    if (! input.val()) {\n        input.trigger('focus');\n    }\n};\n\n/**\n * Function to display tooltips that were\n * generated on the PHP side by PhpMyAdmin\\Util::showHint()\n *\n * @param {object} $div a div jquery object which specifies the\n *                    domain for searching for tooltips. If we\n *                    omit this parameter the function searches\n *                    in the whole body\n **/\nFunctions.showHints = function ($div) {\n    var $newDiv = $div;\n    if ($newDiv === undefined || !($newDiv instanceof jQuery) || $newDiv.length === 0) {\n        $newDiv = $('body');\n    }\n    $newDiv.find('.pma_hint').each(function () {\n        Functions.tooltip(\n            $(this).children('img'),\n            'img',\n            $(this).children('span').html()\n        );\n    });\n};\n\nAJAX.registerOnload('functions.js', function () {\n    Functions.showHints();\n});\n\nFunctions.mainMenuResizerCallback = function () {\n    // 5 px margin for jumping menu in Chrome\n    // eslint-disable-next-line compat/compat\n    return $(document.body).width() - 5;\n};\n\n// This must be fired only once after the initial page load\n$(function () {\n    // Initialise the menu resize plugin\n    $('#topmenu').menuResizer(Functions.mainMenuResizerCallback);\n    // register resize event\n    $(window).on('resize', function () {\n        $('#topmenu').menuResizer('resize');\n    });\n});\n\n/**\n * var  toggleButton  This is a function that creates a toggle\n *                    sliding button given a jQuery reference\n *                    to the correct DOM element\n *\n * @param $obj\n */\nFunctions.toggleButton = function ($obj) {\n    // In rtl mode the toggle switch is flipped horizontally\n    // so we need to take that into account\n    var right;\n    if ($('span.text_direction', $obj).text() === 'ltr') {\n        right = 'right';\n    } else {\n        right = 'left';\n    }\n    /**\n     * @var  h  Height of the button, used to scale the\n     *          background image and position the layers\n     */\n    var h = $obj.height();\n    $('img', $obj).height(h);\n    $('table', $obj).css('bottom', h - 1);\n    /**\n     * @var  on   Width of the \"ON\" part of the toggle switch\n     * @var  off  Width of the \"OFF\" part of the toggle switch\n     */\n    var on  = $('td.toggleOn', $obj).width();\n    var off = $('td.toggleOff', $obj).width();\n    // Make the \"ON\" and \"OFF\" parts of the switch the same size\n    // + 2 pixels to avoid overflowed\n    $('td.toggleOn > div', $obj).width(Math.max(on, off) + 2);\n    $('td.toggleOff > div', $obj).width(Math.max(on, off) + 2);\n    /**\n     *  @var  w  Width of the central part of the switch\n     */\n    var w = parseInt(($('img', $obj).height() / 16) * 22, 10);\n    // Resize the central part of the switch on the top\n    // layer to match the background\n    $($obj).find('table td').eq(1).children('div').width(w);\n    /**\n     * @var  imgw    Width of the background image\n     * @var  tblw    Width of the foreground layer\n     * @var  offset  By how many pixels to move the background\n     *               image, so that it matches the top layer\n     */\n    var imgw = $('img', $obj).width();\n    var tblw = $('table', $obj).width();\n    var offset = parseInt(((imgw - tblw) / 2), 10);\n    // Move the background to match the layout of the top layer\n    $obj.find('img').css(right, offset);\n    /**\n     * @var  offw    Outer width of the \"ON\" part of the toggle switch\n     * @var  btnw    Outer width of the central part of the switch\n     */\n    var offw = $('td.toggleOff', $obj).outerWidth();\n    var btnw = $($obj).find('table td').eq(1).outerWidth();\n    // Resize the main div so that exactly one side of\n    // the switch plus the central part fit into it.\n    $obj.width(offw + btnw + 2);\n    /**\n     * @var  move  How many pixels to move the\n     *             switch by when toggling\n     */\n    var move = $('td.toggleOff', $obj).outerWidth();\n    // If the switch is initialized to the\n    // OFF state we need to move it now.\n    if ($('div.toggle-container', $obj).hasClass('off')) {\n        if (right === 'right') {\n            $('div.toggle-container', $obj).animate({ 'left': '-=' + move + 'px' }, 0);\n        } else {\n            $('div.toggle-container', $obj).animate({ 'left': '+=' + move + 'px' }, 0);\n        }\n    }\n    // Attach an 'onclick' event to the switch\n    $('div.toggle-container', $obj).on('click', function () {\n        if ($(this).hasClass('isActive')) {\n            return false;\n        } else {\n            $(this).addClass('isActive');\n        }\n        var $msg = Functions.ajaxShowMessage();\n        var $container = $(this);\n        var callback = $('span.callback', this).text();\n        var operator;\n        var url;\n        var removeClass;\n        var addClass;\n        // Perform the actual toggle\n        if ($(this).hasClass('on')) {\n            if (right === 'right') {\n                operator = '-=';\n            } else {\n                operator = '+=';\n            }\n            url = $(this).find('td.toggleOff > span').text();\n            removeClass = 'on';\n            addClass = 'off';\n        } else {\n            if (right === 'right') {\n                operator = '+=';\n            } else {\n                operator = '-=';\n            }\n            url = $(this).find('td.toggleOn > span').text();\n            removeClass = 'off';\n            addClass = 'on';\n        }\n\n        var parts = url.split('?');\n        $.post(parts[0], parts[1] + '&ajax_request=true', function (data) {\n            if (typeof data !== 'undefined' && data.success === true) {\n                Functions.ajaxRemoveMessage($msg);\n                $container\n                    .removeClass(removeClass)\n                    .addClass(addClass)\n                    .animate({ 'left': operator + move + 'px' }, function () {\n                        $container.removeClass('isActive');\n                    });\n                // eslint-disable-next-line no-eval\n                eval(callback);\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n                $container.removeClass('isActive');\n            }\n        });\n    });\n};\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('functions.js', function () {\n    $('div.toggle-container').off('click');\n});\n/**\n * Initialise all toggle buttons\n */\nAJAX.registerOnload('functions.js', function () {\n    $('div.toggleAjax').each(function () {\n        var $button = $(this).show();\n        $button.find('img').each(function () {\n            if (this.complete) {\n                Functions.toggleButton($button);\n            } else {\n                $(this).on('load', function () {\n                    Functions.toggleButton($button);\n                });\n            }\n        });\n    });\n});\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('functions.js', function () {\n    $(document).off('change', 'select.pageselector');\n    $('#update_recent_tables').off('ready');\n    $('#sync_favorite_tables').off('ready');\n});\n\nAJAX.registerOnload('functions.js', function () {\n    /**\n     * Autosubmit page selector\n     */\n    $(document).on('change', 'select.pageselector', function (event) {\n        event.stopPropagation();\n        // Check where to load the new content\n        if ($(this).closest('#pma_navigation').length === 0) {\n            // For the main page we don't need to do anything,\n            $(this).closest('form').trigger('submit');\n        } else {\n            // but for the navigation we need to manually replace the content\n            Navigation.treePagination($(this));\n        }\n    });\n\n    var $updateRecentTables = $('#update_recent_tables');\n    if ($updateRecentTables.length) {\n        $.get(\n            $updateRecentTables.attr('href'),\n            { 'no_debug': true },\n            function (data) {\n                if (typeof data !== 'undefined' && data.success === true) {\n                    $('#pma_recent_list').html(data.list);\n                }\n            }\n        );\n    }\n\n    // Sync favorite tables from localStorage to pmadb.\n    if ($('#sync_favorite_tables').length) {\n        $.ajax({\n            url: $('#sync_favorite_tables').attr('href'),\n            cache: false,\n            type: 'POST',\n            data: {\n                'favoriteTables': (isStorageSupported('localStorage') && typeof window.localStorage.favoriteTables !== 'undefined')\n                    ? window.localStorage.favoriteTables\n                    : '',\n                'server': CommonParams.get('server'),\n                'no_debug': true\n            },\n            success: function (data) {\n                // Update localStorage.\n                if (isStorageSupported('localStorage')) {\n                    window.localStorage.favoriteTables = data.favoriteTables;\n                }\n                $('#pma_favorite_list').html(data.list);\n            }\n        });\n    }\n}); // end of $()\n\n/**\n * Creates a message inside an object with a sliding effect\n *\n * @param {string} msg    A string containing the text to display\n * @param {JQuery} $object   a jQuery object containing the reference\n *                 to the element where to put the message\n *                 This is optional, if no element is\n *                 provided, one will be created below the\n *                 navigation links at the top of the page\n *\n * @return {boolean} True on success, false on failure\n */\nFunctions.slidingMessage = function (msg, $object) {\n    var $obj = $object;\n    if (msg === undefined || msg.length === 0) {\n        // Don't show an empty message\n        return false;\n    }\n    if ($obj === undefined || !($obj instanceof jQuery) || $obj.length === 0) {\n        // If the second argument was not supplied,\n        // we might have to create a new DOM node.\n        if ($('#PMA_slidingMessage').length === 0) {\n            $('#page_content').prepend(\n                '<span id=\"PMA_slidingMessage\" ' +\n                'class=\"d-inline-block\"></span>'\n            );\n        }\n        $obj = $('#PMA_slidingMessage');\n    }\n    if ($obj.has('div').length > 0) {\n        // If there already is a message inside the\n        // target object, we must get rid of it\n        $obj\n            .find('div')\n            .first()\n            .fadeOut(function () {\n                $obj\n                    .children()\n                    .remove();\n                $obj\n                    .append('<div>' + msg + '</div>');\n                // highlight any sql before taking height;\n                Functions.highlightSql($obj);\n                $obj.find('div')\n                    .first()\n                    .hide();\n                $obj\n                    .animate({\n                        height: $obj.find('div').first().height()\n                    })\n                    .find('div')\n                    .first()\n                    .fadeIn();\n            });\n    } else {\n        // Object does not already have a message\n        // inside it, so we simply slide it down\n        $obj.width('100%')\n            .html('<div>' + msg + '</div>');\n        // highlight any sql before taking height;\n        Functions.highlightSql($obj);\n        var h = $obj\n            .find('div')\n            .first()\n            .hide()\n            .height();\n        $obj\n            .find('div')\n            .first()\n            .css('height', 0)\n            .show()\n            .animate({\n                height: h\n            }, function () {\n            // Set the height of the parent\n            // to the height of the child\n                $obj\n                    .height(\n                        $obj\n                            .find('div')\n                            .first()\n                            .height()\n                    );\n            });\n    }\n    return true;\n};\n\n/**\n * Attach CodeMirror2 editor to SQL edit area.\n */\nAJAX.registerOnload('functions.js', function () {\n    var $elm = $('#sqlquery');\n    if ($elm.siblings().filter('.CodeMirror').length > 0) {\n        return;\n    }\n    if ($elm.length > 0) {\n        if (typeof CodeMirror !== 'undefined') {\n            codeMirrorEditor = Functions.getSqlEditor($elm);\n            codeMirrorEditor.focus();\n            codeMirrorEditor.on('blur', Functions.updateQueryParameters);\n        } else {\n            // without codemirror\n            $elm.trigger('focus').on('blur', Functions.updateQueryParameters);\n        }\n    }\n    Functions.highlightSql($('body'));\n});\nAJAX.registerTeardown('functions.js', function () {\n    if (codeMirrorEditor) {\n        $('#sqlquery').text(codeMirrorEditor.getValue());\n        codeMirrorEditor.toTextArea();\n        codeMirrorEditor = false;\n    }\n});\nAJAX.registerOnload('functions.js', function () {\n    // initializes all lock-page elements lock-id and\n    // val-hash data property\n    $('#page_content form.lock-page textarea, ' +\n            '#page_content form.lock-page input[type=\"text\"], ' +\n            '#page_content form.lock-page input[type=\"number\"], ' +\n            '#page_content form.lock-page select').each(function (i) {\n        $(this).data('lock-id', i);\n        // val-hash is the hash of default value of the field\n        // so that it can be compared with new value hash\n        // to check whether field was modified or not.\n        $(this).data('val-hash', AJAX.hash($(this).val()));\n    });\n\n    // initializes lock-page elements (input types checkbox and radio buttons)\n    // lock-id and val-hash data property\n    $('#page_content form.lock-page input[type=\"checkbox\"], ' +\n            '#page_content form.lock-page input[type=\"radio\"]').each(function (i) {\n        $(this).data('lock-id', i);\n        $(this).data('val-hash', AJAX.hash($(this).is(':checked')));\n    });\n});\n\n/**\n * jQuery plugin to correctly filter input fields by value, needed\n * because some nasty values may break selector syntax\n */\n(function ($) {\n    $.fn.filterByValue = function (value) {\n        return this.filter(function () {\n            return $(this).val() === value;\n        });\n    };\n}(jQuery));\n\n/**\n * Return value of a cell in a table.\n *\n * @param {string} td\n * @return {string}\n */\nFunctions.getCellValue = function (td) {\n    var $td = $(td);\n    if ($td.is('.null')) {\n        return '';\n    } else if ((! $td.is('.to_be_saved')\n        || $td.is('.set'))\n        && $td.data('original_data')\n    ) {\n        return $td.data('original_data');\n    } else {\n        return $td.text();\n    }\n};\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('functions.js', function () {\n    $(document).off('change', '.autosubmit');\n});\n\nAJAX.registerOnload('functions.js', function () {\n    /**\n     * Automatic form submission on change.\n     */\n    $(document).on('change', '.autosubmit', function () {\n        $(this).closest('form').trigger('submit');\n    });\n});\n\n/**\n * @implements EventListener\n */\nconst PrintPage = {\n    handleEvent: () => {\n        window.print();\n    }\n};\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('functions.js', function () {\n    document.querySelectorAll('.jsPrintButton').forEach(item => {\n        item.removeEventListener('click', PrintPage);\n    });\n\n    $(document).off('click', 'a.create_view.ajax');\n    $(document).off('keydown', '#createViewModal input, #createViewModal select');\n    $(document).off('change', '#fkc_checkbox');\n});\n\nAJAX.registerOnload('functions.js', function () {\n    document.querySelectorAll('.jsPrintButton').forEach(item => {\n        item.addEventListener('click', PrintPage);\n    });\n\n    $('.logout').on('click', function () {\n        var form = $(\n            '<form method=\"POST\" action=\"' + $(this).attr('href') + '\" class=\"disableAjax\">' +\n            '<input type=\"hidden\" name=\"token\" value=\"' + Functions.escapeHtml(CommonParams.get('token')) + '\">' +\n            '</form>'\n        );\n        $('body').append(form);\n        form.submit();\n        sessionStorage.clear();\n        return false;\n    });\n    /**\n     * Ajaxification for the \"Create View\" action\n     */\n    $(document).on('click', 'a.create_view.ajax', function (e) {\n        e.preventDefault();\n        Functions.createViewModal($(this));\n    });\n    /**\n     * Attach Ajax event handlers for input fields in the editor\n     * and used to submit the Ajax request when the ENTER key is pressed.\n     */\n    if ($('#createViewModal').length !== 0) {\n        $(document).on('keydown', '#createViewModal input, #createViewModal select', function (e) {\n            if (e.which === 13) { // 13 is the ENTER key\n                e.preventDefault();\n\n                // with preventing default, selection by <select> tag\n                // was also prevented in IE\n                $(this).trigger('blur');\n\n                $(this).closest('.ui-dialog').find('.ui-button').first().trigger('click');\n            }\n        }); // end $(document).on()\n    }\n\n    if ($('textarea[name=\"view[as]\"]').length !== 0) {\n        codeMirrorEditor = Functions.getSqlEditor($('textarea[name=\"view[as]\"]'));\n    }\n});\n\nFunctions.createViewModal = function ($this) {\n    var $msg = Functions.ajaxShowMessage();\n    var sep = CommonParams.get('arg_separator');\n    var params = Functions.getJsConfirmCommonParam(this, $this.getPostData());\n    params += sep + 'ajax_dialog=1';\n    $.post($this.attr('href'), params, function (data) {\n        if (typeof data !== 'undefined' && data.success === true) {\n            Functions.ajaxRemoveMessage($msg);\n            $('#createViewModalGoButton').on('click', function () {\n                if (typeof CodeMirror !== 'undefined') {\n                    codeMirrorEditor.save();\n                }\n                $msg = Functions.ajaxShowMessage();\n                $.post('index.php?route=/view/create', $('#createViewModal').find('form').serialize(), function (data) {\n                    Functions.ajaxRemoveMessage($msg);\n                    if (typeof data !== 'undefined' && data.success === true) {\n                        $('#createViewModal').modal('hide');\n                        $('.result_query').html(data.message);\n                        Navigation.reload();\n                    } else {\n                        Functions.ajaxShowMessage(data.error);\n                    }\n                });\n            });\n            $('#createViewModal').find('.modal-body').first().html(data.message);\n            // Attach syntax highlighted editor\n            $('#createViewModal').on('shown.bs.modal', function () {\n                codeMirrorEditor = Functions.getSqlEditor($('#createViewModal').find('textarea'));\n                $('input:visible[type=text]', $('#createViewModal')).first().trigger('focus');\n                $('#createViewModal').off('shown.bs.modal');\n            });\n            $('#createViewModal').modal('show');\n        } else {\n            Functions.ajaxShowMessage(data.error);\n        }\n    });\n};\n\n/**\n * Makes the breadcrumbs and the menu bar float at the top of the viewport\n */\n$(function () {\n    if ($('#floating_menubar').length && $('#PMA_disable_floating_menubar').length === 0) {\n        var left = $('html').attr('dir') === 'ltr' ? 'left' : 'right';\n        $('#floating_menubar')\n            .css('margin-' + left, $('#pma_navigation').width() + $('#pma_navigation_resizer').width())\n            .css(left, 0)\n            .css({\n                'position': 'fixed',\n                'top': 0,\n                'width': '100%',\n                'z-index': 99\n            })\n            .append($('#server-breadcrumb'))\n            .append($('#topmenucontainer'));\n        // Allow the DOM to render, then adjust the padding on the body\n        setTimeout(function () {\n            $('body').css(\n                'padding-top',\n                $('#floating_menubar').outerHeight(true)\n            );\n            $('#topmenu').menuResizer('resize');\n        }, 4);\n    }\n});\n\n/**\n * Scrolls the page to the top if clicking the server-breadcrumb bar\n */\n$(function () {\n    $(document).on('click', '#server-breadcrumb, #goto_pagetop', function (event) {\n        event.preventDefault();\n        $('html, body').animate({ scrollTop: 0 }, 'fast');\n    });\n});\n\nvar checkboxesSel = 'input.checkall:checkbox:enabled';\nFunctions.checkboxesSel = checkboxesSel;\n\n/**\n * Watches checkboxes in a form to set the checkall box accordingly\n */\nFunctions.checkboxesChanged = function () {\n    var $form = $(this.form);\n    // total number of checkboxes in current form\n    var totalBoxes = $form.find(checkboxesSel).length;\n    // number of checkboxes checked in current form\n    var checkedBoxes = $form.find(checkboxesSel + ':checked').length;\n    var $checkall = $form.find('input.checkall_box');\n    if (totalBoxes === checkedBoxes) {\n        $checkall.prop({ checked: true, indeterminate: false });\n    } else if (checkedBoxes > 0) {\n        $checkall.prop({ checked: true, indeterminate: true });\n    } else {\n        $checkall.prop({ checked: false, indeterminate: false });\n    }\n};\n\n$(document).on('change', checkboxesSel, Functions.checkboxesChanged);\n\n$(document).on('change', 'input.checkall_box', function () {\n    var isChecked = $(this).is(':checked');\n    $(this.form).find(checkboxesSel).not('.row-hidden').prop('checked', isChecked)\n        .parents('tr').toggleClass('marked table-active', isChecked);\n});\n\n$(document).on('click', '.checkall-filter', function () {\n    var $this = $(this);\n    var selector = $this.data('checkall-selector');\n    $('input.checkall_box').prop('checked', false);\n    $this.parents('form').find(checkboxesSel).filter(selector).prop('checked', true).trigger('change')\n        .parents('tr').toggleClass('marked', true);\n    return false;\n});\n\n/**\n * Watches checkboxes in a sub form to set the sub checkall box accordingly\n */\nFunctions.subCheckboxesChanged = function () {\n    var $form = $(this).parent().parent();\n    // total number of checkboxes in current sub form\n    var totalBoxes = $form.find(checkboxesSel).length;\n    // number of checkboxes checked in current sub form\n    var checkedBoxes = $form.find(checkboxesSel + ':checked').length;\n    var $checkall = $form.find('input.sub_checkall_box');\n    if (totalBoxes === checkedBoxes) {\n        $checkall.prop({ checked: true, indeterminate: false });\n    } else if (checkedBoxes > 0) {\n        $checkall.prop({ checked: true, indeterminate: true });\n    } else {\n        $checkall.prop({ checked: false, indeterminate: false });\n    }\n};\n\n$(document).on('change', checkboxesSel + ', input.checkall_box:checkbox:enabled', Functions.subCheckboxesChanged);\n\n$(document).on('change', 'input.sub_checkall_box', function () {\n    var isChecked = $(this).is(':checked');\n    var $form = $(this).parent().parent();\n    $form.find(checkboxesSel).prop('checked', isChecked)\n        .parents('tr').toggleClass('marked', isChecked);\n});\n\n/**\n * Rows filtering\n *\n * - rows to filter are identified by data-filter-row attribute\n *   which contains uppercase string to filter\n * - it is simple substring case insensitive search\n * - optionally number of matching rows is written to element with\n *   id filter-rows-count\n */\n$(document).on('keyup', '#filterText', function () {\n    var filterInput = $(this).val().toUpperCase().replace(/ /g, '_');\n    var count = 0;\n    $('[data-filter-row]').each(function () {\n        var $row = $(this);\n        /* Can not use data() here as it does magic conversion to int for numeric values */\n        if ($row.attr('data-filter-row').indexOf(filterInput) > -1) {\n            count += 1;\n            $row.show();\n            $row.find('input.checkall').removeClass('row-hidden');\n        } else {\n            $row.hide();\n            $row.find('input.checkall').addClass('row-hidden').prop('checked', false);\n            $row.removeClass('marked');\n        }\n    });\n    setTimeout(function () {\n        $(checkboxesSel).trigger('change');\n    }, 300);\n    $('#filter-rows-count').html(count);\n});\nAJAX.registerOnload('functions.js', function () {\n    /* Trigger filtering of the list based on incoming database name */\n    var $filter = $('#filterText');\n    if ($filter.val()) {\n        $filter.trigger('keyup').trigger('select');\n    }\n});\n\n/**\n * Formats a byte number to human-readable form\n *\n * @param bytesToFormat the bytes to format\n * @param subDecimals optional subdecimals the number of digits after the point\n * @param pointChar optional pointchar the char to use as decimal point\n *\n * @return {string}\n */\nFunctions.formatBytes = function (bytesToFormat, subDecimals, pointChar) {\n    var bytes = bytesToFormat;\n    var decimals = subDecimals;\n    var point = pointChar;\n    if (!decimals) {\n        decimals = 0;\n    }\n    if (!point) {\n        point = '.';\n    }\n    var units = ['B', 'KiB', 'MiB', 'GiB'];\n    for (var i = 0; bytes > 1024 && i < units.length; i++) {\n        bytes /= 1024;\n    }\n    var factor = Math.pow(10, decimals);\n    bytes = Math.round(bytes * factor) / factor;\n    bytes = bytes.toString().split('.').join(point);\n    return bytes + ' ' + units[i];\n};\n\nAJAX.registerOnload('functions.js', function () {\n    /**\n     * Reveal the login form to users with JS enabled\n     * and focus the appropriate input field\n     */\n    var $loginform = $('#loginform');\n    if ($loginform.length) {\n        $loginform.find('.js-show').show();\n        if ($('#input_username').val()) {\n            $('#input_password').trigger('focus');\n        } else {\n            $('#input_username').trigger('focus');\n        }\n    }\n    var $httpsWarning = $('#js-https-mismatch');\n    if ($httpsWarning.length) {\n        if ((window.location.protocol === 'https:') !== CommonParams.get('is_https')) {\n            $httpsWarning.show();\n        }\n    }\n});\n\n/**\n * Formats timestamp for display\n *\n * @param {string} date\n * @param {bool} seconds\n * @return {string}\n */\nFunctions.formatDateTime = function (date, seconds) {\n    var result = $.datepicker.formatDate('yy-mm-dd', date);\n    var timefmt = 'HH:mm';\n    if (seconds) {\n        timefmt = 'HH:mm:ss';\n    }\n    return result + ' ' + $.datepicker.formatTime(\n        timefmt, {\n            hour: date.getHours(),\n            minute: date.getMinutes(),\n            second: date.getSeconds()\n        }\n    );\n};\n\n/**\n * Check than forms have less fields than max allowed by PHP.\n * @return {boolean}\n */\nFunctions.checkNumberOfFields = function () {\n    if (typeof maxInputVars === 'undefined') {\n        return false;\n    }\n    if (false === maxInputVars) {\n        return false;\n    }\n    $('form').each(function () {\n        var nbInputs = $(this).find(':input').length;\n        if (nbInputs > maxInputVars) {\n            var warning = Functions.sprintf(Messages.strTooManyInputs, maxInputVars);\n            Functions.ajaxShowMessage(warning);\n            return false;\n        }\n        return true;\n    });\n\n    return true;\n};\n\n/**\n * Ignore the displayed php errors.\n * Simply removes the displayed errors.\n *\n * @param clearPrevErrors whether to clear errors stored\n *             in $_SESSION['prev_errors'] at server\n *\n */\nFunctions.ignorePhpErrors = function (clearPrevErrors) {\n    var clearPrevious = clearPrevErrors;\n    if (typeof(clearPrevious) === 'undefined' ||\n        clearPrevious === null\n    ) {\n        clearPrevious = false;\n    }\n    // send AJAX request to /error-report with send_error_report=0, exception_type=php & token.\n    // It clears the prev_errors stored in session.\n    if (clearPrevious) {\n        var $pmaReportErrorsForm = $('#pma_report_errors_form');\n        $pmaReportErrorsForm.find('input[name=\"send_error_report\"]').val(0); // change send_error_report to '0'\n        $pmaReportErrorsForm.trigger('submit');\n    }\n\n    // remove displayed errors\n    var $pmaErrors = $('#pma_errors');\n    $pmaErrors.fadeOut('slow');\n    $pmaErrors.remove();\n};\n\n/**\n * Toggle the Datetimepicker UI if the date value entered\n * by the user in the 'text box' is not going to be accepted\n * by the Datetimepicker plugin (but is accepted by MySQL)\n *\n * @param $td\n * @param $inputField\n */\nFunctions.toggleDatepickerIfInvalid = function ($td, $inputField) {\n    // Regex allowed by the Datetimepicker UI\n    var dtexpDate = new RegExp(['^([0-9]{4})',\n        '-(((01|03|05|07|08|10|12)-((0[1-9])|([1-2][0-9])|(3[0-1])))|((02|04|06|09|11)',\n        '-((0[1-9])|([1-2][0-9])|30)))$'].join(''));\n    var dtexpTime = new RegExp(['^(([0-1][0-9])|(2[0-3]))',\n        ':((0[0-9])|([1-5][0-9]))',\n        ':((0[0-9])|([1-5][0-9]))(.[0-9]{1,6}){0,1}$'].join(''));\n\n    // If key-ed in Time or Date values are unsupported by the UI, close it\n    if ($td.attr('data-type') === 'date' && ! dtexpDate.test($inputField.val())) {\n        $inputField.datepicker('hide');\n    } else if ($td.attr('data-type') === 'time' && ! dtexpTime.test($inputField.val())) {\n        $inputField.datepicker('hide');\n    } else {\n        $inputField.datepicker('show');\n    }\n};\n\n/**\n * Function to submit the login form after validation is done.\n * NOTE: do NOT use a module or it will break the callback, issue #15435\n */\n// eslint-disable-next-line no-unused-vars, camelcase\nvar Functions_recaptchaCallback = function () {\n    $('#login_form').trigger('submit');\n};\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('functions.js', function () {\n    $(document).off('keydown', 'form input, form textarea, form select');\n});\n\nAJAX.registerOnload('functions.js', function () {\n    /**\n     * Handle 'Ctrl/Alt + Enter' form submits\n     */\n    $('form input, form textarea, form select').on('keydown', function (e) {\n        if ((e.ctrlKey && e.which === 13) || (e.altKey && e.which === 13)) {\n            var $form = $(this).closest('form');\n\n            // There could be multiple submit buttons on the same form,\n            // we assume all of them behave identical and just click one.\n            if (! $form.find('input[type=\"submit\"]').first() ||\n                ! $form.find('input[type=\"submit\"]').first().trigger('click')\n            ) {\n                $form.trigger('submit');\n            }\n        }\n    });\n});\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('functions.js', function () {\n    $(document).off('change', 'input[type=radio][name=\"pw_hash\"]');\n    $(document).off('mouseover', '.sortlink');\n    $(document).off('mouseout', '.sortlink');\n});\n\nAJAX.registerOnload('functions.js', function () {\n    /*\n     * Display warning regarding SSL when sha256_password\n     * method is selected\n     * Used in /user-password (Change Password link on index.php)\n     */\n    $(document).on('change', 'select#select_authentication_plugin_cp', function () {\n        if (this.value === 'sha256_password') {\n            $('#ssl_reqd_warning_cp').show();\n        } else {\n            $('#ssl_reqd_warning_cp').hide();\n        }\n    });\n\n    Cookies.defaults.path = CommonParams.get('rootPath');\n\n    // Bind event handlers for toggling sort icons\n    $(document).on('mouseover', '.sortlink', function () {\n        $(this).find('.soimg').toggle();\n    });\n    $(document).on('mouseout', '.sortlink', function () {\n        $(this).find('.soimg').toggle();\n    });\n});\n\n/**\n * Returns an HTML IMG tag for a particular image from a theme,\n * which may be an actual file or an icon from a sprite\n *\n * @param {string} image      The name of the file to get\n * @param {string} alternate  Used to set 'alt' and 'title' attributes of the image\n * @param {object} attributes An associative array of other attributes\n *\n * @return {object} The requested image, this object has two methods:\n *                  .toString()        - Returns the IMG tag for the requested image\n *                  .attr(name)        - Returns a particular attribute of the IMG\n *                                       tag given it's name\n *                  .attr(name, value) - Sets a particular attribute of the IMG\n *                                       tag to the given value\n */\nFunctions.getImage = function (image, alternate, attributes) {\n    var alt = alternate;\n    var attr = attributes;\n    // custom image object, it will eventually be returned by this functions\n    var retval = {\n        data: {\n            // this is private\n            alt: '',\n            title: '',\n            src: 'themes/dot.gif',\n        },\n        attr: function (name, value) {\n            if (value === undefined) {\n                if (this.data[name] === undefined) {\n                    return '';\n                } else {\n                    return this.data[name];\n                }\n            } else {\n                this.data[name] = value;\n            }\n        },\n        toString: function () {\n            var retval = '<' + 'img';\n            for (var i in this.data) {\n                retval += ' ' + i + '=\"' + this.data[i] + '\"';\n            }\n            retval += ' /' + '>';\n            return retval;\n        }\n    };\n    // initialise missing parameters\n    if (attr === undefined) {\n        attr = {};\n    }\n    if (alt === undefined) {\n        alt = '';\n    }\n    // set alt\n    if (attr.alt !== undefined) {\n        retval.attr('alt', Functions.escapeHtml(attr.alt));\n    } else {\n        retval.attr('alt', Functions.escapeHtml(alt));\n    }\n    // set title\n    if (attr.title !== undefined) {\n        retval.attr('title', Functions.escapeHtml(attr.title));\n    } else {\n        retval.attr('title', Functions.escapeHtml(alt));\n    }\n    // set css classes\n    retval.attr('class', 'icon ic_' + image);\n    // set all other attributes\n    for (var i in attr) {\n        if (i === 'src') {\n            // do not allow to override the 'src' attribute\n            continue;\n        }\n\n        retval.attr(i, attr[i]);\n    }\n\n    return retval;\n};\n\n/**\n * Sets a configuration value.\n *\n * A configuration value may be set in both browser's local storage and\n * remotely in server's configuration table.\n *\n * NOTE: Depending on server's configuration, the configuration table may be or\n * not persistent.\n *\n * @param {string}     key         Configuration key.\n * @param {object}     value       Configuration value.\n */\nFunctions.configSet = function (key, value) {\n    var serialized = JSON.stringify(value);\n    localStorage.setItem(key, serialized);\n    $.ajax({\n        url: 'index.php?route=/config/set',\n        type: 'POST',\n        dataType: 'json',\n        data: {\n            'ajax_request': true,\n            key: key,\n            server: CommonParams.get('server'),\n            value: serialized,\n        },\n        success: function (data) {\n            // Updating value in local storage.\n            if (! data.success) {\n                if (data.error) {\n                    Functions.ajaxShowMessage(data.error);\n                } else {\n                    Functions.ajaxShowMessage(data.message);\n                }\n            }\n            // Eventually, call callback.\n        }\n    });\n};\n\n/**\n * Gets a configuration value. A configuration value will be searched in\n * browser's local storage first and if not found, a call to the server will be\n * made.\n *\n * If value should not be cached and the up-to-date configuration value from\n * right from the server is required, the third parameter should be `false`.\n *\n * @param {string}     key             Configuration key.\n * @param {boolean}    cached          Configuration type.\n * @param {Function}   successCallback The callback to call after the value is received\n *\n * @return {void}\n */\nFunctions.configGet = function (key, cached, successCallback) {\n    var isCached = (typeof cached !== 'undefined') ? cached : true;\n    var value = localStorage.getItem(key);\n    if (isCached && value !== undefined && value !== null) {\n        return JSON.parse(value);\n    }\n\n    // Result not found in local storage or ignored.\n    // Hitting the server.\n    $.ajax({\n        url: 'index.php?route=/config/get',\n        type: 'POST',\n        dataType: 'json',\n        data: {\n            'ajax_request': true,\n            server: CommonParams.get('server'),\n            key: key\n        },\n        success: function (data) {\n            // Updating value in local storage.\n            if (data.success) {\n                localStorage.setItem(key, JSON.stringify(data.value));\n            } else {\n                Functions.ajaxShowMessage(data.message);\n            }\n            // Call the callback if it is defined\n            if (typeof successCallback === 'function') {\n                // Feed it the value previously saved like on async mode\n                successCallback(JSON.parse(localStorage.getItem(key)));\n            }\n        }\n    });\n};\n\n/**\n * Return POST data as stored by Generator::linkOrButton\n *\n * @return {string}\n */\nFunctions.getPostData = function () {\n    var dataPost = this.attr('data-post');\n    // Strip possible leading ?\n    if (dataPost !== undefined && dataPost.startsWith('?')) {\n        dataPost = dataPost.substring(1);\n    }\n    return dataPost;\n};\njQuery.fn.getPostData = Functions.getPostData;\n"],"names":["Functions","sqlBoxLocked","onlyOnceElements","ajaxMessageCount","codeMirrorEditor","codeMirrorInlineEditor","sqlAutoCompleteInProgress","sqlAutoComplete","sqlAutoCompleteDefaultTable","centralColumnList","primaryIndexes","uniqueIndexes","indexes","fulltextIndexes","spatialIndexes","$","ajaxPrefilter","options","originalOptions","nocache","Date","getTime","Math","floor","random","data","encodeURIComponent","CommonParams","get","extend","addDatepicker","$thisElement","type","showTimepicker","currentDateTime","defaultOptions","timeInput","hour","getHours","minute","getMinutes","second","getSeconds","showOn","buttonImage","themeImagePath","buttonImageOnly","stepMinutes","stepHours","showSecond","showMillisec","showMicrosec","showButtonPanel","changeYear","dateFormat","timeFormat","constrainInput","altFieldTimeOnly","showAnim","beforeShow","input","inst","closest","length","setTimeout","dpDiv","css","top","left","position","tooltip","uiTooltip","disable","$note","text","option","append","onSelect","inline","onClose","enable","timepicker","Messages","strMysqlAllowedValuesTipTime","datetimepicker","addDateTimePicker","undefined","each","decimals","parent","attr","hourMax","indexOf","firstDay","firstDayOfCalendar","hasClass","strMysqlAllowedValuesTipDate","handleRedirectAndReload","parseInt","redirect_flag","window","location","href","reload","reload_flag","getSqlEditor","$textarea","resize","lintOptions","resizeType","CodeMirror","defaults","lineNumbers","matchBrackets","extraKeys","hintOptions","indentUnit","mode","lineWrapping","sqlLint","gutters","lint","codemirrorEditor","fromTextArea","handles","getWrapperElement","resizable","setSize","width","height","on","codeMirrorAutoCompleteOnInputRead","e","value","content","isClean","AJAX","lockPageHandler","clearSelection","document","selection","empty","getSelection","sel","removeAllRanges","$elements","item","myContent","additionalOptions","items","tooltipClass","track","show","hide","escapeHtml","unsafe","toString","replace","escapeJsString","escapeBacktick","s","escapeSingleQuote","sprintf","apply","arguments","hideShowDefaultValue","$defaultType","val","siblings","trigger","$nullCheckbox","find","prop","hideShowExpression","$virtuality","verifyColumnsProperties","showNoticeForEnum","showWarningForIntTypes","prepareForAjaxRequest","$form","is","checkPasswordStrength","meterObject","meterObjectLabel","username","customDict","push","zxcvbnts","core","ZxcvbnOptions","setOptions","dictionary","userInputs","zxcvbnObject","zxcvbn","strength","score","html","strExtrWeak","strVeryWeak","strWeak","strGood","strStrong","suggestPassword","passwordForm","pwchars","passwordlength","passwd","generated_pw","randomWords","Int32Array","i","crypto","getRandomValues","msCrypto","charAt","abs","$jQueryPasswordForm","elements","pma_pw","pma_pw2","meterObj","first","meterObjLabel","displayPasswordGenerateButton","generatePwdRow","addClass","strGeneratePassword","appendTo","pwdCell","pwdButton","id","strGenerate","form","pwdTextbox","name","getElementById","generatePwdDiv","for","optionsSpan","clone","selectContent","element","lock","onlyOnce","select","confirmLink","theLink","theSqlQuery","strDoYouReally","opera","isConfirmed","confirm","action","confirmQuery","theForm1","sqlQuery1","doConfirmRegExp0","RegExp","doConfirmRegExp1","doConfirmRegExp2","doConfirmRegExp3","doConfirmRegExp4","test","message","substring","is_js_confirmed","focus","checkSqlQuery","theForm","sqlQuery","save","getValue","sql_query","spaceRegExp","sql_file","id_bookmark","selectedIndex","result","alert","strFormEmpty","emptyCheckTheField","theFieldName","theField","checkFormElementInRange","minimum","maximum","min","max","Number","MAX_VALUE","isNaN","strEnterValidNumber","checkTableEditForm","fieldsCnt","atLeastOneField","elm","elm2","elm3","strEnterValidLength","field_0_1","$input","lastClickChecked","lastClickedRow","lastShiftClickedRow","idleSecondsCounter","incInterval","updateTimeout","registerTeardown","clearTimeout","clearInterval","off","registerOnload","onclick","onkeypress","guid","s4","SetIdleTime","UpdateIdleTime","isStorageSupported","sessionStorage","params","ajax","url","success","remaining","interval","pow","clear","not","error","dialog","set","new_token","setInterval","sessionTimeout","setItem","$this","$tr","$table","shiftKey","$checkbox","checked","removeClass","index","start","end","slice","currRow","navigator","userAgent","match","setSelectOptions","theSelect","doCheck","setQuery","query","setValue","sqlform","handleSimulateQueryButton","updateRegExp","deleteRegExp","$simulateDml","before","strSimulateDML","remove","insertQuery","queryType","table","strFormatting","sql","db","key","localStorage","getItem","Cookies","ajaxShowMessage","strNoAutoSavedQuery","myListBox","dummy","columnsList","valDis","editDis","NbSelect","insertValueQuery","myQuery","selected","replaceSelection","createRange","selectionStart","startPos","endPos","selectionEnd","SqlString","updateQueryParameters","allParameters","parameters","parameter","inArray","strNoParam","$temp","children","paramName","$param","getForeignKeyCheckboxLoader","getImage","loadForeignKeyCheckbox","default_fk_check_value","strForeignKeyCheck","replaceWith","getJsConfirmCommonParam","elem","$elem","sep","startsWith","toTextArea","bindCodeMirrorToInlineEditor","prev","trim","$innerSql","newContent","strGo","strCancel","$editorArea","insertBefore","fkCheck","$fakeForm","method","$divEditor","evt","target","$inputUsername","instance","tables","defaultTable","columnHintRender","self","columnName","columnHint","JSON","parse","hasOwnProperty","columns","column","displayText","Type","Key","render","complete","state","completionActive","cur","getCursor","token","getTokenAt","string","commands","autocomplete","$inlineEditor","style","refresh","catchKeypressesFromSqlInlineEdit","event","ctrlKey","metaKey","keyCode","documentationAdd","$elm","mysqlDocTemplate","decodeURIComponent","documentationKeyword","idx","keyword","toUpperCase","$next","next","nextKeyword","full","$next2","next2Keyword","full2","mysqlDocKeyword","documentationBuiltin","builtin","mysqlDocBuiltin","highlightSql","$base","$sql","$pre","$highlight","runMode","updateCode","htmlValue","rawValue","$code","$notHighlighted","$highlighted","timeout","msg","newTimeOut","selfClosing","dismissable","strLoading","strProcessingRequest","prependTo","$retval","delay","fadeOut","strDismiss","ajaxRemoveMessage","$thisMessageBox","jQuery","stop","previewSql","formUrl","formData","serialize","$messageBox","response","modal","sql_data","strPreviewSQL","strErrorProcessingRequest","confirmPreviewSql","sqlData","callback","checkReservedWordColumns","async","holdStarter","which","parents","copyToClipboard","res","execCommand","preventDefault","after","strCopyQueryButtonSuccess","strCopyQueryButtonFailure","selectElement","enumNoticeId","split","selectedType","lengthRestrictions","map","filter","restricationFound","some","restriction","createProfilingChart","factory","JQPlotChartFactory","chart","createChart","ChartType","PIE","dataTable","DataTable","addColumn","ColumnType","STRING","NUMBER","setData","windowWidth","draw","seriesDefaults","rendererOptions","showDataLabels","highlighter","tooltipLocation","sizeAdjust","tooltipAxes","formatString","legend","numberColumns","seriesColors","prettyProfilingNum","number","accuracy","num","acc","round","sqlPrettyPrint","getMode","stream","StringStream","startState","tokens","output","tabs","cnt","ret","statements","spaceExceptionsBefore","spaceExceptionsAfter","eol","pos","current","toLowerCase","currentStatement","blockStack","newBlock","endBlock","indentLevel","statementPart","lastStatementPart","unshift","shift","question","callbackFn","openCallback","confirmState","call","fn","sortTable","textSelector","tableBody","rows","row","sortKey","sort","a","b","post","$createTableDialog","formatted_sql","tablesTable","CommonActions","refreshMain","currLastRow","last","currLastRowIndexString","currLastRowIndex","parseFloat","newLastRowIndex","newLastRowId","newTableString","DatabaseStructure","adjustTotals","Navigation","argsep","params12","tableStructureUrl","server","responseHandler","submitChangesInCreateTableForm","actionParam","$msgbox","$pageContent","hideShowConnection","stopImmediatePropagation","col","exec","$selectFieldKey","checkPassword","$theForm","$pred","$password","$passwordRepeat","alertMessage","strPasswordEmpty","strPasswordNotSame","hostname","thisValue","prepend","scripts","scriptHandler","load","unwrap","validateDefaultValue","$engineSelector","$connection","$labelTh","$default","autoPopulate","inputId","offset","newInputId","col_name","colType","col_type","$input3","col_length","colDefault","col_default","$input4","col_collation","$input6","col_attribute","col_extra","col_isNull","colname","title","enum_newColumnVals","enum_columnVals","inputstring","values","inString","curr","buffer","fields","dropIcon","enum_hint","enum_addValue","valueArray","valuesId","join","slider","animate","range","slide","ui","maxRows","pick","colid","listSize","pickColumn","resultPointer","searchIn","searchList","strEmptyCentralList","seeMore","centralColumnsDialog","buttonOptions","$centralColumnsDialog","minWidth","maxHeight","pickColumnTitle","buttons","open","uiTableFilter","close","numNewRows","checkIndexName","formId","$theIdxName","$theIdxChoice","hadAddButtonHidden","rowsToAdd","tempEmptyVal","tempSetFocus","$indexColumns","$newrow","indexDialogModal","routeUrl","callbackSuccess","callbackFailure","$sqlqueryresults","index_table","insertAfter","$editIndexDialog","$tempDiv","$error","showIndexEditDialog","indexEditorDialog","indexRenameDialog","$outer","Indexes","checkIndexType","sortable","axis","containment","tolerance","showHints","strAddToIndex","$div","$newDiv","mainMenuResizerCallback","body","menuResizer","toggleButton","$obj","right","h","w","eq","imgw","tblw","offw","outerWidth","btnw","move","$msg","$container","operator","parts","eval","$button","stopPropagation","treePagination","$updateRecentTables","list","cache","favoriteTables","slidingMessage","$object","has","fadeIn","hash","filterByValue","getCellValue","td","$td","PrintPage","handleEvent","print","querySelectorAll","forEach","removeEventListener","addEventListener","submit","createViewModal","getPostData","outerHeight","scrollTop","checkboxesSel","checkboxesChanged","totalBoxes","checkedBoxes","$checkall","indeterminate","isChecked","toggleClass","selector","subCheckboxesChanged","filterInput","count","$row","$filter","formatBytes","bytesToFormat","subDecimals","pointChar","bytes","point","units","factor","$loginform","$httpsWarning","protocol","formatDateTime","date","seconds","datepicker","formatDate","timefmt","formatTime","checkNumberOfFields","maxInputVars","nbInputs","warning","strTooManyInputs","ignorePhpErrors","clearPrevErrors","clearPrevious","$pmaReportErrorsForm","$pmaErrors","toggleDatepickerIfInvalid","$inputField","dtexpDate","dtexpTime","Functions_recaptchaCallback","altKey","path","toggle","image","alternate","attributes","alt","retval","src","configSet","serialized","stringify","dataType","configGet","cached","successCallback","isCached","dataPost"],"sourceRoot":""}