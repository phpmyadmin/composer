{"version":3,"file":"database/structure.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/database/structure.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from '../modules/ajax.js';\nimport { Functions } from '../modules/functions.js';\nimport { Navigation } from '../modules/navigation.js';\nimport { CommonParams } from '../modules/common.js';\nimport tooltip from '../modules/tooltip.js';\nimport { ajaxRemoveMessage, ajaxShowMessage } from '../modules/ajax-message.js';\nimport getJsConfirmCommonParam from '../modules/functions/getJsConfirmCommonParam.js';\nimport { escapeHtml } from '../modules/functions/escape.js';\n\n/**\n * @fileoverview    functions used on the database structure page\n * @name            Database Structure\n *\n * @requires    jQueryUI\n */\n\nvar DatabaseStructure = {};\nwindow.DatabaseStructure = DatabaseStructure;\n\n/**\n * AJAX scripts for /database/structure\n *\n * Actions ajaxified here:\n * Drop Database\n * Truncate Table\n * Drop Table\n *\n */\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('database/structure.js', function () {\n    $(document).off('click', 'a.truncate_table_anchor.ajax');\n    $(document).off('click', 'a.drop_table_anchor.ajax');\n    $(document).off('click', '#real_end_input');\n    $(document).off('click', 'a.favorite_table_anchor.ajax');\n    $('a.real_row_count').off('click');\n    $('a.row_count_sum').off('click');\n    $('select[name=submit_mult]').off('change');\n});\n\n/**\n * Adjust number of rows and total size in the summary\n * when truncating, creating, dropping or inserting into a table\n */\nDatabaseStructure.adjustTotals = function () {\n    var byteUnits = [\n        window.Messages.strB,\n        window.Messages.strKiB,\n        window.Messages.strMiB,\n        window.Messages.strGiB,\n        window.Messages.strTiB,\n        window.Messages.strPiB,\n        window.Messages.strEiB\n    ];\n    /**\n     * @var $allTr jQuery object that references all the rows in the list of tables\n     */\n    var $allTr = $('#tablesForm').find('table.data tbody').first().find('tr');\n    // New summary values for the table\n    var tableSum = $allTr.length;\n    var rowsSum = 0;\n    var sizeSum = 0;\n    var overheadSum = 0;\n    var rowSumApproximated = false;\n\n    $allTr.each(function () {\n        var $this = $(this);\n        var i;\n        var tmpVal;\n        // Get the number of rows for this SQL table\n        var strRows = $this.find('.tbl_rows').text();\n        // If the value is approximated\n        if (strRows.indexOf('~') === 0) {\n            rowSumApproximated = true;\n            // The approximated value contains a preceding ~ (Eg 100 --> ~100)\n            strRows = strRows.substring(1, strRows.length);\n        }\n        strRows = strRows.replace(/[,.\\s]/g, '');\n        var intRow = parseInt(strRows, 10);\n        if (! isNaN(intRow)) {\n            rowsSum += intRow;\n        }\n        // Extract the size and overhead\n        var valSize = 0;\n        var valOverhead = 0;\n        var strSize = $this.find('.tbl_size span:not(.unit)').text().trim();\n        var strSizeUnit = $this.find('.tbl_size span.unit').text().trim();\n        var strOverhead = $this.find('.tbl_overhead span:not(.unit)').text().trim();\n        var strOverheadUnit = $this.find('.tbl_overhead span.unit').text().trim();\n        // Given a value and a unit, such as 100 and KiB, for the table size\n        // and overhead calculate their numeric values in bytes, such as 102400\n        for (i = 0; i < byteUnits.length; i++) {\n            if (strSizeUnit === byteUnits[i]) {\n                tmpVal = parseFloat(strSize);\n                valSize = tmpVal * Math.pow(1024, i);\n                break;\n            }\n        }\n        for (i = 0; i < byteUnits.length; i++) {\n            if (strOverheadUnit === byteUnits[i]) {\n                tmpVal = parseFloat(strOverhead);\n                valOverhead = tmpVal * Math.pow(1024, i);\n                break;\n            }\n        }\n        sizeSum += valSize;\n        overheadSum += valOverhead;\n    });\n    // Add some commas for readability:\n    // 1000000 becomes 1,000,000\n    var strRowSum = rowsSum + '';\n    var regex = /(\\d+)(\\d{3})/;\n    while (regex.test(strRowSum)) {\n        strRowSum = strRowSum.replace(regex, '$1' + ',' + '$2');\n    }\n    // If approximated total value add ~ in front\n    if (rowSumApproximated) {\n        strRowSum = '~' + strRowSum;\n    }\n    // Calculate the magnitude for the size and overhead values\n    var sizeMagnitude = 0;\n    var overheadMagnitude = 0;\n    while (sizeSum >= 1024) {\n        sizeSum /= 1024;\n        sizeMagnitude++;\n    }\n    while (overheadSum >= 1024) {\n        overheadSum /= 1024;\n        overheadMagnitude++;\n    }\n\n    sizeSum = Math.round(sizeSum * 10) / 10;\n    overheadSum = Math.round(overheadSum * 10) / 10;\n\n    // Update summary with new data\n    var $summary = $('#tbl_summary_row');\n    $summary.find('.tbl_num').text(window.sprintf(window.Messages.strNTables, tableSum));\n    if (rowSumApproximated) {\n        $summary.find('.row_count_sum').text(strRowSum);\n    } else {\n        $summary.find('.tbl_rows').text(strRowSum);\n    }\n    $summary.find('.tbl_size').text(sizeSum + ' ' + byteUnits[sizeMagnitude]);\n    $summary.find('.tbl_overhead').text(overheadSum + ' ' + byteUnits[overheadMagnitude]);\n};\n\n/**\n * Gets the real row count for a table or DB.\n * @param {object} $target Target for appending the real count value.\n */\nDatabaseStructure.fetchRealRowCount = function ($target) {\n    var $throbber = $('#pma_navigation').find('.throbber')\n        .first()\n        .clone()\n        .css({ visibility: 'visible', display: 'inline-block' })\n        .on('click', false);\n    $target.html($throbber);\n    $.ajax({\n        type: 'GET',\n        url: $target.attr('href'),\n        cache: false,\n        dataType: 'json',\n        success: function (response) {\n            if (response.success) {\n                // If to update all row counts for a DB.\n                if (response.real_row_count_all) {\n                    $.each(JSON.parse(response.real_row_count_all),\n                        function (index, table) {\n                            // Update each table row count.\n                            $('table.data td[data-table*=\"' + table.table + '\"]')\n                                .text(table.row_count);\n                        }\n                    );\n                }\n                // If to update a particular table's row count.\n                if (response.real_row_count) {\n                    // Append the parent cell with real row count.\n                    $target.parent().text(response.real_row_count);\n                }\n                // Adjust the 'Sum' displayed at the bottom.\n                DatabaseStructure.adjustTotals();\n            } else {\n                ajaxShowMessage(window.Messages.strErrorRealRowCount);\n            }\n        },\n        error: function () {\n            ajaxShowMessage(window.Messages.strErrorRealRowCount);\n        }\n    });\n};\n\nAJAX.registerOnload('database/structure.js', function () {\n    /**\n     * Event handler on select of \"Make consistent with central list\"\n     */\n    $('select[name=submit_mult]').on('change', function (event) {\n        var url = 'index.php?route=/database/structure';\n        var action = $(this).val();\n\n        if (action === 'make_consistent_with_central_list') {\n            event.preventDefault();\n            event.stopPropagation();\n\n            $('#makeConsistentWithCentralListModal').modal('show').on('shown.bs.modal', function () {\n                $('#makeConsistentWithCentralListContinue').on('click', function () {\n                    const $form = $('#tablesForm');\n                    const argSep = CommonParams.get('arg_separator');\n                    const data = $form.serialize() + argSep + 'ajax_request=true' + argSep + 'ajax_page_request=true';\n\n                    ajaxShowMessage();\n                    AJAX.source = $form;\n\n                    $.post(\n                        'index.php?route=/database/structure/central-columns/make-consistent',\n                        data,\n                        AJAX.responseHandler\n                    );\n\n                    $('#makeConsistentWithCentralListModal').modal('hide');\n                });\n            });\n\n            return;\n        }\n\n        if (action === 'copy_tbl' ||\n            action === 'add_prefix_tbl' ||\n            action === 'replace_prefix_tbl' ||\n            action === 'copy_tbl_change_prefix'\n        ) {\n            event.preventDefault();\n            event.stopPropagation();\n            if ($('input[name=\"selected_tbl[]\"]:checked').length === 0) {\n                return false;\n            }\n            var formData = $('#tablesForm').serialize();\n            var modalTitle = '';\n            if (action === 'copy_tbl') {\n                url = 'index.php?route=/database/structure/copy-form';\n                modalTitle = window.Messages.strCopyTablesTo;\n            } else if (action === 'add_prefix_tbl') {\n                url = 'index.php?route=/database/structure/add-prefix';\n                modalTitle = window.Messages.strAddPrefix;\n            } else if (action === 'replace_prefix_tbl') {\n                url = 'index.php?route=/database/structure/change-prefix-form';\n                modalTitle = window.Messages.strReplacePrefix;\n            } else if (action === 'copy_tbl_change_prefix') {\n                url = 'index.php?route=/database/structure/change-prefix-form';\n                modalTitle = window.Messages.strCopyPrefix;\n            }\n            $.ajax({\n                type: 'POST',\n                url: url,\n                dataType: 'html',\n                data: formData\n            }).done(function (modalBody) {\n                const bulkActionModal = $('#bulkActionModal');\n                bulkActionModal.on('show.bs.modal', function () {\n                    this.querySelector('.modal-title').innerText = modalTitle;\n                    this.querySelector('.modal-body').innerHTML = modalBody;\n                });\n                bulkActionModal.modal('show').on('shown.bs.modal', function () {\n                    $('#bulkActionContinue').on('click', function () {\n                        $('#ajax_form').trigger('submit');\n                        $('#bulkActionModal').modal('hide');\n                    });\n                });\n            });\n\n            return;\n        }\n\n        if (action === 'analyze_tbl') {\n            url = 'index.php?route=/table/maintenance/analyze';\n        } else if (action === 'sync_unique_columns_central_list') {\n            url = 'index.php?route=/database/structure/central-columns/add';\n        } else if (action === 'delete_unique_columns_central_list') {\n            url = 'index.php?route=/database/structure/central-columns/remove';\n        } else if (action === 'check_tbl') {\n            url = 'index.php?route=/table/maintenance/check';\n        } else if (action === 'checksum_tbl') {\n            url = 'index.php?route=/table/maintenance/checksum';\n        } else if (action === 'drop_tbl') {\n            url = 'index.php?route=/database/structure/drop-form';\n        } else if (action === 'empty_tbl') {\n            url = 'index.php?route=/database/structure/empty-form';\n        } else if (action === 'export') {\n            url = 'index.php?route=/export/tables';\n        } else if (action === 'optimize_tbl') {\n            url = 'index.php?route=/table/maintenance/optimize';\n        } else if (action === 'repair_tbl') {\n            url = 'index.php?route=/table/maintenance/repair';\n        } else if (action === 'show_create') {\n            url = 'index.php?route=/database/structure/show-create';\n        } else {\n            $('#tablesForm').trigger('submit');\n\n            return;\n        }\n\n        var $form = $(this).parents('form');\n        var argsep = CommonParams.get('arg_separator');\n        var data = $form.serialize() + argsep + 'ajax_request=true' + argsep + 'ajax_page_request=true';\n\n        ajaxShowMessage();\n        AJAX.source = $form;\n\n        $.post(url, data, AJAX.responseHandler);\n    });\n\n    /**\n     * Ajax Event handler for 'Truncate Table'\n     */\n    $(document).on('click', 'a.truncate_table_anchor.ajax', function (event) {\n        event.preventDefault();\n\n        /**\n         * @var $this_anchor Object  referring to the anchor clicked\n         */\n        var $thisAnchor = $(this);\n\n        // extract current table name and build the question string\n        /**\n         * @var curr_table_name String containing the name of the table to be truncated\n         */\n        var currTableName = $thisAnchor.parents('tr').children('th').children('a').text();\n        /**\n         * @var question    String containing the question to be asked for confirmation\n         */\n        var question = window.Messages.strTruncateTableStrongWarning + ' ' +\n            window.sprintf(window.Messages.strDoYouReally, 'TRUNCATE `' + escapeHtml(currTableName) + '`') +\n            Functions.getForeignKeyCheckboxLoader();\n\n        $thisAnchor.confirm(question, $thisAnchor.attr('href'), function (url) {\n            ajaxShowMessage(window.Messages.strProcessingRequest);\n\n            var params = getJsConfirmCommonParam(this, $thisAnchor.getPostData());\n\n            $.post(url, params, function (data) {\n                if (typeof data !== 'undefined' && data.success === true) {\n                    ajaxShowMessage(data.message);\n                    // Adjust table statistics\n                    var $tr = $thisAnchor.closest('tr');\n                    $tr.find('.tbl_rows').text('0');\n                    $tr.find('.tbl_size, .tbl_overhead').text('-');\n                    DatabaseStructure.adjustTotals();\n                } else {\n                    ajaxShowMessage(window.Messages.strErrorProcessingRequest + ' : ' + data.error, false);\n                }\n            }); // end $.post()\n        }, Functions.loadForeignKeyCheckbox);\n    }); // end of Truncate Table Ajax action\n\n    /**\n     * Ajax Event handler for 'Drop Table' or 'Drop View'\n     */\n    $(document).on('click', 'a.drop_table_anchor.ajax', function (event) {\n        event.preventDefault();\n\n        var $thisAnchor = $(this);\n\n        // extract current table name and build the question string\n        /**\n         * @var $curr_row    Object containing reference to the current row\n         */\n        var $currRow = $thisAnchor.parents('tr');\n        /**\n         * @var curr_table_name String containing the name of the table to be truncated\n         */\n        var currTableName = $currRow.children('th').children('a').text();\n        /**\n         * @var is_view Boolean telling if we have a view\n         */\n        var isView = $currRow.hasClass('is_view') || $thisAnchor.hasClass('view');\n        /**\n         * @var question    String containing the question to be asked for confirmation\n         */\n        var question;\n        if (! isView) {\n            question = window.Messages.strDropTableStrongWarning + ' ' +\n                window.sprintf(window.Messages.strDoYouReally, 'DROP TABLE `' + escapeHtml(currTableName) + '`');\n        } else {\n            question =\n                window.sprintf(window.Messages.strDoYouReally, 'DROP VIEW `' + escapeHtml(currTableName) + '`');\n        }\n        question += Functions.getForeignKeyCheckboxLoader();\n\n        $thisAnchor.confirm(question, $thisAnchor.attr('href'), function (url) {\n            var $msg = ajaxShowMessage(window.Messages.strProcessingRequest);\n\n            var params = getJsConfirmCommonParam(this, $thisAnchor.getPostData());\n\n            $.post(url, params, function (data) {\n                if (typeof data !== 'undefined' && data.success === true) {\n                    ajaxShowMessage(data.message);\n                    $currRow.hide('medium').remove();\n                    DatabaseStructure.adjustTotals();\n                    Navigation.reload();\n                    ajaxRemoveMessage($msg);\n                } else {\n                    ajaxShowMessage(window.Messages.strErrorProcessingRequest + ' : ' + data.error, false);\n                }\n            }); // end $.post()\n        }, Functions.loadForeignKeyCheckbox);\n    }); // end of Drop Table Ajax action\n\n    // Calculate Real End for InnoDB\n    /**\n     * Ajax Event handler for calculating the real end for a InnoDB table\n     *\n     */\n    $(document).on('click', '#real_end_input', function (event) {\n        event.preventDefault();\n\n        /**\n         * @var question    String containing the question to be asked for confirmation\n         */\n        var question = window.Messages.strOperationTakesLongTime;\n\n        $(this).confirm(question, '', function () {\n            return true;\n        });\n        return false;\n    }); // end Calculate Real End for InnoDB\n\n    // Add tooltip to favorite icons.\n    $('.favorite_table_anchor').each(function () {\n        tooltip($(this), 'a', $(this).attr('title'));\n    });\n\n    // Get real row count via Ajax.\n    $('a.real_row_count').on('click', function (event) {\n        event.preventDefault();\n        DatabaseStructure.fetchRealRowCount($(this));\n    });\n    // Get all real row count.\n    $('a.row_count_sum').on('click', function (event) {\n        event.preventDefault();\n        DatabaseStructure.fetchRealRowCount($(this));\n    });\n});\n"],"names":["$","AJAX","Functions","Navigation","CommonParams","tooltip","ajaxRemoveMessage","ajaxShowMessage","getJsConfirmCommonParam","escapeHtml","DatabaseStructure","window","registerTeardown","document","off","adjustTotals","byteUnits","Messages","strB","strKiB","strMiB","strGiB","strTiB","strPiB","strEiB","$allTr","find","first","tableSum","length","rowsSum","sizeSum","overheadSum","rowSumApproximated","each","$this","i","tmpVal","strRows","text","indexOf","substring","replace","intRow","parseInt","isNaN","valSize","valOverhead","strSize","trim","strSizeUnit","strOverhead","strOverheadUnit","parseFloat","Math","pow","strRowSum","regex","test","sizeMagnitude","overheadMagnitude","round","$summary","sprintf","strNTables","fetchRealRowCount","$target","$throbber","clone","css","visibility","display","on","html","ajax","type","url","attr","cache","dataType","success","response","real_row_count_all","JSON","parse","index","table","row_count","real_row_count","parent","strErrorRealRowCount","error","registerOnload","event","action","val","preventDefault","stopPropagation","modal","$form","argSep","get","data","serialize","source","post","responseHandler","formData","modalTitle","strCopyTablesTo","strAddPrefix","strReplacePrefix","strCopyPrefix","done","modalBody","bulkActionModal","querySelector","innerText","innerHTML","trigger","parents","argsep","$thisAnchor","currTableName","children","question","strTruncateTableStrongWarning","strDoYouReally","getForeignKeyCheckboxLoader","confirm","strProcessingRequest","params","getPostData","message","$tr","closest","strErrorProcessingRequest","loadForeignKeyCheckbox","$currRow","isView","hasClass","strDropTableStrongWarning","$msg","hide","remove","reload","strOperationTakesLongTime"],"sourceRoot":""}