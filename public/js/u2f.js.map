{"version":3,"file":"u2f.js","mappings":"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","sources":["webpack://phpmyadmin/./resources/js/u2f.ts","webpack://phpmyadmin/external var \"jQuery\""],"sourcesContent":["import $ from 'jquery';\nimport { AJAX } from './modules/ajax.ts';\nimport { ajaxShowMessage } from './modules/ajax-message.ts';\nAJAX.registerOnload('u2f.js', function () {\n    var $inputReg = $('#u2f_registration_response');\n    if ($inputReg.length > 0) {\n        var $formReg = $inputReg.parents('form');\n        $formReg.find('input[type=submit]').hide();\n        setTimeout(function () {\n            // A magic JS function that talks to the USB device. This function will keep polling for the USB device until it finds one.\n            var request = JSON.parse($inputReg.attr('data-request'));\n            if (!(window.u2f && typeof window.u2f.register === 'function')) {\n                return;\n            }\n            window.u2f.register(request.appId, [request], JSON.parse($inputReg.attr('data-signatures')), function (data) {\n                // Handle returning error data\n                if (data.errorCode && data.errorCode !== 0) {\n                    switch (data.errorCode) {\n                        case 5:\n                            ajaxShowMessage(window.Messages.strU2FTimeout, false, 'error');\n                            break;\n                        case 4:\n                            ajaxShowMessage(window.Messages.strU2FErrorRegister, false, 'error');\n                            break;\n                        case 3:\n                            ajaxShowMessage(window.Messages.strU2FInvalidClient, false, 'error');\n                            break;\n                        case 2:\n                            ajaxShowMessage(window.Messages.strU2FBadRequest, false, 'error');\n                            break;\n                        default:\n                            ajaxShowMessage(window.Messages.strU2FUnknown, false, 'error');\n                            break;\n                    }\n                    return;\n                }\n                // Fill and submit form.\n                $inputReg.val(JSON.stringify(data));\n                $formReg.trigger('submit');\n            });\n        }, 1000);\n    }\n    var $inputAuth = $('#u2f_authentication_response');\n    if ($inputAuth.length > 0) {\n        var $formAuth = $inputAuth.parents('form');\n        $formAuth.find('input[type=submit]').hide();\n        setTimeout(function () {\n            // Magic JavaScript talking to your HID\n            // appid, challenge, authenticateRequests\n            var request = JSON.parse($inputAuth.attr('data-request'));\n            if (!(window.u2f && typeof window.u2f.sign === 'function')) {\n                return;\n            }\n            window.u2f.sign(request[0].appId, request[0].challenge, request, function (data) {\n                // Handle returning error data\n                if (data.errorCode && data.errorCode !== 0) {\n                    switch (data.errorCode) {\n                        case 5:\n                            ajaxShowMessage(window.Messages.strU2FTimeout, false, 'error');\n                            break;\n                        case 4:\n                            ajaxShowMessage(window.Messages.strU2FErrorAuthenticate, false, 'error');\n                            break;\n                        case 3:\n                            ajaxShowMessage(window.Messages.strU2FInvalidClient, false, 'error');\n                            break;\n                        case 2:\n                            ajaxShowMessage(window.Messages.strU2FBadRequest, false, 'error');\n                            break;\n                        default:\n                            ajaxShowMessage(window.Messages.strU2FUnknown, false, 'error');\n                            break;\n                    }\n                    return;\n                }\n                // Fill and submit form.\n                $inputAuth.val(JSON.stringify(data));\n                $formAuth.trigger('submit');\n            });\n        }, 1000);\n    }\n});\n","module.exports = jQuery;"],"names":["$","AJAX","ajaxShowMessage","registerOnload","$inputReg","length","$formReg","parents","find","hide","setTimeout","request","JSON","parse","attr","window","u2f","register","appId","data","errorCode","Messages","strU2FTimeout","strU2FErrorRegister","strU2FInvalidClient","strU2FBadRequest","strU2FUnknown","val","stringify","trigger","$inputAuth","$formAuth","sign","challenge","strU2FErrorAuthenticate"],"sourceRoot":""}