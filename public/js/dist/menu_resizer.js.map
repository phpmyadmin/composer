{"version":3,"file":"menu_resizer.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./resources/js/src/menu_resizer.ts"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport getImageTag from './modules/functions/getImageTag.ts';\n/**\n * Handles the resizing of a menu according to the available screen width\n *\n * Uses themes/original/css/resizable-menu.css.php\n *\n * To initialize:\n * $('#myMenu').menuResizer(function () {\n *     // This function will be called to find out how much\n *     // available horizontal space there is for the menu\n *     return $('body').width() - 5; // Some extra margin for good measure\n * });\n *\n * To trigger a resize operation:\n * $('#myMenu').menuResizer('resize'); // Bind this to $(window).resize()\n *\n * To restore the menu to a state like before it was initialized:\n * $('#myMenu').menuResizer('destroy');\n *\n * @package PhpMyAdmin\n */\n(function ($) {\n    function MenuResizer($container, widthCalculator) {\n        var self = this;\n        self.$container = $container;\n        self.widthCalculator = widthCalculator;\n        var windowWidth = $(window).width();\n        if (windowWidth < 768) {\n            $('#pma_navigation_resizer').css({ 'width': '0px' });\n        }\n        // create submenu container\n        var link = $('<a></a>', {\n            'href': '#',\n            'class': 'nav-link dropdown-toggle',\n            'id': 'navbarDropdown',\n            'role': 'button',\n            'data-bs-toggle': 'dropdown',\n            'aria-haspopup': 'true',\n            'aria-expanded': 'false'\n        }).text(window.Messages.strMore);\n        var img = $container.find('li img');\n        if (img.length) {\n            $(getImageTag('b_more').toString()).prependTo(link);\n        }\n        var $submenu = $('<li></li>', { 'class': 'nav-item dropdown d-none' })\n            .append(link)\n            .append($('<ul></ul>', {\n            'class': 'dropdown-menu dropdown-menu-end',\n            'aria-labelledby': 'navbarDropdown'\n        }));\n        $container.append($submenu);\n        setTimeout(function () {\n            self.resize();\n        }, 4);\n    }\n    MenuResizer.prototype.resize = function () {\n        var wmax = this.widthCalculator.call(this.$container);\n        var windowWidth = $(window).width();\n        var $submenu = this.$container.find('.nav-item.dropdown').last();\n        var submenuW = $submenu.outerWidth(true);\n        var $submenuUl = $submenu.find('.dropdown-menu');\n        var $li = this.$container.find('> li');\n        var $li2 = $submenuUl.find('.dropdown-item');\n        var moreShown = $li2.length > 0;\n        // Calculate the total width used by all the shown tabs\n        var totalLen = moreShown ? submenuW : 0;\n        var l = $li.length - 1;\n        var i;\n        for (i = 0; i < l; i++) {\n            totalLen += $($li[i]).outerWidth(true);\n        }\n        // eslint-disable-next-line compat/compat\n        var hasVScroll = document.body.scrollHeight > document.body.clientHeight;\n        if (hasVScroll) {\n            windowWidth += 15;\n        }\n        if (windowWidth < 768) {\n            wmax = 2000;\n        }\n        // Now hide menu elements that don't fit into the menubar\n        var hidden = false; // Whether we have hidden any tabs\n        while (totalLen >= wmax && --l >= 0) { // Process the tabs backwards\n            hidden = true;\n            var el = $($li[l]);\n            el.removeClass('nav-item').addClass('dropdown-item');\n            var elWidth = el.outerWidth(true);\n            el.data('width', elWidth);\n            if (!moreShown) {\n                totalLen -= elWidth;\n                el.prependTo($submenuUl);\n                totalLen += submenuW;\n                moreShown = true;\n            }\n            else {\n                totalLen -= elWidth;\n                el.prependTo($submenuUl);\n            }\n        }\n        // If we didn't hide any tabs, then there might be some space to show some\n        if (!hidden) {\n            // Show menu elements that do fit into the menubar\n            for (i = 0, l = $li2.length; i < l; i++) {\n                totalLen += $($li2[i]).data('width');\n                // item fits or (it is the last item\n                // and it would fit if More got removed)\n                if (totalLen < wmax ||\n                    (i === $li2.length - 1 && totalLen - submenuW < wmax)) {\n                    $($li2[i]).removeClass('dropdown-item').addClass('nav-item');\n                    $($li2[i]).insertBefore($submenu);\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        // Show/hide the \"More\" tab as needed\n        if (windowWidth < 768) {\n            $('.navbar-collapse').css({ 'width': windowWidth - 80 - $('#pma_navigation').width() });\n            $submenu.addClass('d-none');\n            $('.navbar-collapse').css({ 'overflow': 'hidden' });\n        }\n        else {\n            $('.navbar-collapse').css({ 'width': 'auto' });\n            $('.navbar-collapse').css({ 'overflow': 'visible' });\n            if ($submenuUl.find('li').length > 0) {\n                $submenu.removeClass('d-none');\n            }\n            else {\n                $submenu.addClass('d-none');\n            }\n        }\n    };\n    MenuResizer.prototype.destroy = function () {\n        var $submenu = this.$container.find('.nav-item.dropdown').removeData();\n        $submenu.find('li').appendTo(this.$container);\n        $submenu.remove();\n    };\n    /** Public API */\n    var methods = {\n        init: function (widthCalculator) {\n            return this.each(function () {\n                var $this = $(this);\n                if (!$this.data('menuResizer')) {\n                    $this.data('menuResizer', new MenuResizer($this, widthCalculator));\n                }\n            });\n        },\n        resize: function () {\n            return this.each(function () {\n                var self = $(this).data('menuResizer');\n                if (self) {\n                    self.resize();\n                }\n            });\n        },\n        destroy: function () {\n            return this.each(function () {\n                var self = $(this).data('menuResizer');\n                if (self) {\n                    self.destroy();\n                }\n            });\n        }\n    };\n    /**\n     * Extend jQuery\n     *\n     * @param {string|Function} method\n     *\n     * @return {any}\n     */\n    $.fn.menuResizer = function (method) {\n        if (typeof method === 'string' && methods[method]) {\n            return methods[method].call(this);\n        }\n        else if (typeof method === 'function') {\n            return methods.init.apply(this, [method]);\n        }\n        else {\n            $.error('Method ' + method + ' does not exist on jQuery.menuResizer');\n        }\n    };\n}($));\n"],"names":["$","getImageTag","MenuResizer","$container","widthCalculator","self","windowWidth","window","width","css","link","text","Messages","strMore","img","find","length","toString","prependTo","$submenu","append","setTimeout","resize","prototype","wmax","call","last","submenuW","outerWidth","$submenuUl","$li","$li2","moreShown","totalLen","l","i","hasVScroll","document","body","scrollHeight","clientHeight","hidden","el","removeClass","addClass","elWidth","data","insertBefore","destroy","removeData","appendTo","remove","methods","init","each","$this","fn","menuResizer","method","apply","error"],"sourceRoot":""}