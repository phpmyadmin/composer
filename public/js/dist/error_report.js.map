{"version":3,"file":"error_report.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./resources/js/src/error_report.ts"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from './modules/ajax.ts';\nimport { CommonParams } from './modules/common.ts';\nimport { ajaxShowMessage } from './modules/ajax-message.ts';\nimport getImageTag from './modules/functions/getImageTag.ts';\n/**\n * general function, usually for data manipulation pages\n *\n */\nvar ErrorReport = {\n    /**\n     * @var {object}, stores the last exception info\n     */\n    lastException: null,\n    /**\n     * @var object stores the Error Report Data to prevent unnecessary data fetching\n     */\n    errorReportData: null,\n    /**\n     * @var object maintains unique keys already used\n     */\n    keyDict: {},\n    /**\n     * handles thrown error exceptions based on user preferences\n     *\n     * @param {object} data\n     * @param {any} exception\n     */\n    errorDataHandler: function (data, exception) {\n        if (data.success !== true) {\n            ajaxShowMessage(data.error, false);\n            return;\n        }\n        if (data.report_setting === 'ask') {\n            ErrorReport.showErrorNotification();\n        }\n        else if (data.report_setting === 'always') {\n            var reportData = ErrorReport.getReportData(exception);\n            var postData = $.extend(reportData, {\n                'send_error_report': true,\n                'automatic': true\n            });\n            $.post('index.php?route=/error-report', postData, function (data) {\n                if (data.success === false) {\n                    // in the case of an error, show the error message returned.\n                    ajaxShowMessage(data.error, false);\n                }\n                else {\n                    ajaxShowMessage(data.message, false);\n                }\n            });\n        }\n    },\n    errorHandler: function (exception) {\n        // issue: 14359\n        if (JSON.stringify(ErrorReport.lastException) === JSON.stringify(exception)) {\n            return;\n        }\n        if (exception.name === null || typeof (exception.name) === 'undefined') {\n            exception.name = ErrorReport.extractExceptionName(exception);\n        }\n        ErrorReport.lastException = exception;\n        if (ErrorReport.errorReportData === null) {\n            $.post('index.php?route=/error-report', {\n                'ajax_request': true,\n                'server': CommonParams.get('server'),\n                'get_settings': true,\n                'exception_type': 'js'\n            }, function (data) {\n                ErrorReport.errorReportData = data;\n                ErrorReport.errorDataHandler(data, exception);\n            });\n        }\n        else {\n            ErrorReport.errorDataHandler(ErrorReport.errorReportData, exception);\n        }\n    },\n    /**\n     * Shows the modal dialog previewing the report\n     *\n     * @param exception object error report info\n     */\n    showReportDialog: function (exception) {\n        const reportData = ErrorReport.getReportData(exception);\n        const sendErrorReport = function () {\n            const postData = $.extend(reportData, {\n                'send_error_report': true,\n                'description': $('#errorReportDescription').val(),\n                'always_send': $('#errorReportAlwaysSendCheckbox')[0].checked\n            });\n            $.post('index.php?route=/error-report', postData, function (data) {\n                if (data.success === false) {\n                    ajaxShowMessage(data.error, false);\n                }\n                else {\n                    ajaxShowMessage(data.message, 3000);\n                }\n            });\n            $('#errorReportModal').modal('hide');\n        };\n        $.post('index.php?route=/error-report', reportData).done(function (data) {\n            // Delete the modal to refresh it in case the user changed SendErrorReports value\n            if (document.getElementById('errorReportModal') !== null) {\n                $('#errorReportModal').remove();\n            }\n            $('body').append($(data.report_modal));\n            const $errorReportModal = $('#errorReportModal');\n            $errorReportModal.on('show.bs.modal', function () {\n                // Prevents multiple onClick events\n                $('#errorReportModalConfirm').off('click', sendErrorReport);\n                $('#errorReportModalConfirm').on('click', sendErrorReport);\n                $('#errorReportModal .modal-body').html(data.message);\n            });\n            $errorReportModal.modal('show');\n        });\n    },\n    /**\n     * Shows the small notification that asks for user permission\n     */\n    showErrorNotification: function () {\n        var key = Math.random().toString(36).substring(2, 12);\n        while (key in ErrorReport.keyDict) {\n            key = Math.random().toString(36).substring(2, 12);\n        }\n        ErrorReport.keyDict[key] = 1;\n        var $div = $('<div class=\"alert alert-danger\" role=\"alert\" id=\"error_notification_' + key + '\"></div>').append(getImageTag('s_error') + window.Messages.strErrorOccurred);\n        var $buttons = $('<div class=\"float-end\"></div>');\n        var buttonHtml = '<button class=\"btn btn-primary\" id=\"show_error_report_' + key + '\">';\n        buttonHtml += window.Messages.strShowReportDetails;\n        buttonHtml += '</button>';\n        var settingsUrl = 'index.php?route=/preferences/features&server=' + CommonParams.get('server');\n        buttonHtml += '<a class=\"ajax\" href=\"' + settingsUrl + '\">';\n        buttonHtml += getImageTag('s_cog', window.Messages.strChangeReportSettings);\n        buttonHtml += '</a>';\n        buttonHtml += '<a href=\"#\" id=\"ignore_error_' + key + '\" data-notification-id=\"' + key + '\">';\n        buttonHtml += getImageTag('b_close', window.Messages.strIgnore);\n        buttonHtml += '</a>';\n        $buttons.html(buttonHtml);\n        $div.append($buttons);\n        // eslint-disable-next-line compat/compat\n        $div.appendTo(document.body);\n        $(document).on('click', '#show_error_report_' + key, ErrorReport.createReportDialog);\n        $(document).on('click', '#ignore_error_' + key, ErrorReport.removeErrorNotification);\n    },\n    /**\n     * Removes the notification if it was displayed before\n     *\n     * @param {Event} e\n     */\n    removeErrorNotification: function (e = undefined) {\n        if (e) {\n            // don't remove the hash fragment by navigating to #\n            e.preventDefault();\n        }\n        $('#error_notification_' + $(this).data('notification-id')).fadeOut(function () {\n            $(this).remove();\n        });\n    },\n    /**\n     * Extracts Exception name from message if it exists\n     *\n     * @param exception\n     * @return {string}\n     */\n    extractExceptionName: function (exception) {\n        if (exception.message === null || typeof (exception.message) === 'undefined') {\n            return '';\n        }\n        var reg = /([a-zA-Z]+):/;\n        var regexResult = reg.exec(exception.message);\n        if (regexResult && regexResult.length === 2) {\n            return regexResult[1];\n        }\n        return '';\n    },\n    /**\n     * Shows the modal dialog previewing the report\n     */\n    createReportDialog: function () {\n        ErrorReport.removeErrorNotification();\n        ErrorReport.showReportDialog(ErrorReport.lastException);\n    },\n    /**\n     * Returns the report data to send to the server\n     *\n     * @param exception object exception info\n     *\n     * @return {object}\n     */\n    getReportData: function (exception) {\n        if (exception && exception.stack && exception.stack.length) {\n            for (var i = 0; i < exception.stack.length; i++) {\n                var stack = exception.stack[i];\n                if (stack.context && stack.context.length) {\n                    for (var j = 0; j < stack.context.length; j++) {\n                        if (stack.context[j].length > 80) {\n                            stack.context[j] = stack.context[j].substring(-1, 75) + '//...';\n                        }\n                    }\n                }\n            }\n        }\n        var reportData = {\n            'server': CommonParams.get('server'),\n            'ajax_request': true,\n            'exception': exception,\n            'url': window.location.href,\n            'exception_type': 'js'\n        };\n        if (AJAX.scriptHandler.scripts.length > 0) {\n            reportData.scripts = AJAX.scriptHandler.scripts.map(function (script) {\n                return script;\n            });\n        }\n        return reportData;\n    },\n    /**\n     * Wraps given function in error reporting code and returns wrapped function\n     *\n     * @param {Function} func function to be wrapped\n     *\n     * @return {Function}\n     */\n    wrapFunction: function (func) {\n        if (!func.wrapped) {\n            var newFunc = function () {\n                try {\n                    return func.apply(this, arguments);\n                }\n                catch (x) {\n                    window.TraceKit.report(x);\n                }\n            };\n            // @ts-ignore\n            newFunc.wrapped = true;\n            // Set guid of wrapped function same as original function, so it can be removed\n            // See bug#4146 (problem with jquery draggable and sortable)\n            // @ts-ignore\n            newFunc.guid = func.guid = func.guid || newFunc.guid || $.guid++;\n            return newFunc;\n        }\n        else {\n            return func;\n        }\n    },\n    /**\n     * Automatically wraps the callback in AJAX.registerOnload\n     */\n    wrapAjaxOnloadCallback: function () {\n        var oldOnload = AJAX.registerOnload;\n        AJAX.registerOnload = function (file, func) {\n            var wrappedFunction = ErrorReport.wrapFunction(func);\n            oldOnload.call(this, file, wrappedFunction);\n        };\n    },\n    /**\n     * Automatically wraps the callback in $.fn.on\n     */\n    wrapJqueryOnCallback: function () {\n        var oldOn = $.fn.on;\n        $.fn.on = function () {\n            for (var i = 1; i <= 3; i++) {\n                if (typeof (arguments[i]) === 'function') {\n                    arguments[i] = ErrorReport.wrapFunction(arguments[i]);\n                    break;\n                }\n            }\n            return oldOn.apply(this, arguments);\n        };\n    },\n    /**\n     * Wraps the callback in AJAX.registerOnload automatically\n     */\n    setUpErrorReporting: function () {\n        ErrorReport.wrapAjaxOnloadCallback();\n        ErrorReport.wrapJqueryOnCallback();\n    }\n};\nAJAX.registerOnload('error_report.js', function () {\n    window.TraceKit.report.subscribe(ErrorReport.errorHandler);\n    ErrorReport.setUpErrorReporting();\n});\n"],"names":["$","AJAX","CommonParams","ajaxShowMessage","getImageTag","ErrorReport","lastException","errorReportData","keyDict","errorDataHandler","data","exception","success","error","report_setting","showErrorNotification","reportData","getReportData","postData","extend","post","message","errorHandler","JSON","stringify","name","extractExceptionName","get","showReportDialog","sendErrorReport","val","checked","modal","done","document","getElementById","remove","append","report_modal","$errorReportModal","on","off","html","key","Math","random","toString","substring","$div","window","Messages","strErrorOccurred","$buttons","buttonHtml","strShowReportDetails","settingsUrl","strChangeReportSettings","strIgnore","appendTo","body","createReportDialog","removeErrorNotification","e","arguments","length","undefined","preventDefault","fadeOut","reg","regexResult","exec","stack","i","context","j","location","href","scriptHandler","scripts","map","script","wrapFunction","func","wrapped","newFunc","apply","x","TraceKit","report","guid","wrapAjaxOnloadCallback","oldOnload","registerOnload","file","wrappedFunction","call","wrapJqueryOnCallback","oldOn","fn","setUpErrorReporting","subscribe"],"sourceRoot":""}