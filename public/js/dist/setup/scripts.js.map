{"version":3,"file":"setup/scripts.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./resources/js/src/setup/scripts.ts"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { Config } from '../modules/config.ts';\n/**\n * Functions used in Setup configuration forms\n */\n// show this window in top frame\nif (top !== self) {\n    // @ts-ignore\n    window.top.location.href = location;\n}\n// ------------------------------------------------------------------\n// Messages\n//\n$(function () {\n    if (window.location.protocol === 'https:') {\n        $('#no_https').remove();\n    }\n    else {\n        $('#no_https a').on('click', function () {\n            var oldLocation = window.location;\n            window.location.href = 'https:' + oldLocation.href.substring(oldLocation.protocol.length);\n            return false;\n        });\n    }\n    var hiddenMessages = $('.hiddenmessage');\n    if (hiddenMessages.length > 0) {\n        hiddenMessages.hide();\n        var link = $('#show_hidden_messages');\n        link.on('click', function (e) {\n            e.preventDefault();\n            hiddenMessages.show();\n            $(this).remove();\n        });\n        link.html(link.html().replace('#MSG_COUNT', hiddenMessages.length.toString()));\n        link.show();\n    }\n});\n// set document width\n$(function () {\n    var width = 0;\n    $('ul.tabs li').each(function () {\n        width += $(this).width() + 10;\n    });\n    var contentWidth = width;\n    width += 250;\n    $('body').css('min-width', width);\n    $('.tabs_contents').css('min-width', contentWidth);\n});\n//\n// END: Messages\n// ------------------------------------------------------------------\n// ------------------------------------------------------------------\n// Form validation and field operations\n//\n/**\n * Calls server-side validation procedures\n *\n * @param {Element} parent  input field in <fieldset> or <fieldset>\n * @param {string}  id      validator id\n * @param {object}  values  values hash {element1_id: value, ...}\n *\n * @return {boolean|void}\n */\nfunction ajaxValidate(parent, id, values) {\n    var $parent = $(parent);\n    // ensure that parent is a fieldset\n    if ($parent.attr('tagName') !== 'FIELDSET') {\n        $parent = $parent.closest('fieldset');\n        if ($parent.length === 0) {\n            return false;\n        }\n    }\n    if ($parent.data('ajax') !== null) {\n        $parent.data('ajax').abort();\n    }\n    $parent.data('ajax', $.ajax({\n        url: '../setup/index.php?route=/setup/validate',\n        cache: false,\n        type: 'POST',\n        data: {\n            token: $parent.closest('form').find('input[name=token]').val(),\n            id: id,\n            values: JSON.stringify(values)\n        },\n        success: function (response) {\n            if (response === null) {\n                return;\n            }\n            var error = {};\n            if (typeof response !== 'object') {\n                // @ts-ignore\n                error[$parent.id] = [response];\n            }\n            else if (typeof response.error !== 'undefined') {\n                // @ts-ignore\n                error[$parent.id] = [response.error];\n            }\n            else {\n                for (var key in response) {\n                    var value = response[key];\n                    error[key] = Array.isArray(value) ? value : [value];\n                }\n            }\n            Config.displayErrors(error);\n        },\n        complete: function () {\n            $parent.removeData('ajax');\n        }\n    }));\n    return true;\n}\n/**\n * Automatic form submission on change.\n */\n$(document).on('change', '.autosubmit', function (e) {\n    e.target.form.submit();\n});\n$.extend(true, window.validators, {\n    // field validators\n    field: {\n        /**\n         * hide_db field\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        hide_db: function (isKeyUp) {\n            if (!isKeyUp && this.value !== '') {\n                var data = {};\n                data[this.id] = this.value;\n                ajaxValidate(this, 'Servers/1/hide_db', data);\n            }\n            return true;\n        },\n        /**\n         * TrustedProxies field\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        TrustedProxies: function (isKeyUp) {\n            if (!isKeyUp && this.value !== '') {\n                var data = {};\n                data[this.id] = this.value;\n                ajaxValidate(this, 'TrustedProxies', data);\n            }\n            return true;\n        }\n    },\n    // fieldset validators\n    fieldset: {\n        /**\n         * Validates Server fieldset\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        Server: function (isKeyUp) {\n            if (!isKeyUp) {\n                ajaxValidate(this, 'Server', Config.getAllValues());\n            }\n            return true;\n        },\n        /**\n         * Validates Server_login_options fieldset\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        Server_login_options: function (isKeyUp) {\n            // @ts-ignore\n            return window.validators.fieldset.Server.apply(this, [isKeyUp]);\n        },\n        /**\n         * Validates Server_pmadb fieldset\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        Server_pmadb: function (isKeyUp) {\n            if (isKeyUp) {\n                return true;\n            }\n            var prefix = Config.getIdPrefix($(this).find('input'));\n            if ($('#' + prefix + 'pmadb').val() !== '') {\n                ajaxValidate(this, 'Server_pmadb', Config.getAllValues());\n            }\n            return true;\n        }\n    }\n});\n//\n// END: Form validation and field operations\n// ------------------------------------------------------------------\n// ------------------------------------------------------------------\n// User preferences allow/disallow UI\n//\n$(function () {\n    $('.userprefs-allow').on('click', function (e) {\n        if (this !== e.target) {\n            return;\n        }\n        var el = $(this).find('input');\n        if (el.prop('disabled')) {\n            return;\n        }\n        el.prop('checked', !el.prop('checked'));\n    });\n});\n//\n// END: User preferences allow/disallow UI\n// ------------------------------------------------------------------\n$(function () {\n    $('.delete-server').on('click', function (e) {\n        e.preventDefault();\n        var $this = $(this);\n        $.post($this.attr('href'), $this.attr('data-post'), function () {\n            window.location.replace('../setup/index.php?route=/setup');\n        });\n    });\n});\n"],"names":["$","Config","top","self","window","location","href","protocol","remove","on","oldLocation","substring","length","hiddenMessages","hide","link","e","preventDefault","show","html","replace","toString","width","each","contentWidth","css","ajaxValidate","parent","id","values","$parent","attr","closest","data","abort","ajax","url","cache","type","token","find","val","JSON","stringify","success","response","error","key","value","Array","isArray","displayErrors","complete","removeData","document","target","form","submit","extend","validators","field","hide_db","isKeyUp","TrustedProxies","fieldset","Server","getAllValues","Server_login_options","apply","Server_pmadb","prefix","getIdPrefix","el","prop","$this","post"],"sourceRoot":""}