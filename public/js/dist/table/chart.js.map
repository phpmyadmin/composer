{"version":3,"file":"table/chart.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./resources/js/src/table/chart.ts","webpack://phpmyadmin/./resources/js/src/modules/chart.ts"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from '../modules/ajax.ts';\nimport { checkSqlQuery, prepareForAjaxRequest } from '../modules/functions.ts';\nimport { ajaxRemoveMessage, ajaxShowMessage } from '../modules/ajax-message.ts';\nimport { escapeHtml } from '../modules/functions/escape.ts';\nimport { ColumnType, DataTable } from '../modules/chart.ts';\nvar chartData = {};\nvar tempChartTitle;\nvar currentChart = null;\nvar currentSettings = null;\nvar dateTimeCols = [];\nvar numericCols = [];\nfunction extractDate(dateString) {\n    var matches;\n    var match;\n    var dateTimeRegExp = /[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}/;\n    var dateRegExp = /[0-9]{4}-[0-9]{2}-[0-9]{2}/;\n    matches = dateTimeRegExp.exec(dateString);\n    if (matches !== null && matches.length > 0) {\n        match = matches[0];\n        return new Date(match.substring(0, 4), parseInt(match.substring(5, 7), 10) - 1, match.substring(8, 10), match.substring(11, 13), match.substring(14, 16), match.substring(17, 19));\n    }\n    else {\n        matches = dateRegExp.exec(dateString);\n        if (matches !== null && matches.length > 0) {\n            match = matches[0];\n            return new Date(match.substring(0, 4), parseInt(match.substring(5, 7), 10) - 1, match.substring(8, 10));\n        }\n    }\n    return null;\n}\nfunction queryChart(data, columnNames, settings) {\n    const queryChartCanvas = document.getElementById('queryChartCanvas');\n    if (!queryChartCanvas) {\n        return null;\n    }\n    var plotSettings = {\n        title: {\n            text: settings.title,\n            escapeHtml: true\n        },\n        grid: {\n            drawBorder: false,\n            shadow: false,\n            background: 'rgba(0,0,0,0)'\n        },\n        legend: {\n            show: true,\n            placement: 'outsideGrid',\n            location: 'e',\n            rendererOptions: {\n                numberColumns: 2\n            }\n        },\n        axes: {\n            xaxis: {\n                label: escapeHtml(settings.xaxisLabel)\n            },\n            yaxis: {\n                label: settings.yaxisLabel\n            }\n        },\n        stackSeries: settings.stackSeries\n    };\n    // create the data table and add columns\n    const dataTable = new DataTable();\n    if (settings.type === 'timeline') {\n        dataTable.addColumn(ColumnType.DATE, columnNames[settings.mainAxis]);\n    }\n    else if (settings.type === 'scatter') {\n        dataTable.addColumn(ColumnType.NUMBER, columnNames[settings.mainAxis]);\n    }\n    else {\n        dataTable.addColumn(ColumnType.STRING, columnNames[settings.mainAxis]);\n    }\n    var i;\n    var values = [];\n    if (settings.seriesColumn === null) {\n        $.each(settings.selectedSeries, function (index, element) {\n            dataTable.addColumn(ColumnType.NUMBER, columnNames[element]);\n        });\n        // set data to the data table\n        var columnsToExtract = [settings.mainAxis];\n        $.each(settings.selectedSeries, function (index, element) {\n            columnsToExtract.push(element);\n        });\n        var newRow;\n        var row;\n        var col;\n        for (i = 0; i < data.length; i++) {\n            row = data[i];\n            newRow = [];\n            for (var j = 0; j < columnsToExtract.length; j++) {\n                col = columnNames[columnsToExtract[j]];\n                if (j === 0) {\n                    if (settings.type === 'timeline') { // first column is date type\n                        newRow.push(extractDate(row[col]));\n                    }\n                    else if (settings.type === 'scatter') {\n                        newRow.push(parseFloat(row[col]));\n                    }\n                    else { // first column is string type\n                        newRow.push(row[col]);\n                    }\n                }\n                else { // subsequent columns are of type, number\n                    newRow.push(parseFloat(row[col]));\n                }\n            }\n            values.push(newRow);\n        }\n        dataTable.setData(values);\n    }\n    else {\n        var seriesNames = {};\n        var seriesNumber = 1;\n        var seriesColumnName = columnNames[settings.seriesColumn];\n        for (i = 0; i < data.length; i++) {\n            if (!seriesNames[data[i][seriesColumnName]]) {\n                seriesNames[data[i][seriesColumnName]] = seriesNumber;\n                seriesNumber++;\n            }\n        }\n        $.each(seriesNames, function (seriesName) {\n            dataTable.addColumn(ColumnType.NUMBER, seriesName);\n        });\n        var valueMap = {};\n        var xValue;\n        var value;\n        var mainAxisName = columnNames[settings.mainAxis];\n        var valueColumnName = columnNames[settings.valueColumn];\n        for (i = 0; i < data.length; i++) {\n            xValue = data[i][mainAxisName];\n            value = valueMap[xValue];\n            if (!value) {\n                value = [xValue];\n                valueMap[xValue] = value;\n            }\n            seriesNumber = seriesNames[data[i][seriesColumnName]];\n            value[seriesNumber] = parseFloat(data[i][valueColumnName]);\n        }\n        $.each(valueMap, function (index, value) {\n            values.push(value);\n        });\n        dataTable.setData(values);\n    }\n    let chartType = settings.type;\n    if (chartType === 'spline' || chartType === 'timeline' || chartType === 'area') {\n        chartType = 'line';\n    }\n    else if (chartType === 'column') {\n        chartType = 'bar';\n    }\n    const chartData = dataTable.getData();\n    const chartColumns = dataTable.getColumns();\n    const labels = chartData.map(row => row[0]);\n    const datasets = [];\n    for (let i = 1; i < chartColumns.length; i++) {\n        const data = chartData.map(function (row) {\n            if (settings.type === 'scatter') {\n                return { x: row[0], y: row[i] };\n            }\n            return row[i];\n        });\n        const dataset = { label: chartColumns[i].name, data: data };\n        if (settings.type === 'area') {\n            dataset.fill = 'start';\n        }\n        datasets.push(dataset);\n    }\n    const chartOptions = {\n        type: chartType,\n        data: { labels: labels, datasets: datasets },\n        options: {\n            animation: false,\n            plugins: {\n                legend: { position: 'right' },\n                title: { display: plotSettings.title.text !== '', text: plotSettings.title.text }\n            },\n            indexAxis: settings.type === 'bar' ? 'y' : 'x',\n            scales: {\n                x: {\n                    display: true,\n                    title: { display: plotSettings.axes.xaxis.label !== '', text: plotSettings.axes.xaxis.label },\n                    stacked: plotSettings.stackSeries,\n                },\n                y: {\n                    display: true,\n                    title: { display: plotSettings.axes.yaxis.label !== '', text: plotSettings.axes.yaxis.label },\n                    stacked: plotSettings.stackSeries,\n                }\n            }\n        }\n    };\n    if (settings.type === 'timeline') {\n        // @ts-ignore\n        chartOptions.options.scales.x.type = 'time';\n    }\n    // @ts-ignore\n    let queryChart = window.Chart.getChart('queryChartCanvas');\n    if (queryChart) {\n        queryChart.destroy();\n    }\n    // @ts-ignore\n    queryChart = new window.Chart(queryChartCanvas, chartOptions);\n    if (settings.type === 'spline') {\n        queryChart.options.elements.line.tension = 0.4;\n        queryChart.update('none');\n    }\n    return queryChart;\n}\nfunction drawChart() {\n    currentSettings.width = $('#resizer').width() - 20;\n    currentSettings.height = $('#resizer').height() - 20;\n    // TODO: a better way using .redraw() ?\n    if (currentChart !== null) {\n        currentChart.destroy();\n    }\n    var columnNames = [];\n    $('#chartXAxisSelect option').each(function () {\n        columnNames.push(escapeHtml($(this).text()));\n    });\n    try {\n        currentChart = queryChart(chartData, columnNames, currentSettings);\n        if (currentChart !== null) {\n            $('#saveChart').attr('href', currentChart.toBase64Image());\n        }\n    }\n    catch (err) {\n        ajaxShowMessage(err.message, false);\n    }\n}\nfunction getSelectedSeries() {\n    var val = $('#chartSeriesSelect').val() || [];\n    var ret = [];\n    $.each(val, function (i, v) {\n        ret.push(parseInt(v, 10));\n    });\n    return ret;\n}\nfunction onXAxisChange() {\n    var $xAxisSelect = $('#chartXAxisSelect');\n    currentSettings.mainAxis = parseInt($xAxisSelect.val(), 10);\n    if (dateTimeCols.indexOf(currentSettings.mainAxis) !== -1) {\n        document.getElementById('timelineChartType').classList.remove('d-none');\n    }\n    else {\n        document.getElementById('timelineChartType').classList.add('d-none');\n        if (currentSettings.type === 'timeline') {\n            $('#lineChartTypeRadio').prop('checked', true);\n            currentSettings.type = 'line';\n        }\n    }\n    if (numericCols.indexOf(currentSettings.mainAxis) !== -1) {\n        document.getElementById('scatterChartType').classList.remove('d-none');\n    }\n    else {\n        document.getElementById('scatterChartType').classList.add('d-none');\n        if (currentSettings.type === 'scatter') {\n            $('#lineChartTypeRadio').prop('checked', true);\n            currentSettings.type = 'line';\n        }\n    }\n    var xAxisTitle = $xAxisSelect.children('option:selected').text();\n    $('#xAxisLabelInput').val(xAxisTitle);\n    currentSettings.xaxisLabel = xAxisTitle;\n}\nfunction onDataSeriesChange() {\n    var $seriesSelect = $('#chartSeriesSelect');\n    currentSettings.selectedSeries = getSelectedSeries();\n    var yAxisTitle;\n    if (currentSettings.selectedSeries.length === 1) {\n        document.getElementById('pieChartType').classList.remove('d-none');\n        yAxisTitle = $seriesSelect.children('option:selected').text();\n    }\n    else {\n        document.getElementById('pieChartType').classList.add('d-none');\n        if (currentSettings.type === 'pie') {\n            $('#lineChartTypeRadio').prop('checked', true);\n            currentSettings.type = 'line';\n        }\n        yAxisTitle = window.Messages.strYValues;\n    }\n    $('#yAxisLabelInput').val(yAxisTitle);\n    currentSettings.yaxisLabel = yAxisTitle;\n}\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('table/chart.js', function () {\n    $('input[name=\"chartType\"]').off('click');\n    $('#barStackedCheckbox').off('click');\n    $('#seriesColumnCheckbox').off('click');\n    $('#chartTitleInput').off('focus').off('keyup').off('blur');\n    $('#chartXAxisSelect').off('change');\n    $('#chartSeriesSelect').off('change');\n    $('#chartSeriesColumnSelect').off('change');\n    $('#chartValueColumnSelect').off('change');\n    $('#xAxisLabelInput').off('keyup');\n    $('#yAxisLabelInput').off('keyup');\n    $('#resizer').off('resizestop');\n    $('#tblchartform').off('submit');\n});\nAJAX.registerOnload('table/chart.js', function () {\n    // handle chart type changes\n    $('input[name=\"chartType\"]').on('click', function () {\n        var type = currentSettings.type = $(this).val();\n        if (type === 'bar' || type === 'column' || type === 'area') {\n            document.getElementById('barStacked').classList.remove('d-none');\n        }\n        else {\n            $('#barStackedCheckbox').prop('checked', false);\n            $.extend(true, currentSettings, { stackSeries: false });\n            document.getElementById('barStacked').classList.add('d-none');\n        }\n        drawChart();\n    });\n    // handle chosing alternative data format\n    $('#seriesColumnCheckbox').on('click', function () {\n        var $seriesColumn = $('#chartSeriesColumnSelect');\n        var $valueColumn = $('#chartValueColumnSelect');\n        var $chartSeries = $('#chartSeriesSelect');\n        if ($(this).is(':checked')) {\n            $seriesColumn.prop('disabled', false);\n            $valueColumn.prop('disabled', false);\n            $chartSeries.prop('disabled', true);\n            currentSettings.seriesColumn = parseInt($seriesColumn.val(), 10);\n            currentSettings.valueColumn = parseInt($valueColumn.val(), 10);\n        }\n        else {\n            $seriesColumn.prop('disabled', true);\n            $valueColumn.prop('disabled', true);\n            $chartSeries.prop('disabled', false);\n            currentSettings.seriesColumn = null;\n            currentSettings.valueColumn = null;\n        }\n        drawChart();\n    });\n    // handle stacking for bar, column and area charts\n    $('#barStackedCheckbox').on('click', function () {\n        if ($(this).is(':checked')) {\n            $.extend(true, currentSettings, { stackSeries: true });\n        }\n        else {\n            $.extend(true, currentSettings, { stackSeries: false });\n        }\n        drawChart();\n    });\n    // handle changes in chart title\n    $('#chartTitleInput')\n        .on('focus', function () {\n        tempChartTitle = $(this).val();\n    })\n        .on('keyup', function () {\n        currentSettings.title = $('#chartTitleInput').val();\n        drawChart();\n    })\n        .on('blur', function () {\n        if ($(this).val() !== tempChartTitle) {\n            drawChart();\n        }\n    });\n    // handle changing the x-axis\n    $('#chartXAxisSelect').on('change', function () {\n        onXAxisChange();\n        drawChart();\n    });\n    // handle changing the selected data series\n    $('#chartSeriesSelect').on('change', function () {\n        onDataSeriesChange();\n        drawChart();\n    });\n    // handle changing the series column\n    $('#chartSeriesColumnSelect').on('change', function () {\n        currentSettings.seriesColumn = parseInt($(this).val(), 10);\n        drawChart();\n    });\n    // handle changing the value column\n    $('#chartValueColumnSelect').on('change', function () {\n        currentSettings.valueColumn = parseInt($(this).val(), 10);\n        drawChart();\n    });\n    // handle manual changes to the chart x-axis labels\n    $('#xAxisLabelInput').on('keyup', function () {\n        currentSettings.xaxisLabel = $(this).val();\n        drawChart();\n    });\n    // handle manual changes to the chart y-axis labels\n    $('#yAxisLabelInput').on('keyup', function () {\n        currentSettings.yaxisLabel = $(this).val();\n        drawChart();\n    });\n    // handler for ajax form submission\n    $('#tblchartform').on('submit', function () {\n        var $form = $(this);\n        if (window.codeMirrorEditor) {\n            // @ts-ignore\n            $form[0].elements.sql_query.value = window.codeMirrorEditor.getValue();\n        }\n        if (!checkSqlQuery($form[0])) {\n            return false;\n        }\n        var $msgbox = ajaxShowMessage();\n        prepareForAjaxRequest($form);\n        $.post($form.attr('action'), $form.serialize(), function (data) {\n            if (typeof data !== 'undefined' &&\n                data.success === true &&\n                typeof data.chartData !== 'undefined') {\n                chartData = JSON.parse(data.chartData);\n                drawChart();\n                ajaxRemoveMessage($msgbox);\n            }\n            else {\n                ajaxShowMessage(data.error, false);\n            }\n        }, 'json'); // end $.post()\n        return false;\n    });\n    // from jQuery UI\n    $('#resizer').resizable({\n        minHeight: 240,\n        minWidth: 300\n    })\n        .width($('#div_view_options').width() - 50)\n        .trigger('resizestop');\n    currentSettings = {\n        type: 'line',\n        width: $('#resizer').width() - 20,\n        height: $('#resizer').height() - 20,\n        xaxisLabel: $('#xAxisLabelInput').val(),\n        yaxisLabel: $('#yAxisLabelInput').val(),\n        title: $('#chartTitleInput').val(),\n        stackSeries: false,\n        mainAxis: parseInt($('#chartXAxisSelect').val(), 10),\n        selectedSeries: getSelectedSeries(),\n        seriesColumn: null\n    };\n    var vals = $('input[name=\"dateTimeCols\"]').val().split(' ');\n    $.each(vals, function (i, v) {\n        dateTimeCols.push(parseInt(v, 10));\n    });\n    vals = $('input[name=\"numericCols\"]').val().split(' ');\n    $.each(vals, function (i, v) {\n        numericCols.push(parseInt(v, 10));\n    });\n    onXAxisChange();\n    onDataSeriesChange();\n    $('#tblchartform').trigger('submit');\n});\n","/**\n * Column type enumeration\n */\nexport const ColumnType = {\n    STRING: 'string',\n    NUMBER: 'number',\n    BOOLEAN: 'boolean',\n    DATE: 'date'\n};\n/**\n * The data table contains column information and data for the chart.\n */\nexport const DataTable = function () {\n    const columns = [];\n    let data = null;\n    this.addColumn = function (type, name) {\n        columns.push({\n            'type': type,\n            'name': name\n        });\n    };\n    this.getColumns = function () {\n        return columns;\n    };\n    this.setData = function (rows) {\n        data = rows;\n        fillMissingValues();\n    };\n    this.getData = function () {\n        return data;\n    };\n    const fillMissingValues = function () {\n        if (columns.length === 0) {\n            throw new Error('Set columns first');\n        }\n        let row;\n        for (let i = 0; i < data.length; i++) {\n            row = data[i];\n            if (row.length > columns.length) {\n                row.splice(columns.length - 1, row.length - columns.length);\n            }\n            else if (row.length < columns.length) {\n                for (let j = row.length; j < columns.length; j++) {\n                    row.push(null);\n                }\n            }\n        }\n    };\n};\n"],"names":["$","AJAX","checkSqlQuery","prepareForAjaxRequest","ajaxRemoveMessage","ajaxShowMessage","escapeHtml","ColumnType","DataTable","chartData","tempChartTitle","currentChart","currentSettings","dateTimeCols","numericCols","extractDate","dateString","matches","match","dateTimeRegExp","dateRegExp","exec","length","Date","substring","parseInt","queryChart","data","columnNames","settings","queryChartCanvas","document","getElementById","plotSettings","title","text","grid","drawBorder","shadow","background","legend","show","placement","location","rendererOptions","numberColumns","axes","xaxis","label","xaxisLabel","yaxis","yaxisLabel","stackSeries","dataTable","type","addColumn","DATE","mainAxis","NUMBER","STRING","i","values","seriesColumn","each","selectedSeries","index","element","columnsToExtract","push","newRow","row","col","j","parseFloat","setData","seriesNames","seriesNumber","seriesColumnName","seriesName","valueMap","xValue","value","mainAxisName","valueColumnName","valueColumn","chartType","getData","chartColumns","getColumns","labels","map","datasets","x","y","dataset","name","fill","chartOptions","options","animation","plugins","position","display","indexAxis","scales","stacked","window","Chart","getChart","destroy","elements","line","tension","update","drawChart","width","height","attr","toBase64Image","err","message","getSelectedSeries","val","ret","v","onXAxisChange","$xAxisSelect","indexOf","classList","remove","add","prop","xAxisTitle","children","onDataSeriesChange","$seriesSelect","yAxisTitle","Messages","strYValues","registerTeardown","off","registerOnload","on","extend","$seriesColumn","$valueColumn","$chartSeries","is","$form","codeMirrorEditor","sql_query","getValue","$msgbox","post","serialize","success","JSON","parse","error","resizable","minHeight","minWidth","trigger","vals","split","BOOLEAN","columns","rows","fillMissingValues","Error","splice"],"sourceRoot":""}