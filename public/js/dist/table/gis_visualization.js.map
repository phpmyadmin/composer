{"version":3,"file":"table/gis_visualization.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./resources/js/src/table/gis_visualization.ts"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from '../modules/ajax.ts';\nimport { escapeHtml } from '../modules/functions/escape.ts';\n/**\n * @fileoverview    functions used for visualizing GIS data\n *\n * @requires    jquery\n * @requires    jQueryUI\n */\nclass GisVisualization {\n    target;\n    constructor(target) {\n        this.target = target;\n    }\n    /**\n     * Make this visualization visible\n     */\n    show() {\n        $(this.target).show();\n    }\n    /**\n     * Hide this visualization\n     */\n    hide() {\n        $(this.target).hide();\n    }\n    /**\n     * Do cleanup when it is no longer needed\n     */\n    dispose() {\n        $(this.target).empty();\n    }\n}\nconst DEFAULT_SCALE = 1.0;\nconst ZOOM_FACTOR = 1.5;\nclass SvgVisualization extends GisVisualization {\n    svgEl;\n    originalWidth;\n    originalHeight;\n    x = 0;\n    y = 0;\n    scale = DEFAULT_SCALE;\n    dragX = 0;\n    dragY = 0;\n    width;\n    height;\n    boundOnMouseWheel;\n    boundOnDragStart;\n    boundOnDrag;\n    boundOnPlotDblClick;\n    boundOnZoomInClick;\n    boundOnZoomWorldClick;\n    boundOnZoomOutClick;\n    boundOnLeftArrowClick;\n    boundOnRightArrowClick;\n    boundOnUpArrowClick;\n    boundOnDownArrowClick;\n    boundOnMouseMove;\n    boundOnMouseLeave;\n    boundOnResize;\n    boundOnButtonDragStart;\n    /**\n     * @param {HTMLElement} target\n     */\n    constructor(target) {\n        super(target);\n        this.svgEl = $(this.target).find('svg').get(0);\n        this.originalWidth = $(this.svgEl).width();\n        this.originalHeight = $(this.svgEl).height();\n        this.width = this.originalWidth;\n        this.height = this.originalHeight;\n        this.boundOnMouseWheel = this.onMouseWheel.bind(this);\n        this.boundOnDragStart = this.onDragStart.bind(this);\n        this.boundOnDrag = this.onDrag.bind(this);\n        this.boundOnPlotDblClick = this.onPlotDblClick.bind(this);\n        this.boundOnZoomInClick = this.onZoomInClick.bind(this);\n        this.boundOnZoomWorldClick = this.onZoomWorldClick.bind(this);\n        this.boundOnZoomOutClick = this.onZoomOutClick.bind(this);\n        this.boundOnLeftArrowClick = this.onLeftArrowClick.bind(this);\n        this.boundOnRightArrowClick = this.onRightArrowClick.bind(this);\n        this.boundOnUpArrowClick = this.onUpArrowClick.bind(this);\n        this.boundOnDownArrowClick = this.onDownArrowClick.bind(this);\n        this.boundOnMouseMove = this.onMouseMove.bind(this);\n        this.boundOnMouseLeave = this.onMouseLeave.bind(this);\n        this.boundOnResize = this.onResize.bind(this);\n        this.boundOnButtonDragStart = () => false;\n        this.addControls();\n        this.bindEvents();\n    }\n    /**\n     * Adds controls for zooming and panning.\n     */\n    addControls() {\n        $(this.target).append(\n        // pan arrows\n        '<img class=\"button left_arrow\" src=\"' + window.themeImagePath + 'west-mini.png\">', '<img class=\"button right_arrow\" src=\"' + window.themeImagePath + 'east-mini.png\">', '<img class=\"button up_arrow\" src=\"' + window.themeImagePath + 'north-mini.png\">', '<img class=\"button down_arrow\" src=\"' + window.themeImagePath + 'south-mini.png\">', \n        // zoom controls\n        '<img class=\"button zoom_in\" src=\"' + window.themeImagePath + 'zoom-plus-mini.png\">', '<img class=\"button zoom_world\" src=\"' + window.themeImagePath + 'zoom-world-mini.png\">', '<img class=\"button zoom_out\" src=\"' + window.themeImagePath + 'zoom-minus-mini.png\">');\n    }\n    /**\n     * Zooms and pans the visualization.\n     */\n    zoomAndPan() {\n        $('g', this.svgEl)\n            .first()\n            .attr('transform', 'translate(' + this.x + ', ' + this.y + ') scale(' + this.scale + ')');\n        $('circle.vector', this.svgEl)\n            .attr('r', 3 / this.scale)\n            .attr('stroke-width', 2 / this.scale);\n        $('polyline.vector', this.svgEl).attr('stroke-width', 2 / this.scale);\n        $('path.vector', this.svgEl).attr('stroke-width', 0.5 / this.scale);\n    }\n    /**\n     * Resizes the GIS visualization to fit into the space available.\n     */\n    resize() {\n        const visWidth = Math.ceil($(this.target).width());\n        const visHeight = Math.ceil($(this.target).height());\n        this.x += (visWidth - this.width) / 2;\n        this.y += (visHeight - this.height) / 2;\n        this.width = visWidth;\n        this.height = visHeight;\n        this.svgEl.setAttribute('width', String(visWidth));\n        this.svgEl.setAttribute('height', String(visHeight));\n        this.zoomAndPan();\n    }\n    reset() {\n        this.scale = DEFAULT_SCALE;\n        this.x = 0;\n        this.y = 0;\n        this.width = this.originalWidth;\n        this.height = this.originalHeight;\n        this.resize();\n    }\n    getRelativeCoords(event) {\n        const position = $(this.target).offset();\n        return {\n            x: event.pageX - position.left,\n            y: event.pageY - position.top\n        };\n    }\n    /**\n     * @param {WheelEvent} event\n     */\n    onMouseWheel(event) {\n        if (event.deltaY === 0) {\n            return;\n        }\n        event.preventDefault();\n        const relCoords = this.getRelativeCoords(event);\n        const factor = event.deltaY > 0 ? 1 / ZOOM_FACTOR : ZOOM_FACTOR;\n        // zoom\n        this.scale *= factor;\n        // zooming keeping the position under mouse pointer unmoved.\n        this.x = relCoords.x - (relCoords.x - this.x) * factor;\n        this.y = relCoords.y - (relCoords.y - this.y) * factor;\n        this.zoomAndPan();\n    }\n    show() {\n        super.show();\n        this.resize();\n    }\n    dispose() {\n        this.unbindEvents();\n        super.dispose();\n    }\n    bindEvents() {\n        $(this.svgEl)\n            .on('dblclick', this.boundOnPlotDblClick)\n            .on('dragstart', this.boundOnDragStart)\n            .on('drag', this.boundOnDrag)\n            .on('mousemove', '.vector', this.boundOnMouseMove)\n            .on('mouseleave', '.vector', this.boundOnMouseLeave)\n            .draggable({\n            cursor: 'move',\n            // Give a fake element to be used for dragging display\n            helper: () => document.createElement('div'),\n        });\n        this.svgEl.addEventListener('wheel', this.boundOnMouseWheel, { passive: false });\n        $(this.target)\n            .on('dragstart', '.button', this.boundOnButtonDragStart)\n            .on('click', '.zoom_in', this.boundOnZoomInClick)\n            .on('click', '.zoom_world', this.boundOnZoomWorldClick)\n            .on('click', '.zoom_out', this.boundOnZoomOutClick)\n            .on('click', '.left_arrow', this.boundOnLeftArrowClick)\n            .on('click', '.right_arrow', this.boundOnRightArrowClick)\n            .on('click', '.up_arrow', this.boundOnUpArrowClick)\n            .on('click', '.down_arrow', this.boundOnDownArrowClick);\n        $(window).on('resize', this.boundOnResize);\n    }\n    unbindEvents() {\n        $(this.svgEl)\n            .off('dblclick', this.boundOnPlotDblClick)\n            .off('dragstart', this.boundOnDragStart)\n            .off('drag', this.boundOnDrag)\n            .off('mousemove', '.vector', this.boundOnMouseMove)\n            .off('mouseleave', '.vector', this.boundOnMouseLeave)\n            .draggable('destroy');\n        this.svgEl.removeEventListener('wheel', this.boundOnMouseWheel);\n        $(this.target)\n            .off('dragstart', '.button', this.boundOnButtonDragStart)\n            .off('click', '.zoom_in', this.boundOnZoomInClick)\n            .off('click', '.zoom_world', this.boundOnZoomWorldClick)\n            .off('click', '.zoom_out', this.boundOnZoomOutClick)\n            .off('click', '.left_arrow', this.boundOnLeftArrowClick)\n            .off('click', '.right_arrow', this.boundOnRightArrowClick)\n            .off('click', '.up_arrow', this.boundOnUpArrowClick)\n            .off('click', '.down_arrow'), this.boundOnDownArrowClick;\n        $(window).off('resize', this.boundOnResize);\n    }\n    onDragStart(event, dd) {\n        this.dragX = dd.offset.left;\n        this.dragY = dd.offset.top;\n    }\n    onDrag(event, dd) {\n        this.x += Math.round(dd.offset.left - this.dragX);\n        this.dragX = dd.offset.left;\n        this.y += Math.round(dd.offset.top - this.dragY);\n        this.dragY = dd.offset.top;\n        this.zoomAndPan();\n    }\n    onPlotDblClick(event) {\n        this.scale *= ZOOM_FACTOR;\n        // zooming in keeping the position under mouse pointer unmoved.\n        const relCoords = this.getRelativeCoords(event);\n        this.x = relCoords.x - (relCoords.x - this.x) * ZOOM_FACTOR;\n        this.y = relCoords.y - (relCoords.y - this.y) * ZOOM_FACTOR;\n        this.zoomAndPan();\n    }\n    onZoomInClick(event) {\n        event.preventDefault();\n        // zoom in\n        this.scale *= ZOOM_FACTOR;\n        // zooming in keeping the center unmoved.\n        this.x = this.width / 2 - (this.width / 2 - this.x) * ZOOM_FACTOR;\n        this.y = this.height / 2 - (this.height / 2 - this.y) * ZOOM_FACTOR;\n        this.zoomAndPan();\n    }\n    onZoomWorldClick(event) {\n        event.preventDefault();\n        this.reset();\n    }\n    onZoomOutClick(event) {\n        event.preventDefault();\n        // zoom out\n        this.scale /= ZOOM_FACTOR;\n        // zooming out keeping the center unmoved.\n        this.x = this.width / 2 - (this.width / 2 - this.x) / ZOOM_FACTOR;\n        this.y = this.height / 2 - (this.height / 2 - this.y) / ZOOM_FACTOR;\n        this.zoomAndPan();\n    }\n    onLeftArrowClick(event) {\n        event.preventDefault();\n        this.x += 100;\n        this.zoomAndPan();\n    }\n    onRightArrowClick(event) {\n        event.preventDefault();\n        this.x -= 100;\n        this.zoomAndPan();\n    }\n    onUpArrowClick(event) {\n        event.preventDefault();\n        this.y += 100;\n        this.zoomAndPan();\n    }\n    onDownArrowClick(event) {\n        event.preventDefault();\n        this.y -= 100;\n        this.zoomAndPan();\n    }\n    /**\n     * Detect the mousemove event and show tooltips.\n     */\n    onMouseMove(event) {\n        $('#tooltip').remove();\n        const target = event.target;\n        const contents = target.getAttribute('data-label').trim();\n        if (contents === '') {\n            return;\n        }\n        $('<div id=\"tooltip\">' + escapeHtml(contents) + '</div>')\n            .css({\n            top: event.pageY + 10,\n            left: event.pageX + 10,\n        })\n            .appendTo('body')\n            .fadeIn(200);\n    }\n    /**\n     * Detect the mouseout event and hide tooltips.\n     */\n    onMouseLeave() {\n        $('#tooltip').remove();\n    }\n    onResize() {\n        this.resize();\n    }\n}\nclass OlVisualization extends GisVisualization {\n    olMap = undefined;\n    data;\n    /**\n     * @param {function(HTMLElement): ol.Map} initFn\n     */\n    constructor(target, data) {\n        super(target);\n        this.data = data;\n    }\n    drawOpenLayers() {\n        if (typeof window.ol === 'undefined') {\n            return undefined;\n        }\n        const olCss = 'js/vendor/openlayers/theme/ol.css';\n        if (!document.querySelector('link[rel=\"stylesheet\"][href=\"' + olCss + '\"]')) {\n            const link = document.createElement('link');\n            link.rel = 'stylesheet';\n            link.type = 'text/css';\n            link.href = olCss;\n            document.head.appendChild(link);\n        }\n        const vectorSource = new window.ol.source.Vector({\n            features: getFeaturesFromOpenLayersData(this.data),\n        });\n        const map = new window.ol.Map({\n            target: this.target,\n            layers: [\n                new window.ol.layer.Tile({ source: new window.ol.source.OSM() }),\n                new window.ol.layer.Vector({ source: vectorSource }),\n            ],\n            view: new window.ol.View({ center: [0, 0], zoom: 4 }),\n            controls: [\n                new window.ol.control.MousePosition({\n                    coordinateFormat: window.ol.coordinate.createStringXY(4),\n                    projection: 'EPSG:4326'\n                }),\n                new window.ol.control.Zoom,\n                new window.ol.control.Attribution\n            ]\n        });\n        const extent = vectorSource.getExtent();\n        if (!window.ol.extent.isEmpty(extent)) {\n            map.getView().fit(extent, { padding: [20, 20, 20, 20] });\n        }\n        return map;\n    }\n    show() {\n        super.show();\n        if (this.olMap) {\n            this.olMap.updateSize();\n        }\n        else {\n            this.olMap = this.drawOpenLayers();\n        }\n    }\n    dispose() {\n        if (this.olMap) {\n            // Removes ol.Map's resize listener from window\n            this.olMap.setTarget(null);\n            this.olMap = undefined;\n        }\n        super.dispose();\n    }\n}\nfunction getFeaturesFromOpenLayersData(geometries) {\n    let features = [];\n    for (const geometry of geometries) {\n        if (geometry.isCollection) {\n            features = features.concat(getFeaturesFromOpenLayersData(geometry.geometries));\n            continue;\n        }\n        let olGeometry = null;\n        const style = {};\n        if (geometry.geometry.type === 'LineString') {\n            olGeometry = new window.ol.geom.LineString(geometry.geometry.coordinates);\n            style.stroke = new window.ol.style.Stroke(geometry.style.stroke);\n        }\n        else if (geometry.geometry.type === 'MultiLineString') {\n            olGeometry = new window.ol.geom.MultiLineString(geometry.geometry.coordinates);\n            style.stroke = new window.ol.style.Stroke(geometry.style.stroke);\n        }\n        else if (geometry.geometry.type === 'MultiPoint') {\n            olGeometry = new window.ol.geom.MultiPoint(geometry.geometry.coordinates);\n            style.image = new window.ol.style.Circle({\n                fill: new window.ol.style.Fill(geometry.style.circle.fill),\n                stroke: new window.ol.style.Stroke(geometry.style.circle.stroke),\n                radius: geometry.style.circle.radius,\n            });\n        }\n        else if (geometry.geometry.type === 'MultiPolygon') {\n            olGeometry = new window.ol.geom.MultiPolygon(geometry.geometry.coordinates);\n            style.fill = new window.ol.style.Fill(geometry.style.fill);\n            style.stroke = new window.ol.style.Stroke(geometry.style.stroke);\n        }\n        else if (geometry.geometry.type === 'Point') {\n            olGeometry = new window.ol.geom.Point(geometry.geometry.coordinates);\n            style.image = new window.ol.style.Circle({\n                fill: new window.ol.style.Fill(geometry.style.circle.fill),\n                stroke: new window.ol.style.Stroke(geometry.style.circle.stroke),\n                radius: geometry.style.circle.radius,\n            });\n        }\n        else if (geometry.geometry.type === 'Polygon') {\n            olGeometry = new window.ol.geom.Polygon(geometry.geometry.coordinates);\n            style.fill = new window.ol.style.Fill(geometry.style.fill);\n            style.stroke = new window.ol.style.Stroke(geometry.style.stroke);\n        }\n        else {\n            throw new Error();\n        }\n        if (geometry.geometry.srid !== 3857) {\n            const source = 'EPSG:' + (geometry.geometry.srid !== 0 ? geometry.geometry.srid : 4326);\n            const sourceProj = window.ol.getProjection(source);\n            if (sourceProj) {\n                olGeometry = olGeometry.transform(source, 'EPSG:3857');\n            }\n        }\n        if (geometry.style.text) {\n            style.text = new window.ol.style.Text(geometry.style.text);\n        }\n        const feature = new window.ol.Feature(olGeometry);\n        feature.setStyle(new window.ol.style.Style(style));\n        features.push(feature);\n    }\n    return features;\n}\nclass GisVisualizationController {\n    svgVis = undefined;\n    olVis = undefined;\n    boundOnChoiceChange;\n    olData;\n    constructor(olData) {\n        this.boundOnChoiceChange = this.onChoiceChange.bind(this);\n        this.olData = olData;\n        $(document).on('click', '#useOsmAsBaseLayerSwitch', this.boundOnChoiceChange);\n        if (typeof window.ol === 'undefined') {\n            $('#useOsmAsBaseLayerSwitch, #useOsmAsBaseLayerSwitchLabel').hide();\n            $('#useOsmAsBaseLayerSwitch').prop('checked', false);\n        }\n        this.selectVisualization();\n    }\n    onChoiceChange() {\n        this.selectVisualization();\n    }\n    /**\n     * Initially loads either SVG or OSM visualization based on the choice.\n     */\n    selectVisualization() {\n        const showOl = $('#useOsmAsBaseLayerSwitch').prop('checked') === true;\n        const oldVis = showOl ? this.svgVis : this.olVis;\n        if (oldVis) {\n            oldVis.hide();\n        }\n        let newVis;\n        if (showOl) {\n            if (!this.olVis) {\n                this.olVis = new OlVisualization($('#visualization-placeholder > .visualization-target-ol').get(0), this.olData);\n            }\n            newVis = this.olVis;\n        }\n        else {\n            if (!this.svgVis) {\n                this.svgVis = new SvgVisualization($('#visualization-placeholder > .visualization-target-svg').get(0));\n            }\n            newVis = this.svgVis;\n        }\n        newVis.show();\n    }\n    /**\n     * Cleanup events when no longer needed\n     */\n    dispose() {\n        $(document).off('click', '#useOsmAsBaseLayerSwitch');\n        if (this.svgVis) {\n            this.svgVis.dispose();\n        }\n        if (this.olVis) {\n            this.olVis.dispose();\n        }\n    }\n}\nwindow.GisVisualizationController = GisVisualizationController;\nlet visualizationController;\n/**\n * Ajax handlers for GIS visualization page\n *\n * Actions Ajaxified here:\n * Create visualization for the gis data\n */\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('table/gis_visualization.js', function () {\n    if (visualizationController) {\n        visualizationController.dispose();\n        visualizationController = undefined;\n    }\n});\nAJAX.registerOnload('table/gis_visualization.js', function () {\n    // If we are in GIS visualization, initialize it\n    if ($('#gis_div').length > 0) {\n        visualizationController = new GisVisualizationController(JSON.parse($('#visualization-placeholder').attr('data-ol-data')));\n    }\n});\n"],"names":["$","AJAX","escapeHtml","GisVisualization","constructor","target","show","hide","dispose","empty","DEFAULT_SCALE","ZOOM_FACTOR","SvgVisualization","_defineProperty","svgEl","find","get","originalWidth","width","originalHeight","height","boundOnMouseWheel","onMouseWheel","bind","boundOnDragStart","onDragStart","boundOnDrag","onDrag","boundOnPlotDblClick","onPlotDblClick","boundOnZoomInClick","onZoomInClick","boundOnZoomWorldClick","onZoomWorldClick","boundOnZoomOutClick","onZoomOutClick","boundOnLeftArrowClick","onLeftArrowClick","boundOnRightArrowClick","onRightArrowClick","boundOnUpArrowClick","onUpArrowClick","boundOnDownArrowClick","onDownArrowClick","boundOnMouseMove","onMouseMove","boundOnMouseLeave","onMouseLeave","boundOnResize","onResize","boundOnButtonDragStart","addControls","bindEvents","append","window","themeImagePath","zoomAndPan","first","attr","x","y","scale","resize","visWidth","Math","ceil","visHeight","setAttribute","String","reset","getRelativeCoords","event","position","offset","pageX","left","pageY","top","deltaY","preventDefault","relCoords","factor","unbindEvents","on","draggable","cursor","helper","document","createElement","addEventListener","passive","off","removeEventListener","dd","dragX","dragY","round","remove","contents","getAttribute","trim","css","appendTo","fadeIn","OlVisualization","data","undefined","drawOpenLayers","ol","olCss","querySelector","link","rel","type","href","head","appendChild","vectorSource","source","Vector","features","getFeaturesFromOpenLayersData","map","Map","layers","layer","Tile","OSM","view","View","center","zoom","controls","control","MousePosition","coordinateFormat","coordinate","createStringXY","projection","Zoom","Attribution","extent","getExtent","isEmpty","getView","fit","padding","olMap","updateSize","setTarget","geometries","geometry","isCollection","concat","olGeometry","style","geom","LineString","coordinates","stroke","Stroke","MultiLineString","MultiPoint","image","Circle","fill","Fill","circle","radius","MultiPolygon","Point","Polygon","Error","srid","sourceProj","getProjection","transform","text","Text","feature","Feature","setStyle","Style","push","GisVisualizationController","olData","boundOnChoiceChange","onChoiceChange","prop","selectVisualization","showOl","oldVis","svgVis","olVis","newVis","visualizationController","registerTeardown","registerOnload","length","JSON","parse"],"sourceRoot":""}