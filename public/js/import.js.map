{"version":3,"file":"import.js","mappings":"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","sources":["webpack://phpmyadmin/./resources/js/import.ts","webpack://phpmyadmin/external var \"jQuery\""],"sourcesContent":["import $ from 'jquery';\nimport { AJAX } from './modules/ajax.ts';\nimport { formatBytes } from './modules/functions.ts';\nimport { Navigation } from './modules/navigation.ts';\nimport { CommonParams } from './modules/common.ts';\nimport { ajaxShowMessage } from './modules/ajax-message.ts';\n/**\n * Functions used in the import tab\n *\n */\n/**\n * Toggles the hiding and showing of each plugin's options\n * according to the currently selected plugin from the dropdown list\n */\nfunction changePluginOpts() {\n    $('#format_specific_opts').find('div.format_specific_options').each(function () {\n        $(this).hide();\n    });\n    var selectedPluginName = $('#plugins').find('option:selected').val();\n    $('#' + selectedPluginName + '_options').fadeIn('slow');\n    const importNotification = document.getElementById('import_notification');\n    if (importNotification) {\n        importNotification.innerText = '';\n        if (selectedPluginName === 'csv') {\n            importNotification.innerHTML = '<div class=\"alert alert-info mb-0 mt-3\" role=\"alert\">' + window.Messages.strImportCSV + '</div>';\n        }\n    }\n}\n/**\n * Toggles the hiding and showing of each plugin's options and sets the selected value\n * in the plugin dropdown list according to the format of the selected file\n *\n * @param {string} fname\n */\nfunction matchFile(fname) {\n    var fnameArray = fname.toLowerCase().split('.');\n    var len = fnameArray.length;\n    if (len !== 0) {\n        var extension = fnameArray[len - 1];\n        if (extension === 'gz' || extension === 'bz2' || extension === 'zip') {\n            len--;\n        }\n        // Only toggle if the format of the file can be imported\n        if ($('select[name=\\'format\\'] option').filterByValue(fnameArray[len - 1]).length === 1) {\n            $('select[name=\\'format\\'] option').filterByValue(fnameArray[len - 1]).prop('selected', true);\n            changePluginOpts();\n        }\n    }\n}\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('import.js', function () {\n    $('#plugins').off('change');\n    $('#input_import_file').off('change');\n    $('#select_local_import_file').off('change');\n    $('#input_import_file').off('change').off('focus');\n    $('#select_local_import_file').off('focus');\n    $('#text_csv_enclosed').add('#text_csv_escaped').off('keyup');\n    $('#importmain #buttonGo').off('click');\n});\nAJAX.registerOnload('import.js', function () {\n    // import_file_form validation.\n    $(document).on('submit', '#import_file_form', function () {\n        var radioLocalImport = $('#localFileTab');\n        var radioImport = $('#uploadFileTab');\n        var fileMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\"> ' + window.Messages.strImportDialogMessage + '</div>';\n        var wrongTblNameMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\">' + window.Messages.strTableNameDialogMessage + '</div>';\n        var wrongDBNameMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\">' + window.Messages.strDBNameDialogMessage + '</div>';\n        if (radioLocalImport.length !== 0) {\n            // remote upload.\n            if (radioImport.hasClass('active') && $('#input_import_file').val() === '') {\n                $('#input_import_file').trigger('focus');\n                ajaxShowMessage(fileMsg, false);\n                return false;\n            }\n            if (radioLocalImport.hasClass('active')) {\n                if ($('#select_local_import_file').length === 0) {\n                    ajaxShowMessage('<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\"> ' + window.Messages.strNoImportFile + ' </div>', false);\n                    return false;\n                }\n                if ($('#select_local_import_file').val() === '') {\n                    $('#select_local_import_file').trigger('focus');\n                    ajaxShowMessage(fileMsg, false);\n                    return false;\n                }\n            }\n        }\n        else {\n            // local upload.\n            if ($('#input_import_file').val() === '') {\n                $('#input_import_file').trigger('focus');\n                ajaxShowMessage(fileMsg, false);\n                return false;\n            }\n            if ($('#text_csv_new_tbl_name').length > 0) {\n                var newTblName = $('#text_csv_new_tbl_name').val();\n                if (newTblName.length > 0 && newTblName.trim().length === 0) {\n                    ajaxShowMessage(wrongTblNameMsg, false);\n                    return false;\n                }\n            }\n            if ($('#text_csv_new_db_name').length > 0) {\n                var newDBName = $('#text_csv_new_db_name').val();\n                if (newDBName.length > 0 && newDBName.trim().length === 0) {\n                    ajaxShowMessage(wrongDBNameMsg, false);\n                    return false;\n                }\n            }\n        }\n        // show progress bar.\n        $('#upload_form_status').css('display', 'inline');\n        $('#upload_form_status_info').css('display', 'inline');\n    });\n    // Initially display the options for the selected plugin\n    changePluginOpts();\n    // Whenever the selected plugin changes, change the options displayed\n    $('#plugins').on('change', function () {\n        changePluginOpts();\n    });\n    $('#input_import_file').on('change', function () {\n        matchFile($(this).val());\n    });\n    $('#select_local_import_file').on('change', function () {\n        matchFile($(this).val());\n    });\n    /**\n     * Set up the interface for Javascript-enabled browsers since the default is for\n     *  Javascript-disabled browsers\n     */\n    $('#format_specific_opts').find('div.format_specific_options')\n        .find('h3')\n        .remove();\n    // $(\"form[name=import] *\").unwrap();\n    /**\n     * for input element text_csv_enclosed and text_csv_escaped allow just one character to enter.\n     * as mysql allows just one character for these fields,\n     * if first character is escape then allow two including escape character.\n     */\n    $('#text_csv_enclosed').add('#text_csv_escaped').on('keyup', function () {\n        if ($(this).val().length === 2 && $(this).val().charAt(0) !== '\\\\') {\n            $(this).val($(this).val().substring(0, 1));\n            return false;\n        }\n        return true;\n    });\n    $('#importmain #buttonGo').on('click', function () {\n        const uploadProgressInfo = document.getElementById('upload_progress_info');\n        const uploadId = uploadProgressInfo.dataset.uploadId;\n        const handler = uploadProgressInfo.dataset.handler;\n        $('#upload_form_form').css('display', 'none');\n        const clockImage = '<img src=\"' + window.themeImagePath + 'ajax_clock_small.gif\" width=\"16\" height=\"16\" alt=\"ajax clock\">';\n        if (handler !== 'PhpMyAdmin\\\\Plugins\\\\Import\\\\Upload\\\\UploadNoplugin') {\n            var finished = false;\n            var percent = 0.0;\n            var total = 0;\n            var complete = 0;\n            var originalTitle = parent && parent.document ? parent.document.title : false;\n            var importStart;\n            var performUpload = function () {\n                $.getJSON('index.php?route=/import-status', { 'id': uploadId, 'import_status': 1, 'server': CommonParams.get('server') }, function (response) {\n                    finished = response.finished;\n                    percent = response.percent;\n                    total = response.total;\n                    complete = response.complete;\n                    if (total === 0 && complete === 0 && percent === 0) {\n                        $('#upload_form_status_info').html(clockImage + ' ' + window.Messages.uploadProgressMaximumAllowedSize);\n                        $('#upload_form_status').css('display', 'none');\n                    }\n                    else {\n                        var nowDate = new Date();\n                        const now = Date.UTC(nowDate.getFullYear(), nowDate.getMonth(), nowDate.getDate(), nowDate.getHours(), nowDate.getMinutes(), nowDate.getSeconds()) + nowDate.getMilliseconds() - 1000;\n                        var statusText = window.sprintf(window.Messages.uploadProgressStatusText, formatBytes(complete, 1, window.Messages.strDecimalSeparator), formatBytes(total, 1, window.Messages.strDecimalSeparator));\n                        if ($('#importmain').is(':visible')) {\n                            // Show progress UI\n                            $('#importmain').hide();\n                            const uploadProgressDiv = '<div class=\"upload_progress\">'\n                                + '<div class=\"upload_progress_bar_outer\">'\n                                + '<div class=\"percentage\"></div>'\n                                + '<div id=\"status\" class=\"upload_progress_bar_inner\">'\n                                + '<div class=\"percentage\"></div></div></div>'\n                                + '<div>' + clockImage + ' ' + window.Messages.uploadProgressUploading + '</div>'\n                                + '<div id=\"statustext\"></div></div>';\n                            $('#import_form_status').html(uploadProgressDiv).show();\n                            importStart = now;\n                        }\n                        else if (percent > 9 || complete > 2000000) {\n                            // Calculate estimated time\n                            var usedTime = now - importStart;\n                            var seconds = parseInt((((total - complete) / complete) * usedTime / 1000).toString());\n                            var speed = window.sprintf(window.Messages.uploadProgressPerSecond, formatBytes(complete / usedTime * 1000, 1, window.Messages.strDecimalSeparator));\n                            var minutes = parseInt((seconds / 60).toString());\n                            seconds %= 60;\n                            var estimatedTime;\n                            if (minutes > 0) {\n                                estimatedTime = window.Messages.uploadProgressRemainingMin\n                                    .replace('%MIN', minutes.toString())\n                                    .replace('%SEC', seconds.toString());\n                            }\n                            else {\n                                estimatedTime = window.Messages.uploadProgressRemainingSec\n                                    .replace('%SEC', seconds.toString());\n                            }\n                            statusText += '<br>' + speed + '<br><br>' + estimatedTime;\n                        }\n                        var percentString = Math.round(percent) + '%';\n                        $('#status').animate({ width: percentString }, 150);\n                        $('.percentage').text(percentString);\n                        // Show percent in window title\n                        if (originalTitle !== false) {\n                            parent.document.title\n                                = percentString + ' - ' + originalTitle;\n                        }\n                        else {\n                            document.title\n                                = percentString + ' - ' + originalTitle;\n                        }\n                        $('#statustext').html(statusText);\n                    }\n                    if (finished) {\n                        if (originalTitle !== false) {\n                            // @ts-ignore\n                            parent.document.title = originalTitle;\n                        }\n                        else {\n                            // @ts-ignore\n                            document.title = originalTitle;\n                        }\n                        $('#importmain').hide();\n                        // Loads the message, either success or mysql error\n                        $('#import_form_status')\n                            .html(clockImage + ' ' + window.Messages.uploadProgressBeingProcessed)\n                            .show();\n                        $('#import_form_status').load('index.php?route=/import-status&message=1&import_status=1&server=' + CommonParams.get('server'));\n                        Navigation.reload();\n                    }\n                    else {\n                        setTimeout(performUpload, 1000);\n                    }\n                });\n            };\n            setTimeout(performUpload, 1000);\n        }\n        else {\n            // No plugin available\n            $('#upload_form_status_info').html(clockImage + ' ' + window.Messages.uploadProgressNoDetails);\n            $('#upload_form_status').css('display', 'none');\n        }\n    });\n});\n","module.exports = jQuery;"],"names":["$","AJAX","formatBytes","Navigation","CommonParams","ajaxShowMessage","changePluginOpts","find","each","hide","selectedPluginName","val","fadeIn","importNotification","document","getElementById","innerText","innerHTML","window","Messages","strImportCSV","matchFile","fname","fnameArray","toLowerCase","split","len","length","extension","filterByValue","prop","registerTeardown","off","add","registerOnload","on","radioLocalImport","radioImport","fileMsg","strImportDialogMessage","wrongTblNameMsg","strTableNameDialogMessage","wrongDBNameMsg","strDBNameDialogMessage","hasClass","trigger","strNoImportFile","newTblName","trim","newDBName","css","remove","charAt","substring","uploadProgressInfo","uploadId","dataset","handler","clockImage","themeImagePath","finished","percent","total","complete","originalTitle","parent","title","importStart","performUpload","getJSON","get","response","html","uploadProgressMaximumAllowedSize","nowDate","Date","now","UTC","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","statusText","sprintf","uploadProgressStatusText","strDecimalSeparator","is","uploadProgressDiv","uploadProgressUploading","show","usedTime","seconds","parseInt","toString","speed","uploadProgressPerSecond","minutes","estimatedTime","uploadProgressRemainingMin","replace","uploadProgressRemainingSec","percentString","Math","round","animate","width","text","uploadProgressBeingProcessed","load","reload","setTimeout","uploadProgressNoDetails"],"sourceRoot":""}