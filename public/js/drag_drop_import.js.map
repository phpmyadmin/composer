{"version":3,"file":"drag_drop_import.js","mappings":"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","sources":["webpack://phpmyadmin/./resources/js/drag_drop_import.ts","webpack://phpmyadmin/external var \"jQuery\""],"sourcesContent":["import $ from 'jquery';\nimport { AJAX } from './modules/ajax.ts';\nimport { CommonParams } from './modules/common.ts';\nimport { escapeHtml } from './modules/functions/escape.ts';\n/* This script handles PMA Drag Drop Import, loaded only when configuration is enabled.*/\n/**\n * Class to handle PMA Drag and Drop Import\n *      feature\n */\nvar DragDropImport = {\n    /**\n     * @var {number}, count of total uploads in this view\n     */\n    uploadCount: 0,\n    /**\n     * @var {number}, count of live uploads\n     */\n    liveUploadCount: 0,\n    /**\n     * @var {string[]} array, allowed extensions\n     */\n    allowedExtensions: ['sql', 'xml', 'ldi', 'mediawiki', 'shp'],\n    /**\n     * @var {string[]} array, allowed extensions for compressed files\n     */\n    allowedCompressedExtensions: ['gz', 'bz2', 'zip'],\n    /**\n     * @var {object[]}, array to store message returned by /import-status\n     */\n    importStatus: [],\n    /**\n     * Checks if any dropped file has valid extension or not\n     *\n     * @param {string} file filename\n     *\n     * @return {string}, extension for valid extension, '' otherwise\n     */\n    getExtension: function (file) {\n        var arr = file.split('.');\n        var ext = arr[arr.length - 1];\n        // check if compressed\n        if ($.inArray(ext.toLowerCase(), DragDropImport.allowedCompressedExtensions) !== -1) {\n            ext = arr[arr.length - 2];\n        }\n        // Now check for extension\n        if ($.inArray(ext.toLowerCase(), DragDropImport.allowedExtensions) !== -1) {\n            return ext;\n        }\n        return '';\n    },\n    /**\n     * Shows upload progress for different sql uploads\n     *\n     * @param {string} hash, hash for specific file upload\n     * @param {number} percent (float), file upload percentage\n     */\n    setProgress: function (hash, percent) {\n        $('.pma_sql_import_status div li[data-hash=\"' + hash + '\"]')\n            .children('progress').val(percent);\n    },\n    /**\n     * Function to upload the file asynchronously\n     *\n     * @param {object} formData FormData object for a specific file\n     * @param {string} hash hash of the current file upload\n     */\n    sendFileToServer: function (formData, hash) {\n        var jqXHR = $.ajax({\n            xhr: function () {\n                var xhrobj = $.ajaxSettings.xhr();\n                if (xhrobj.upload) {\n                    xhrobj.upload.addEventListener('progress', function (event) {\n                        var percent = 0;\n                        // @ts-ignore\n                        var position = event.loaded || event.position;\n                        var total = event.total;\n                        if (event.lengthComputable) {\n                            percent = Math.ceil(position / total * 100);\n                        }\n                        // Set progress\n                        DragDropImport.setProgress(hash, percent);\n                    }, false);\n                }\n                return xhrobj;\n            },\n            url: 'index.php?route=/import',\n            type: 'POST',\n            contentType: false,\n            processData: false,\n            cache: false,\n            data: formData,\n            success: function (data) {\n                DragDropImport.importFinished(hash, false, data.success);\n                if (!data.success) {\n                    DragDropImport.importStatus[DragDropImport.importStatus.length] = {\n                        hash: hash,\n                        message: data.error\n                    };\n                }\n            }\n        });\n        // -- provide link to cancel the upload\n        $('.pma_sql_import_status div li[data-hash=\"' + hash +\n            '\"] span.filesize').html('<span hash=\"' +\n            hash + '\" class=\"pma_drop_file_status\" task=\"cancel\">' +\n            window.Messages.dropImportMessageCancel + '</span>');\n        // -- add event listener to this link to abort upload operation\n        $('.pma_sql_import_status div li[data-hash=\"' + hash +\n            '\"] span.filesize span.pma_drop_file_status')\n            .on('click', function () {\n            if ($(this).attr('task') === 'cancel') {\n                jqXHR.abort();\n                $(this).html('<span>' + window.Messages.dropImportMessageAborted + '</span>');\n                DragDropImport.importFinished(hash, true, false);\n            }\n            else if ($(this).children('span').html() ===\n                window.Messages.dropImportMessageFailed) {\n                // -- view information\n                var $this = $(this);\n                $.each(DragDropImport.importStatus, function (key, value) {\n                    if (value.hash === hash) {\n                        $('.pma_drop_result:visible').remove();\n                        var filename = $this.parent('span').attr('data-filename');\n                        $('body').append('<div class=\"pma_drop_result\"><h2>' +\n                            window.Messages.dropImportImportResultHeader + ' - ' +\n                            escapeHtml(filename) + '<span class=\"close\">x</span></h2>' + value.message + '</div>');\n                        $('.pma_drop_result').draggable(); // to make this dialog draggable\n                    }\n                });\n            }\n        });\n    },\n    /**\n     * Triggered when an object is dragged into the PMA UI\n     *\n     * @param {MouseEvent} event obj\n     */\n    dragEnter: function (event) {\n        // We don't want to prevent users from using\n        // browser's default drag-drop feature on some page(s)\n        if ($('.noDragDrop').length !== 0) {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        if (!DragDropImport.hasFiles(event)) {\n            return;\n        }\n        if (CommonParams.get('db') === '') {\n            $('.pma_drop_handler').html(window.Messages.dropImportSelectDB);\n        }\n        else {\n            $('.pma_drop_handler').html(window.Messages.dropImportDropFiles);\n        }\n        $('.pma_drop_handler').fadeIn();\n    },\n    /**\n     * Check if dragged element contains Files\n     *\n     * @param event the event object\n     *\n     * @return {boolean}\n     */\n    hasFiles: function (event) {\n        return !(typeof event.originalEvent.dataTransfer.types === 'undefined' ||\n            $.inArray('Files', event.originalEvent.dataTransfer.types) < 0 ||\n            $.inArray('application/x-moz-nativeimage', event.originalEvent.dataTransfer.types) >= 0);\n    },\n    /**\n     * Triggered when dragged file is being dragged over PMA UI\n     *\n     * @param {MouseEvent} event obj\n     */\n    dragOver: function (event) {\n        // We don't want to prevent users from using\n        // browser's default drag-drop feature on some page(s)\n        if ($('.noDragDrop').length !== 0) {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        if (!DragDropImport.hasFiles(event)) {\n            return;\n        }\n        $('.pma_drop_handler').fadeIn();\n    },\n    /**\n     * Triggered when dragged objects are left\n     *\n     * @param {MouseEvent} event obj\n     */\n    dragLeave: function (event) {\n        // We don't want to prevent users from using\n        // browser's default drag-drop feature on some page(s)\n        if ($('.noDragDrop').length !== 0) {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var $dropHandler = $('.pma_drop_handler');\n        $dropHandler.clearQueue().stop();\n        $dropHandler.fadeOut();\n        $dropHandler.html(window.Messages.dropImportDropFiles);\n    },\n    /**\n     * Called when upload has finished\n     *\n     * @param {string} hash unique hash for a certain upload\n     * @param {boolean} aborted true if upload was aborted\n     * @param {boolean} status status of sql upload, as sent by server\n     */\n    importFinished: function (hash, aborted, status) {\n        $('.pma_sql_import_status div li[data-hash=\"' + hash + '\"]')\n            .children('progress').hide();\n        var icon = 'icon ic_s_success';\n        // -- provide link to view upload status\n        if (!aborted) {\n            if (status) {\n                $('.pma_sql_import_status div li[data-hash=\"' + hash +\n                    '\"] span.filesize span.pma_drop_file_status')\n                    .html('<span>' + window.Messages.dropImportMessageSuccess + '</a>');\n            }\n            else {\n                $('.pma_sql_import_status div li[data-hash=\"' + hash +\n                    '\"] span.filesize span.pma_drop_file_status')\n                    .html('<span class=\"underline\">' + window.Messages.dropImportMessageFailed +\n                    '</a>');\n                icon = 'icon ic_s_error';\n            }\n        }\n        else {\n            icon = 'icon ic_s_notice';\n        }\n        $('.pma_sql_import_status div li[data-hash=\"' + hash +\n            '\"] span.filesize span.pma_drop_file_status')\n            .attr('task', 'info');\n        // Set icon\n        $('.pma_sql_import_status div li[data-hash=\"' + hash + '\"]')\n            .prepend('<img src=\"./themes/dot.gif\" title=\"finished\" class=\"' +\n            icon + '\"> ');\n        // Decrease liveUploadCount by one\n        $('.pma_import_count').html((--DragDropImport.liveUploadCount).toString());\n        if (!DragDropImport.liveUploadCount) {\n            $('.pma_sql_import_status h2 .close').fadeIn();\n        }\n    },\n    /**\n     * Triggered when dragged objects are dropped to UI\n     * From this function, the AJAX Upload operation is initiated\n     *\n     * @param event object\n     */\n    drop: function (event) {\n        // We don't want to prevent users from using\n        // browser's default drag-drop feature on some page(s)\n        if ($('.noDragDrop').length !== 0) {\n            return;\n        }\n        var dbname = CommonParams.get('db');\n        var server = CommonParams.get('server');\n        // if no database is selected -- no\n        if (dbname !== '') {\n            var files = event.originalEvent.dataTransfer.files;\n            if (!files || files.length === 0) {\n                // No files actually transferred\n                $('.pma_drop_handler').fadeOut();\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n            $('.pma_sql_import_status').slideDown();\n            for (var i = 0; i < files.length; i++) {\n                var ext = (DragDropImport.getExtension(files[i].name));\n                var hash = AJAX.hash(++DragDropImport.uploadCount);\n                var $sqlImportStatusDiv = $('.pma_sql_import_status div');\n                $sqlImportStatusDiv.append('<li data-hash=\"' + hash + '\">' +\n                    ((ext !== '') ? '' : '<img src=\"./themes/dot.gif\" title=\"invalid format\" class=\"icon ic_s_notice\"> ') +\n                    escapeHtml(files[i].name) + '<span class=\"filesize\" data-filename=\"' +\n                    escapeHtml(files[i].name) + '\">' + (files[i].size / 1024).toFixed(2) +\n                    ' kb</span></li>');\n                // scroll the UI to bottom\n                $sqlImportStatusDiv.scrollTop($sqlImportStatusDiv.scrollTop() + 50); // 50 hardcoded for now\n                if (ext !== '') {\n                    // Increment liveUploadCount by one\n                    $('.pma_import_count').html((++DragDropImport.liveUploadCount).toString());\n                    $('.pma_sql_import_status h2 .close').fadeOut();\n                    $('.pma_sql_import_status div li[data-hash=\"' + hash + '\"]')\n                        .append('<br><progress max=\"100\" value=\"2\"></progress>');\n                    // uploading\n                    var fd = new FormData();\n                    fd.append('import_file', files[i]);\n                    fd.append('noplugin', Math.random().toString(36).substring(2, 12));\n                    fd.append('db', dbname);\n                    fd.append('server', server);\n                    fd.append('token', CommonParams.get('token'));\n                    fd.append('import_type', 'database');\n                    // todo: method to find the value below\n                    fd.append('charset_of_file', 'utf-8');\n                    // todo: method to find the value below\n                    fd.append('allow_interrupt', 'yes');\n                    fd.append('skip_queries', '0');\n                    fd.append('format', ext);\n                    fd.append('sql_compatibility', 'NONE');\n                    fd.append('sql_no_auto_value_on_zero', 'something');\n                    fd.append('ajax_request', 'true');\n                    fd.append('hash', hash.toString());\n                    // init uploading\n                    DragDropImport.sendFileToServer(fd, hash);\n                }\n                else if (!DragDropImport.liveUploadCount) {\n                    $('.pma_sql_import_status h2 .close').fadeIn();\n                }\n            }\n        }\n        $('.pma_drop_handler').fadeOut();\n        event.stopPropagation();\n        event.preventDefault();\n    }\n};\n/**\n * Called when some user drags, dragover, leave a file to the PMA UI\n */\n$(document).on('dragenter', DragDropImport.dragEnter);\n$(document).on('dragover', DragDropImport.dragOver);\n$(document).on('dragleave', '.pma_drop_handler', DragDropImport.dragLeave);\n// when file is dropped to PMA UI\n$(document).on('drop', 'body', DragDropImport.drop);\n// minimizing-maximizing the sql ajax upload status\n$(document).on('click', '.pma_sql_import_status h2 .minimize', function () {\n    if ($(this).attr('toggle') === 'off') {\n        $('.pma_sql_import_status div').css('height', '270px');\n        $(this).attr('toggle', 'on');\n        $(this).html('-'); // to minimize\n    }\n    else {\n        $('.pma_sql_import_status div').css('height', '0px');\n        $(this).attr('toggle', 'off');\n        $(this).html('+'); // to maximise\n    }\n});\n// closing sql ajax upload status\n$(document).on('click', '.pma_sql_import_status h2 .close', function () {\n    $('.pma_sql_import_status').fadeOut(function () {\n        $('.pma_sql_import_status div').html('');\n        DragDropImport.importStatus = []; // clear the message array\n    });\n});\n// Closing the import result box\n$(document).on('click', '.pma_drop_result h2 .close', function () {\n    $(this).parent('h2').parent('div').remove();\n});\n","module.exports = jQuery;"],"names":["$","AJAX","CommonParams","escapeHtml","DragDropImport","uploadCount","liveUploadCount","allowedExtensions","allowedCompressedExtensions","importStatus","getExtension","file","arr","split","ext","length","inArray","toLowerCase","setProgress","hash","percent","children","val","sendFileToServer","formData","jqXHR","ajax","xhr","xhrobj","ajaxSettings","upload","addEventListener","event","position","loaded","total","lengthComputable","Math","ceil","url","type","contentType","processData","cache","data","success","importFinished","message","error","html","window","Messages","dropImportMessageCancel","on","attr","abort","dropImportMessageAborted","dropImportMessageFailed","$this","each","key","value","remove","filename","parent","append","dropImportImportResultHeader","draggable","dragEnter","stopPropagation","preventDefault","hasFiles","get","dropImportSelectDB","dropImportDropFiles","fadeIn","originalEvent","dataTransfer","types","dragOver","dragLeave","$dropHandler","clearQueue","stop","fadeOut","aborted","status","hide","icon","dropImportMessageSuccess","prepend","toString","drop","dbname","server","files","slideDown","i","name","$sqlImportStatusDiv","size","toFixed","scrollTop","fd","FormData","random","substring","document","css"],"sourceRoot":""}