{"version":3,"file":"server/privileges.js","mappings":"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","sources":["webpack://phpmyadmin/./resources/js/server/privileges.ts","webpack://phpmyadmin/external var \"jQuery\""],"sourcesContent":["import $ from 'jquery';\nimport * as bootstrap from 'bootstrap';\nimport { AJAX } from '../modules/ajax.ts';\nimport { checkPassword, checkPasswordStrength, checkboxesSel, displayPasswordGenerateButton, getSqlEditor, shouldShowEmptyPasswordWarning } from '../modules/functions.ts';\nimport { CommonParams } from '../modules/common.ts';\nimport { Navigation } from '../modules/navigation.ts';\nimport { ajaxRemoveMessage, ajaxShowMessage } from '../modules/ajax-message.ts';\nimport getImageTag from '../modules/functions/getImageTag.ts';\n/**\n * Export privileges modal handler\n *\n * @param {object} data\n *\n * @param {JQuery} msgbox\n *\n */\nfunction exportPrivilegesModalHandler(data, msgbox) {\n    if (typeof data !== 'undefined' && data.success === true) {\n        var modal = $('#exportPrivilegesModal');\n        // Remove any previous privilege modal data, if any\n        modal.find('.modal-body').first().html('');\n        $('#exportPrivilegesModalLabel').first().html('Loading');\n        modal.modal('show');\n        modal.on('shown.bs.modal', function () {\n            modal.find('.modal-body').first().html(data.message);\n            $('#exportPrivilegesModalLabel').first().html(data.title);\n            ajaxRemoveMessage(msgbox);\n            // Attach syntax highlighted editor to export dialog\n            getSqlEditor(modal.find('textarea'));\n        });\n        return;\n    }\n    ajaxShowMessage(data.error, false);\n}\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst EditUserGroup = {\n    /**\n     * @param {MouseEvent} event\n     */\n    handleEvent: function (event) {\n        const editUserGroupModal = document.getElementById('editUserGroupModal');\n        const button = event.relatedTarget;\n        const username = button.getAttribute('data-username');\n        $.get('index.php?route=/server/user-groups/edit-form', {\n            'ajax_request': true,\n            'username': username,\n            'server': CommonParams.get('server')\n        }, data => {\n            if (typeof data === 'undefined' || data.success !== true) {\n                ajaxShowMessage(data.error, false, 'error');\n                return;\n            }\n            const modal = bootstrap.Modal.getInstance(editUserGroupModal);\n            const modalBody = editUserGroupModal.querySelector('.modal-body');\n            const saveButton = editUserGroupModal.querySelector('#editUserGroupModalSaveButton');\n            modalBody.innerHTML = data.message;\n            saveButton.addEventListener('click', () => {\n                const form = $(editUserGroupModal.querySelector('#changeUserGroupForm'));\n                $.post('index.php?route=/server/privileges', form.serialize() + CommonParams.get('arg_separator') + 'ajax_request=1', data => {\n                    if (typeof data === 'undefined' || data.success !== true) {\n                        ajaxShowMessage(data.error, false, 'error');\n                        return;\n                    }\n                    const userGroup = form.serializeArray().find(el => el.name === 'userGroup').value;\n                    // button -> td -> tr -> td.usrGroup\n                    const userGroupTableCell = button.parentElement.parentElement.querySelector('.usrGroup');\n                    userGroupTableCell.textContent = userGroup;\n                });\n                modal.hide();\n            });\n        });\n    }\n};\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst AccountLocking = {\n    handleEvent: function () {\n        const button = this;\n        const isLocked = button.dataset.isLocked === 'true';\n        const url = isLocked\n            ? 'index.php?route=/server/privileges/account-unlock'\n            : 'index.php?route=/server/privileges/account-lock';\n        const params = {\n            'username': button.dataset.userName,\n            'hostname': button.dataset.hostName,\n            'ajax_request': true,\n            'server': CommonParams.get('server'),\n        };\n        $.post(url, params, data => {\n            if (data.success === false) {\n                ajaxShowMessage(data.error);\n                return;\n            }\n            if (isLocked) {\n                const lockIcon = getImageTag('s_lock', window.Messages.strLock, {}).toString();\n                button.innerHTML = '<span class=\"text-nowrap\">' + lockIcon + ' ' + window.Messages.strLock + '</span>';\n                button.title = window.Messages.strLockAccount;\n                button.dataset.isLocked = 'false';\n            }\n            else {\n                const unlockIcon = getImageTag('s_unlock', window.Messages.strUnlock, {}).toString();\n                button.innerHTML = '<span class=\"text-nowrap\">' + unlockIcon + ' ' + window.Messages.strUnlock + '</span>';\n                button.title = window.Messages.strUnlockAccount;\n                button.dataset.isLocked = 'true';\n            }\n            ajaxShowMessage(data.message);\n        });\n    }\n};\n/**\n * Display a warning if there is already a user by the name entered as the username.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst AddUserLoginCheckUsername = {\n    handleEvent: function () {\n        var username = $(this).val();\n        var $warning = $('#user_exists_warning');\n        if ($('#select_pred_username').val() === 'userdefined' && username !== '') {\n            var href = $('form[name=\\'usersForm\\']').attr('action');\n            var params = {\n                'ajax_request': true,\n                'server': CommonParams.get('server'),\n                'validate_username': true,\n                'username': username\n            };\n            $.get(href, params, function (data) {\n                if (data.user_exists) {\n                    $warning.show();\n                }\n                else {\n                    $warning.hide();\n                }\n            });\n        }\n        else {\n            $warning.hide();\n        }\n    }\n};\n/**\n * Indicating password strength\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst PasswordStrength = {\n    handleEvent: function () {\n        var meterObj = $('#password_strength_meter');\n        var meterObjLabel = $('#password_strength');\n        var username = $('input[name=\"username\"]');\n        checkPasswordStrength($(this).val(), meterObj, meterObjLabel, username.val());\n    }\n};\n/**\n * Automatically switching to 'Use Text field' from 'No password' once start writing in text area\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst SwitchToUseTextField = {\n    handleEvent: function () {\n        if ($('#text_pma_pw').val() !== '') {\n            $('#select_pred_password').val('userdefined');\n        }\n    }\n};\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst ChangePasswordStrength = {\n    handleEvent: function () {\n        var meterObj = $('#change_password_strength_meter');\n        var meterObjLabel = $('#change_password_strength');\n        checkPasswordStrength($(this).val(), meterObj, meterObjLabel, CommonParams.get('user'));\n    }\n};\n/**\n * Display a notice if sha256_password is selected\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst ShowSha256PasswordNotice = {\n    handleEvent: function () {\n        var selectedPlugin = $(this).val();\n        if (selectedPlugin === 'sha256_password') {\n            $('#ssl_reqd_warning').show();\n        }\n        else {\n            $('#ssl_reqd_warning').hide();\n        }\n    }\n};\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst RevokeUser = {\n    /**\n     * @param {Event} event\n     */\n    handleEvent: function (event) {\n        event.preventDefault();\n        var $thisButton = $(this);\n        var $form = $('#usersForm');\n        $thisButton.confirm(window.Messages.strDropUserWarning, $form.attr('action'), function (url) {\n            var $dropUsersDbCheckbox = $('#dropUsersDbCheckbox');\n            if ($dropUsersDbCheckbox.is(':checked')) {\n                var isConfirmed = confirm(window.Messages.strDropDatabaseStrongWarning + '\\n' + window.sprintf(window.Messages.strDoYouReally, 'DROP DATABASE'));\n                if (!isConfirmed) {\n                    // Uncheck the drop users database checkbox\n                    $dropUsersDbCheckbox.prop('checked', false);\n                }\n            }\n            ajaxShowMessage(window.Messages.strRemovingSelectedUsers);\n            var argsep = CommonParams.get('arg_separator');\n            $.post(url, $form.serialize() + argsep + 'delete=' + $thisButton.val() + argsep + 'ajax_request=true', function (data) {\n                if (typeof data !== 'undefined' && data.success === true) {\n                    ajaxShowMessage(data.message);\n                    // Refresh navigation, if we dropped some databases with the name\n                    // that is the same as the username of the deleted user\n                    if ($('#dropUsersDbCheckbox:checked').length) {\n                        Navigation.reload();\n                    }\n                    // Remove the revoked user from the users list\n                    $form.find('input:checkbox:checked').parents('tr').slideUp('medium', function () {\n                        var thisUserInitial = $(this).find('input:checkbox').val().charAt(0).toUpperCase();\n                        $(this).remove();\n                        // If this is the last user with thisUserInitial, remove the link from #userAccountsPagination\n                        if ($('#userRightsTable').find('input:checkbox[value^=\"' + thisUserInitial + '\"], input:checkbox[value^=\"' + thisUserInitial.toLowerCase() + '\"]').length === 0) {\n                            $('#userAccountsPagination')\n                                .find('.page-item > .page-link:contains(' + thisUserInitial + ')')\n                                .parent('.page-item')\n                                .addClass('disabled')\n                                .html('<a class=\"page-link\" href=\"#\" tabindex=\"-1\" aria-disabled=\"true\">' + thisUserInitial + '</a>');\n                        }\n                        // Re-check the classes of each row\n                        $form\n                            .find('tbody').find('tr').each(function (index) {\n                            if (index >= 0 && index % 2 === 0) {\n                                $(this).removeClass('odd').addClass('even');\n                            }\n                            else if (index >= 0 && index % 2 !== 0) {\n                                $(this).removeClass('even').addClass('odd');\n                            }\n                        });\n                        // update the checkall checkbox\n                        $(checkboxesSel).trigger('change');\n                    });\n                }\n                else {\n                    ajaxShowMessage(data.error, false);\n                }\n            }); // end $.post()\n        });\n    }\n};\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst ExportPrivileges = {\n    /**\n     * @param {Event} event\n     */\n    handleEvent: function (event) {\n        event.preventDefault();\n        // can't export if no users checked\n        if ($(this.form).find('input:checked').length === 0) {\n            ajaxShowMessage(window.Messages.strNoAccountSelected, 2000, 'success');\n            return;\n        }\n        var msgbox = ajaxShowMessage();\n        var argsep = CommonParams.get('arg_separator');\n        var serverId = CommonParams.get('server');\n        var selectedUsers = $('#usersForm input[name*=\\'selected_usr\\']:checkbox').serialize();\n        var postStr = selectedUsers + '&submit_mult=export' + argsep + 'ajax_request=true&server=' + serverId;\n        $.post($(this.form).prop('action'), postStr, function (data) {\n            exportPrivilegesModalHandler(data, msgbox);\n        }); // end $.post\n    }\n};\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst ExportUser = {\n    /**\n     * @param {Event} event\n     */\n    handleEvent: function (event) {\n        event.preventDefault();\n        var msgbox = ajaxShowMessage();\n        $.get($(this).attr('href'), { 'ajax_request': true }, function (data) {\n            exportPrivilegesModalHandler(data, msgbox);\n        });\n    }\n};\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst SslTypeToggle = {\n    handleEvent: function () {\n        var $div = $('#specified_div');\n        if ($('#ssl_type_SPECIFIED').is(':checked')) {\n            $div.find('input').prop('disabled', false);\n        }\n        else {\n            $div.find('input').prop('disabled', true);\n        }\n    }\n};\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst SslPrivilegeToggle = {\n    handleEvent: function () {\n        var $div = $('#require_ssl_div');\n        if ($(this).is(':checked')) {\n            $div.find('input').prop('disabled', false);\n            $('#ssl_type_SPECIFIED').trigger('change');\n        }\n        else {\n            $div.find('input').prop('disabled', true);\n        }\n    }\n};\n/**\n * Create submenu for simpler interface\n */\nfunction addOrUpdateSubmenu() {\n    var $editUserDialog = $('#edit_user_dialog');\n    if ($editUserDialog.length === 0) {\n        return;\n    }\n    var $subNav = $('.nav-pills');\n    var submenuLabel;\n    var submenuLink;\n    var linkNumber;\n    // if submenu exists yet, remove it first\n    if ($subNav.length > 0) {\n        $subNav.remove();\n    }\n    // construct a submenu from the existing fieldsets\n    $subNav = $('<ul></ul>').prop('class', 'nav nav-pills m-2');\n    $('#edit_user_dialog .submenu-item').each(function () {\n        submenuLabel = $(this).find('.js-submenu-label[data-submenu-label]').data('submenu-label');\n        submenuLink = $('<a></a>')\n            .prop('class', 'nav-link')\n            .prop('href', '#')\n            .html(submenuLabel);\n        $('<li></li>')\n            .prop('class', 'nav-item')\n            .append(submenuLink)\n            .appendTo($subNav);\n    });\n    // click handlers for submenu\n    $subNav.find('a').on('click', function (e) {\n        e.preventDefault();\n        // if already active, ignore click\n        if ($(this).hasClass('active')) {\n            return;\n        }\n        $subNav.find('a').removeClass('active');\n        $(this).addClass('active');\n        // which section to show now?\n        linkNumber = $subNav.find('a').index($(this));\n        // hide all sections but the one to show\n        $('#edit_user_dialog .submenu-item').hide().eq(linkNumber).show();\n    });\n    // make first menu item active\n    // TODO: support URL hash history\n    $subNav.find('> :first-child a').addClass('active');\n    $editUserDialog.prepend($subNav);\n    // hide all sections but the first\n    $('#edit_user_dialog .submenu-item').hide().eq(0).show();\n    // scroll to the top\n    $('html, body').animate({ scrollTop: 0 }, 'fast');\n}\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst SelectAllPrivileges = {\n    /**\n     * @param {Event} event\n     */\n    handleEvent: function (event) {\n        const method = event.target.getAttribute('data-select-target');\n        var options = $(method).first().children();\n        options.each(function (_, obj) {\n            obj.selected = true;\n        });\n    }\n};\nfunction setMaxWidth() {\n    var windowWidth = $(window).width();\n    $('.jsresponsive').css('max-width', (windowWidth - 35) + 'px');\n}\n/**\n * Validates the \"add a user\" form\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst CheckAddUser = {\n    handleEvent: function () {\n        const theForm = this;\n        if (theForm.elements.hostname && theForm.elements.hostname.value === '') {\n            alert(window.Messages.strHostEmpty);\n            theForm.elements.hostname.focus();\n            return false;\n        }\n        if ((theForm.elements.pred_username && theForm.elements.pred_username.value === 'userdefined') && theForm.elements.username.value === '') {\n            alert(window.Messages.strUserEmpty);\n            theForm.elements.username.focus();\n            return false;\n        }\n        return checkPassword($(theForm));\n    }\n};\nconst CheckEmptyPasswordWhenAllowNoPasswordIsEnabled = {\n    handleEvent: function () {\n        const theForm = this;\n        if (shouldShowEmptyPasswordWarning($(theForm))) {\n            $(this).confirm(window.Messages.strPasswordEmptyWhenAllowNoPasswordIsEnabled, '', function () {\n                theForm.submit();\n                return true;\n            });\n            return false;\n        }\n        else {\n            theForm.submit();\n            return true;\n        }\n    }\n};\nconst selectPasswordRadioWhenChangingPassword = () => {\n    $('#nopass_0').prop('checked', true);\n};\n/**\n * AJAX scripts for /server/privileges page.\n *\n * Actions ajaxified here:\n * Add user\n * Revoke a user\n * Edit privileges\n * Export privileges\n * Paginate table of users\n * Flush privileges\n *\n * @memberOf    jQuery\n * @name        document.ready\n */\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('server/privileges.js', function () {\n    $('#fieldset_add_user_login').off('change', 'input[name=\\'username\\']');\n    $(document).off('click', '#deleteUserCard .btn.ajax');\n    $('#text_pma_change_pw').off('keyup');\n    $('#text_pma_change_pw').off('change');\n    $('#text_pma_change_pw2').off('change');\n    const editUserGroupModal = document.getElementById('editUserGroupModal');\n    if (editUserGroupModal) {\n        editUserGroupModal.removeEventListener('show.bs.modal', EditUserGroup);\n    }\n    $(document).off('click', 'button.mult_submit[value=export]');\n    $(document).off('click', 'a.export_user_anchor.ajax');\n    $('button.jsAccountLocking').off('click');\n    $('#dropUsersDbCheckbox').off('click');\n    $(document).off('click', '.checkall_box');\n    $(document).off('change', '#checkbox_SSL_priv');\n    $(document).off('change', 'input[name=\"ssl_type\"]');\n    $(document).off('change', '#select_authentication_plugin');\n});\nAJAX.registerOnload('server/privileges.js', function () {\n    $('#fieldset_add_user_login').on('change', 'input[name=\\'username\\']', AddUserLoginCheckUsername.handleEvent);\n    $('#text_pma_pw').on('keyup', PasswordStrength.handleEvent);\n    $('#text_pma_pw').on('input', SwitchToUseTextField.handleEvent);\n    $('#text_pma_change_pw').on('keyup', ChangePasswordStrength.handleEvent);\n    $('#text_pma_change_pw').on('change', selectPasswordRadioWhenChangingPassword);\n    $('#text_pma_change_pw2').on('change', selectPasswordRadioWhenChangingPassword);\n    $(document).on('change', '#select_authentication_plugin', ShowSha256PasswordNotice.handleEvent);\n    $(document).on('click', '#deleteUserCard .btn.ajax', RevokeUser.handleEvent);\n    const editUserGroupModal = document.getElementById('editUserGroupModal');\n    if (editUserGroupModal) {\n        editUserGroupModal.addEventListener('show.bs.modal', EditUserGroup);\n    }\n    $(document).on('click', 'button.mult_submit[value=export]', ExportPrivileges.handleEvent);\n    // if exporting non-ajax, highlight anyways\n    getSqlEditor($('textarea.export'));\n    $(document).on('click', 'a.export_user_anchor.ajax', ExportUser.handleEvent);\n    $('button.jsAccountLocking').on('click', AccountLocking.handleEvent);\n    $(document).on('change', 'input[name=\"ssl_type\"]', SslTypeToggle.handleEvent);\n    $(document).on('change', '#checkbox_SSL_priv', SslPrivilegeToggle.handleEvent);\n    $('#checkbox_SSL_priv').trigger('change');\n    $('input.autofocus').trigger('focus');\n    $(checkboxesSel).trigger('change');\n    displayPasswordGenerateButton();\n    addOrUpdateSubmenu();\n    $('#select_priv_all').on('click', SelectAllPrivileges.handleEvent);\n    $('#insert_priv_all').on('click', SelectAllPrivileges.handleEvent);\n    $('#update_priv_all').on('click', SelectAllPrivileges.handleEvent);\n    $('#references_priv_all').on('click', SelectAllPrivileges.handleEvent);\n    setMaxWidth();\n    $('#addUsersForm').on('submit', CheckAddUser.handleEvent);\n    $('#copyUserForm').on('submit', CheckAddUser.handleEvent);\n    $('#change_password_form').on('submit', CheckEmptyPasswordWhenAllowNoPasswordIsEnabled.handleEvent);\n});\n","module.exports = jQuery;"],"names":["$","bootstrap","AJAX","checkPassword","checkPasswordStrength","checkboxesSel","displayPasswordGenerateButton","getSqlEditor","shouldShowEmptyPasswordWarning","CommonParams","Navigation","ajaxRemoveMessage","ajaxShowMessage","getImageTag","exportPrivilegesModalHandler","data","msgbox","success","modal","find","first","html","on","message","title","error","EditUserGroup","handleEvent","event","editUserGroupModal","document","getElementById","button","relatedTarget","username","getAttribute","get","Modal","getInstance","modalBody","querySelector","saveButton","innerHTML","addEventListener","form","post","serialize","userGroup","serializeArray","el","name","value","userGroupTableCell","parentElement","textContent","hide","AccountLocking","isLocked","dataset","url","params","userName","hostName","lockIcon","window","Messages","strLock","toString","strLockAccount","unlockIcon","strUnlock","strUnlockAccount","AddUserLoginCheckUsername","val","$warning","href","attr","user_exists","show","PasswordStrength","meterObj","meterObjLabel","SwitchToUseTextField","ChangePasswordStrength","ShowSha256PasswordNotice","selectedPlugin","RevokeUser","preventDefault","$thisButton","$form","confirm","strDropUserWarning","$dropUsersDbCheckbox","is","isConfirmed","strDropDatabaseStrongWarning","sprintf","strDoYouReally","prop","strRemovingSelectedUsers","argsep","length","reload","parents","slideUp","thisUserInitial","charAt","toUpperCase","remove","toLowerCase","parent","addClass","each","index","removeClass","trigger","ExportPrivileges","strNoAccountSelected","serverId","selectedUsers","postStr","ExportUser","SslTypeToggle","$div","SslPrivilegeToggle","addOrUpdateSubmenu","$editUserDialog","$subNav","submenuLabel","submenuLink","linkNumber","append","appendTo","e","hasClass","eq","prepend","animate","scrollTop","SelectAllPrivileges","method","target","options","children","_","obj","selected","setMaxWidth","windowWidth","width","css","CheckAddUser","theForm","elements","hostname","alert","strHostEmpty","focus","pred_username","strUserEmpty","CheckEmptyPasswordWhenAllowNoPasswordIsEnabled","strPasswordEmptyWhenAllowNoPasswordIsEnabled","submit","selectPasswordRadioWhenChangingPassword","registerTeardown","off","removeEventListener","registerOnload"],"ignoreList":[],"sourceRoot":""}