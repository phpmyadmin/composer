{"version":3,"file":"server/variables.js","mappings":"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","sources":["webpack://phpmyadmin/./resources/js/server/variables.ts","webpack://phpmyadmin/external var \"jQuery\""],"sourcesContent":["import $ from 'jquery';\nimport { AJAX } from '../modules/ajax.ts';\nimport { CommonParams } from '../modules/common.ts';\nimport { ajaxRemoveMessage, ajaxShowMessage } from '../modules/ajax-message.ts';\n/**\n * @fileoverview    Javascript functions used in server variables page\n * @name            Server Replication\n *\n * @requires    jQueryUI\n */\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('server/variables.js', function () {\n    $(document).off('click', 'a.editLink');\n    $('#serverVariables').find('.var-name').find('a img').remove();\n});\nAJAX.registerOnload('server/variables.js', function () {\n    var $saveLink = $('a.saveLink');\n    var $cancelLink = $('a.cancelLink');\n    $('#serverVariables').find('.var-name').find('a').append($('#docImage').clone().css('display', 'inline-block'));\n    /* Launches the variable editor */\n    $(document).on('click', 'a.editLink', function (event) {\n        event.preventDefault();\n        editVariable(this);\n    });\n    /* Allows the user to edit a server variable */\n    function editVariable(link) {\n        var $link = $(link);\n        var $cell = $link.parent();\n        var $valueCell = $link.parents('.var-row').find('.var-value');\n        var varName = $link.data('variable');\n        var $mySaveLink = $saveLink.clone().css('display', 'inline-block');\n        var $myCancelLink = $cancelLink.clone().css('display', 'inline-block');\n        var $msgbox = ajaxShowMessage();\n        var $myEditLink = $cell.find('a.editLink');\n        $cell.addClass('edit'); // variable is being edited\n        $myEditLink.remove(); // remove edit link\n        $mySaveLink.on('click', function () {\n            var $msgbox = ajaxShowMessage(window.Messages.strProcessingRequest);\n            $.post('index.php?route=/server/variables/set/' + encodeURIComponent(varName), {\n                'ajax_request': true,\n                'server': CommonParams.get('server'),\n                'varValue': $valueCell.find('input').val()\n            }, function (data) {\n                if (data.success) {\n                    $valueCell\n                        .html(data.variable)\n                        .data('content', data.variable);\n                    ajaxRemoveMessage($msgbox);\n                }\n                else {\n                    if (data.error === '') {\n                        ajaxShowMessage(window.Messages.strRequestFailed, false);\n                    }\n                    else {\n                        ajaxShowMessage(data.error, false);\n                    }\n                    $valueCell.html($valueCell.data('content'));\n                }\n                $cell.removeClass('edit')\n                    // @ts-ignore\n                    .html($myEditLink);\n            });\n            return false;\n        });\n        $myCancelLink.on('click', function () {\n            $valueCell.html($valueCell.data('content'));\n            $cell.removeClass('edit')\n                // @ts-ignore\n                .html($myEditLink);\n            return false;\n        });\n        $.get('index.php?route=/server/variables/get/' + encodeURIComponent(varName), {\n            'ajax_request': true,\n            'server': CommonParams.get('server')\n        }, function (data) {\n            if (typeof data !== 'undefined' && data.success === true) {\n                var $links = $('<div></div>')\n                    .append($myCancelLink)\n                    .append('&nbsp;&nbsp;&nbsp;')\n                    .append($mySaveLink);\n                var $editor = $('<div></div>', { 'class': 'serverVariableEditor' })\n                    .append($('<div></div>').append($('<input>', { type: 'text', 'class': 'form-control form-control-sm' }).val(data.message)));\n                // Save and replace content\n                $cell\n                    // @ts-ignore\n                    .html($links)\n                    .children()\n                    .css('display', 'flex');\n                $valueCell\n                    .data('content', $valueCell.html())\n                    // @ts-ignore\n                    .html($editor)\n                    .find('input')\n                    .trigger('focus')\n                    .on('keydown', function (event) {\n                    if (event.keyCode === 13) { // Enter key\n                        $mySaveLink.trigger('click');\n                    }\n                    else if (event.keyCode === 27) { // Escape key\n                        $myCancelLink.trigger('click');\n                    }\n                });\n                ajaxRemoveMessage($msgbox);\n            }\n            else {\n                $cell.removeClass('edit')\n                    // @ts-ignore\n                    .html($myEditLink);\n                ajaxShowMessage(data.error);\n            }\n        });\n    }\n});\n","module.exports = jQuery;"],"names":["$","AJAX","CommonParams","ajaxRemoveMessage","ajaxShowMessage","registerTeardown","document","off","find","remove","registerOnload","$saveLink","$cancelLink","append","clone","css","on","event","preventDefault","editVariable","link","$link","$cell","parent","$valueCell","parents","varName","data","$mySaveLink","$myCancelLink","$msgbox","$myEditLink","addClass","window","Messages","strProcessingRequest","post","encodeURIComponent","get","val","success","html","variable","error","strRequestFailed","removeClass","$links","$editor","type","message","children","trigger","keyCode"],"sourceRoot":""}